import{a as Fe}from"./chunk-LMLVVXX5.js";import{a as Ae,b as Se,c as ye,d as we,e as Ie,f as Ce}from"./chunk-6KN4ELJ7.js";import{a as ce,b as pe}from"./chunk-ENSBJLBX.js";import"./chunk-5DPQWRQM.js";import{a as ge,b as ve,f as xe,i as be,j as Ee,k as he}from"./chunk-HAQFI63Z.js";import{f as ue,g as _e,n as fe}from"./chunk-YZVU7P4D.js";import{a as O}from"./chunk-XAJTSRQW.js";import{a as C,b as me}from"./chunk-4DVJJQNQ.js";import"./chunk-BSLYAFLW.js";import"./chunk-X5YLR3NI.js";import"./chunk-SGAKRYQ3.js";import{e as X,f as Y}from"./chunk-A42ZMED3.js";import"./chunk-VLNB4REZ.js";import{c as ee,e as f,g as te,h as ie,k as re,l as ae,n as ne,o as oe,v as le,w as se,x as de}from"./chunk-E2BOE3LX.js";import{e as Q,f as T,g as P,l as U}from"./chunk-MTWZV5NU.js";import{Cb as u,Eb as c,Ka as F,La as K,Ma as o,Qb as y,Ra as N,Sb as l,Tb as w,Ub as x,Vb as V,Xa as k,Y as S,ab as p,ba as g,ca as v,cb as z,f as W,pb as d,qb as r,ra as J,rb as a,sb as b,yb as E}from"./chunk-EMRS3JRH.js";import{i as h}from"./chunk-ODN5LVDJ.js";function Ue(i,t){if(i&1){let e=E();r(0,"div",5)(1,"p",6),l(2,"Seleccionar tipo usuario para alta"),a(),r(3,"div",7)(4,"button",8),u("click",function(){g(e);let s=c();return v(s.seleccionarTipo("paciente"))}),r(5,"span",9),l(6,"Paciente"),a()(),r(7,"button",8),u("click",function(){g(e);let s=c();return v(s.seleccionarTipo("especialista"))}),r(8,"span",9),l(9,"Especialista"),a()(),r(10,"button",8),u("click",function(){g(e);let s=c();return v(s.seleccionarTipo("admin"))}),r(11,"span",9),l(12,"Admin"),a()()()()}}function Oe(i,t){i&1&&(r(0,"mat-error"),l(1," Campo obligatorio "),a())}function Me(i,t){i&1&&(r(0,"mat-error"),l(1," M\xEDnimo 2 caracteres "),a())}function Ne(i,t){i&1&&(r(0,"mat-error"),l(1," Solo letras "),a())}function ze(i,t){i&1&&(r(0,"mat-error"),l(1," Campo obligatorio "),a())}function De(i,t){i&1&&(r(0,"mat-error"),l(1," M\xEDnimo 2 caracteres "),a())}function Re(i,t){i&1&&(r(0,"mat-error"),l(1," Solo letras "),a())}function qe(i,t){i&1&&(r(0,"mat-error"),l(1," Campo obligatorio "),a())}function Le(i,t){i&1&&(r(0,"mat-error"),l(1," M\xEDnimo 18 "),a())}function $e(i,t){i&1&&(r(0,"mat-error"),l(1," M\xE1ximo 99 "),a())}function je(i,t){i&1&&(r(0,"mat-error"),l(1," Campo obligatorio "),a())}function Be(i,t){i&1&&(r(0,"mat-error"),l(1," Debe contener 8 d\xEDgitos "),a())}function He(i,t){if(i&1&&(r(0,"mat-option",31),l(1),a()),i&2){let e=t.$implicit;d("value",e),o(),x(" ",e," ")}}function Ge(i,t){i&1&&(r(0,"mat-error"),l(1," Campo obligatorio "),a())}function Ze(i,t){if(i&1&&(r(0,"mat-form-field",11)(1,"mat-label"),l(2,"Obra Social"),a(),r(3,"mat-select",29),p(4,He,2,2,"mat-option",30),a(),p(5,Ge,2,0,"mat-error",13),a()),i&2){let e,n=c(2);o(4),d("ngForOf",n.obraSocialOptions),o(),d("ngIf",(e=n.registroForm.get("obraSocial"))==null?null:e.hasError("required"))}}function We(i,t){if(i&1){let e=E();r(0,"mat-checkbox",46),u("change",function(){let s=g(e).$implicit,m=c(4);return v(m.toggleEspecialidad(s.id))}),l(1),a()}if(i&2){let e=t.$implicit,n=c(4);d("checked",n.esEspecialidadSeleccionada(e.id)),o(),x(" ",e.nombre," ")}}function Je(i,t){i&1&&(r(0,"div",50),l(1," M\xEDnimo 2 caracteres "),a())}function Ke(i,t){i&1&&(r(0,"div",50),l(1," Solo letras y espacios "),a())}function Qe(i,t){if(i&1){let e=E();r(0,"div",47)(1,"input",48),u("click",function(s){return g(e),v(s.stopPropagation())}),a(),p(2,Je,2,0,"div",49)(3,Ke,2,0,"div",49),a()}if(i&2){let e,n,s=c(4);o(2),d("ngIf",(e=s.registroForm.get("nuevaEspecialidad"))==null?null:e.hasError("minlength")),o(),d("ngIf",(n=s.registroForm.get("nuevaEspecialidad"))==null?null:n.hasError("pattern"))}}function Xe(i,t){if(i&1){let e=E();r(0,"div",40)(1,"div",41),p(2,We,2,2,"mat-checkbox",42),a(),r(3,"div",43)(4,"button",44),u("click",function(s){return g(e),c(3).toggleMostrarNuevaEspecialidad(),v(s.stopPropagation())}),l(5),a(),p(6,Qe,4,2,"div",45),a()()}if(i&2){let e=c(3);o(2),d("ngForOf",e.especialidadOptions),o(3),x(" ",e.mostrarCampoOtraEspecialidad?"\u2715 Cancelar":"+ Agregar nueva especialidad"," "),o(),d("ngIf",e.mostrarCampoOtraEspecialidad)}}function Ye(i,t){i&1&&(r(0,"div",51),l(1," Deb\xE9s seleccionar al menos una especialidad o agregar una nueva "),a())}function et(i,t){if(i&1){let e=E();r(0,"div",32)(1,"div",33),l(2," Especialidades (seleccion\xE1 al menos una) "),a(),r(3,"div",34)(4,"div",35),u("click",function(s){g(e);let m=c(2);return v(m.toggleDesplegableEspecialidades(s))})("keyup.enter",function(s){g(e);let m=c(2);return v(m.toggleDesplegableEspecialidades(s))})("keyup.space",function(s){g(e);let m=c(2);return v(m.toggleDesplegableEspecialidades(s))}),r(5,"span",36),l(6),a(),r(7,"mat-icon",37),l(8),a()(),p(9,Xe,7,3,"div",38),a(),p(10,Ye,2,0,"div",39),a()}if(i&2){let e,n=c(2);o(4),y("border-azul-oscuro",n.desplegableEspecialidadesAbierto),o(2),x(" ",n.obtenerEspecialidadesSeleccionadasTexto()," "),o(2),w(n.desplegableEspecialidadesAbierto?"expand_less":"expand_more"),o(),d("ngIf",n.desplegableEspecialidadesAbierto),o(),d("ngIf",((e=n.registroForm.get("especialidadesSeleccionadas"))==null?null:e.hasError("alMenosUna"))&&((e=n.registroForm.get("especialidadesSeleccionadas"))==null?null:e.touched))}}function tt(i,t){i&1&&(r(0,"mat-error"),l(1," Campo obligatorio "),a())}function it(i,t){i&1&&(r(0,"mat-error"),l(1," Email inv\xE1lido "),a())}function rt(i,t){i&1&&(r(0,"mat-error"),l(1," Campo obligatorio "),a())}function at(i,t){i&1&&(r(0,"mat-error"),l(1," M\xEDnimo 7 caracteres "),a())}function nt(i,t){i&1&&(r(0,"mat-error"),l(1," Campo obligatorio "),a())}function ot(i,t){if(i&1){let e=E();r(0,"div",21)(1,"label",52),l(2,"Imagen de fondo"),a(),r(3,"input",53),u("change",function(s){g(e);let m=c(2);return v(m.onFileSelected(s,"fondo"))}),a()()}}function lt(i,t){if(i&1){let e=E();r(0,"form",10),u("ngSubmit",function(){g(e);let s=c();return v(s.registrar())}),r(1,"mat-form-field",11)(2,"mat-label"),l(3,"Nombre"),a(),b(4,"input",12),p(5,Oe,2,0,"mat-error",13)(6,Me,2,0,"mat-error",13)(7,Ne,2,0,"mat-error",13),a(),r(8,"mat-form-field",11)(9,"mat-label"),l(10,"Apellido"),a(),b(11,"input",14),p(12,ze,2,0,"mat-error",13)(13,De,2,0,"mat-error",13)(14,Re,2,0,"mat-error",13),a(),r(15,"mat-form-field",11)(16,"mat-label"),l(17,"Edad"),a(),b(18,"input",15),p(19,qe,2,0,"mat-error",13)(20,Le,2,0,"mat-error",13)(21,$e,2,0,"mat-error",13),a(),r(22,"mat-form-field",11)(23,"mat-label"),l(24,"DNI"),a(),b(25,"input",16),p(26,je,2,0,"mat-error",13)(27,Be,2,0,"mat-error",13),a(),p(28,Ze,6,2,"mat-form-field",17)(29,et,11,6,"div",18),r(30,"mat-form-field",11)(31,"mat-label"),l(32,"Email"),a(),b(33,"input",19),p(34,tt,2,0,"mat-error",13)(35,it,2,0,"mat-error",13),a(),r(36,"mat-form-field",11)(37,"mat-label"),l(38,"Contrase\xF1a"),a(),b(39,"input",20),p(40,rt,2,0,"mat-error",13)(41,at,2,0,"mat-error",13),a(),r(42,"div",21)(43,"label",22),l(44,"Imagen de perfil"),a(),r(45,"input",23),u("change",function(s){g(e);let m=c();return v(m.onFileSelected(s,"perfil"))}),a(),p(46,nt,2,0,"mat-error",13),a(),p(47,ot,4,0,"div",24),r(48,"div",25)(49,"button",26),l(50," Registrar "),a()(),r(51,"div",27)(52,"button",28),u("click",function(){g(e);let s=c();return v(s.tipoUsuario=null)}),l(53," Cambiar tipo de usuario "),a()()()}if(i&2){let e,n,s,m,A,I,D,R,q,L,$,j,B,H,G,Z,_=c();d("formGroup",_.registroForm),o(5),d("ngIf",(e=_.registroForm.get("nombre"))==null?null:e.hasError("required")),o(),d("ngIf",(n=_.registroForm.get("nombre"))==null?null:n.hasError("minlength")),o(),d("ngIf",(s=_.registroForm.get("nombre"))==null?null:s.hasError("pattern")),o(5),d("ngIf",(m=_.registroForm.get("apellido"))==null?null:m.hasError("required")),o(),d("ngIf",(A=_.registroForm.get("apellido"))==null?null:A.hasError("minlength")),o(),d("ngIf",(I=_.registroForm.get("apellido"))==null?null:I.hasError("pattern")),o(5),d("ngIf",(D=_.registroForm.get("edad"))==null?null:D.hasError("required")),o(),d("ngIf",(R=_.registroForm.get("edad"))==null?null:R.hasError("min")),o(),d("ngIf",(q=_.registroForm.get("edad"))==null?null:q.hasError("max")),o(5),d("ngIf",(L=_.registroForm.get("dni"))==null?null:L.hasError("required")),o(),d("ngIf",($=_.registroForm.get("dni"))==null?null:$.hasError("pattern")),o(),d("ngIf",_.tipoUsuario==="paciente"),o(),d("ngIf",_.tipoUsuario==="especialista"),o(5),d("ngIf",(j=_.registroForm.get("mail"))==null?null:j.hasError("required")),o(),d("ngIf",(B=_.registroForm.get("mail"))==null?null:B.hasError("email")),o(5),d("ngIf",(H=_.registroForm.get("password"))==null?null:H.hasError("required")),o(),d("ngIf",(G=_.registroForm.get("password"))==null?null:G.hasError("minlength")),o(5),d("ngIf",(Z=_.registroForm.get("imagenPerfil"))==null?null:Z.hasError("required")),o(),d("ngIf",_.tipoUsuario==="paciente"),o(2),d("disabled",_.registroForm.invalid)}}var M=class i{perfilId;cerrar=new z;altaExitosa=new z;registroForm;tipoUsuario=null;obraSocialOptions=Ce;especialidadOptions=[];especialidadesSeleccionadas=new Set;mostrarCampoOtraEspecialidad=!1;desplegableEspecialidadesAbierto=!1;subEspecialidad;fb=S(le);auth=S(me);snackBar=S(fe);loading=S(O);elementRef=S(J);ngOnInit(){this.initForm()}ngOnDestroy(){this.subEspecialidad?.unsubscribe()}cerrarPopup(){this.cerrar.emit()}initForm(){return h(this,null,function*(){try{this.loading.show(),this.especialidadOptions=yield this.auth.obtenerEspecialidades(),this.registroForm=this.fb.group({nombre:["",[f.required,f.minLength(2),f.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],apellido:["",[f.required,f.minLength(2),f.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],edad:[null,[f.required,f.min(18),f.max(99)]],dni:["",[f.required,f.pattern(/^\d{8}$/)]],obraSocial:[""],mail:["",[f.required,f.email]],password:["",[f.required,f.minLength(7)]],especialidadesSeleccionadas:[[]],nuevaEspecialidad:["",[f.minLength(2),f.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],imagenPerfil:[null,f.required],imagenFondo:[""]})}catch{console.error("Error al cargar especialidades")}finally{this.loading.hide()}})}seleccionarTipo(t){if(this.tipoUsuario=t,!this.registroForm)return;let e=this.registroForm.get("obraSocial"),n=this.registroForm.get("especialidadesSeleccionadas"),s=this.registroForm.get("nuevaEspecialidad");t==="paciente"?(e?.setValidators([f.required]),n?.clearValidators(),s?.clearValidators()):t==="especialista"?(e?.clearValidators(),n?.setValidators([this.alMenosUnaEspecialidadValidator()])):t==="admin"&&(this.registroForm.get("obraSocial")?.setValue(""),this.registroForm.get("especialidadesSeleccionadas")?.setValue([]),this.registroForm.get("nuevaEspecialidad")?.setValue(""),this.registroForm.get("imagenFondo")?.setValue(""),this.especialidadesSeleccionadas.clear(),this.mostrarCampoOtraEspecialidad=!1,e?.clearValidators(),n?.clearValidators(),s?.clearValidators()),e?.updateValueAndValidity(),n?.updateValueAndValidity(),s?.updateValueAndValidity()}alMenosUnaEspecialidadValidator(){return t=>{let e=t.value||[],n=this.registroForm?.get("nuevaEspecialidad")?.value;return e.length===0&&!n?{alMenosUna:!0}:null}}toggleEspecialidad(t){this.especialidadesSeleccionadas.has(t)?this.especialidadesSeleccionadas.delete(t):this.especialidadesSeleccionadas.add(t),this.actualizarEspecialidadesEnForm()}toggleMostrarNuevaEspecialidad(){this.mostrarCampoOtraEspecialidad=!this.mostrarCampoOtraEspecialidad,this.mostrarCampoOtraEspecialidad||this.registroForm.get("nuevaEspecialidad")?.setValue("")}toggleDesplegableEspecialidades(t){t&&t.stopPropagation(),this.desplegableEspecialidadesAbierto=!this.desplegableEspecialidadesAbierto}onClickOutside(t){if(!this.desplegableEspecialidadesAbierto)return;let e=t.target;this.elementRef.nativeElement.querySelector(".relative")?.contains(e)||(this.desplegableEspecialidadesAbierto=!1)}obtenerEspecialidadesSeleccionadasTexto(){return this.especialidadesSeleccionadas.size===0?"Ninguna seleccionada":Array.from(this.especialidadesSeleccionadas).map(e=>this.especialidadOptions.find(n=>n.id===e)?.nombre).filter(e=>e).join(", ")}esEspecialidadSeleccionada(t){return this.especialidadesSeleccionadas.has(t)}actualizarEspecialidadesEnForm(){let t=Array.from(this.especialidadesSeleccionadas);this.registroForm.get("especialidadesSeleccionadas")?.setValue(t),this.registroForm.get("especialidadesSeleccionadas")?.updateValueAndValidity()}onFileSelected(t,e){let n=e==="perfil"?"imagenPerfil":"imagenFondo",s=t.target,m=this.registroForm.get(n);if(!s.files?.length){m.setValue(null),m.setErrors({required:!0});return}let A=s.files[0];if(!["image/jpeg","image/png","image/jpg"].includes(A.type)){m.setErrors({invalidType:!0});return}m.setValue(A),m.setErrors(null)}registrar(){return h(this,null,function*(){if(!(this.registroForm.invalid||!this.tipoUsuario)){this.loading.show();try{this.tipoUsuario==="paciente"?yield this.handleRegistroPaciente():this.tipoUsuario==="especialista"?yield this.handleRegistroEspecialista():this.tipoUsuario==="admin"&&(yield this.handleRegistroAdmin())}finally{this.loading.hide()}}})}handleRegistroAdmin(){return h(this,null,function*(){try{let t=this.registroForm.value,e=yield C(t.imagenPerfil),n={nombre:t.nombre,apellido:t.apellido,edad:t.edad,dni:t.dni,mail:t.mail,contrasena:t.password,imagenPerfil:e},s=yield this.auth.registerAdmin(n),m=s.errorCode?.toLowerCase();console.log(s.errorCode),m?.includes("error desconocido")?this.mostrarResultado(s.success,s.message):this.mostrarResultado(s.success,s.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar las im\xE1genes.")}})}handleRegistroPaciente(){return h(this,null,function*(){try{let t=this.registroForm.value,e=yield C(t.imagenPerfil),n=yield C(t.imagenFondo),s={nombre:t.nombre,apellido:t.apellido,edad:t.edad,dni:t.dni,obraSocial:t.obraSocial,mail:t.mail,contrasena:t.password,imagenPerfil:e,imagenFondo:n},m=yield this.auth.registerPaciente(s),A=m.errorCode?.toLowerCase();console.log(m.errorCode),A?.includes("error desconocido")?this.mostrarResultado(m.success,m.message):this.mostrarResultado(m.success,m.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar las im\xE1genes.")}})}handleRegistroEspecialista(){return h(this,null,function*(){try{let t=this.registroForm.value,e=yield C(t.imagenPerfil),n=[];t.especialidadesSeleccionadas&&t.especialidadesSeleccionadas.length>0&&n.push(...t.especialidadesSeleccionadas.map(I=>String(I))),t.nuevaEspecialidad&&t.nuevaEspecialidad.trim()&&n.push(t.nuevaEspecialidad.trim());let s={nombre:t.nombre,apellido:t.apellido,edad:t.edad,dni:t.dni,mail:t.mail,contrasena:t.password,especialidades:n,imagenPerfil:e},m=yield this.auth.registerEspecialista(s);m.errorCode?.toLowerCase()?.includes("error desconocido")?this.mostrarResultado(m.success,m.message):this.mostrarResultado(m.success,m.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar la imagen.")}})}mostrarResultado(t,e){if(!t){this.snackBar.open(e||"Ocurri\xF3 un error.","Cerrar",{duration:4e3,panelClass:["bg-red-600","text-white"]});return}this.tipoUsuario=null,this.altaExitosa.emit()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=k({type:i,selectors:[["app-altas-admin"]],hostBindings:function(e,n){e&1&&u("click",function(m){return n.onClickOutside(m)},K)},inputs:{perfilId:"perfilId"},outputs:{cerrar:"cerrar",altaExitosa:"altaExitosa"},decls:6,vars:2,consts:[["tabindex","-1","role","dialog","aria-modal","true",1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50","backdrop-blur-sm",3,"click","keyup.escape"],["tabindex","0",1,"w-full","max-w-3xl","rounded-2xl","bg-white","px-6","py-1","shadow-xl",3,"click","keyup"],[1,"mt-2","mb-4","text-center","text-4xl","font-bold","text-azul-oscuro"],["class","space-y-6 p-10 text-center",4,"ngIf"],["class","mt-6 grid grid-cols-1 gap-6 md:grid-cols-2",3,"formGroup","ngSubmit",4,"ngIf"],[1,"space-y-6","p-10","text-center"],[1,"text-xl","text-gray-700"],[1,"flex","flex-col","justify-center","gap-6","sm:flex-row"],[1,"rounded-xl","bg-white","px-8","py-4","shadow","transition-transform","hover:scale-105",3,"click"],[1,"text-xl","font-semibold","text-azul-oscuro"],[1,"mt-6","grid","grid-cols-1","gap-6","md:grid-cols-2",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","nombre"],[4,"ngIf"],["matInput","","formControlName","apellido"],["matInput","","type","number","formControlName","edad"],["matInput","","formControlName","dni"],["appearance","fill",4,"ngIf"],["class","col-span-2",4,"ngIf"],["matInput","","type","email","formControlName","mail"],["matInput","","type","password","formControlName","password"],[1,"md:col-span-2"],["for","imagenPerfilAdmin",1,"block","text-sm","font-medium","text-gray-700"],["id","imagenPerfilAdmin","type","file","accept","image/*",1,"register-input",3,"change"],["class","md:col-span-2",4,"ngIf"],[1,"flex","justify-center","pt-2","md:col-span-2"],["mat-raised-button","","color","primary","type","submit",1,"rounded-full","bg-verde-oscuro","px-6","py-2","text-white","shadow",3,"disabled"],[1,"text-center","md:col-span-2"],["mat-button","","type","button",1,"text-sm","text-gray-600","underline",3,"click"],["formControlName","obraSocial"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-span-2"],[1,"mb-1","text-sm","font-medium","text-azul-oscuro"],[1,"relative"],["tabindex","0",1,"flex","min-h-[56px]","cursor-pointer","items-center","rounded-md","border","border-gray-300","bg-white","px-4","py-3","transition-colors","hover:border-azul-oscuro",3,"click","keyup.enter","keyup.space"],[1,"flex-1","text-sm","text-gray-700"],[1,"text-gray-500"],["class","absolute top-full right-0 left-0 z-10 mt-1 max-h-60 overflow-y-auto rounded-lg border border-gray-300 bg-white p-3 shadow-lg",4,"ngIf"],["class","mt-1 text-sm text-red-600",4,"ngIf"],[1,"absolute","top-full","right-0","left-0","z-10","mt-1","max-h-60","overflow-y-auto","rounded-lg","border","border-gray-300","bg-white","p-3","shadow-lg"],[1,"space-y-2"],["class","block text-sm",3,"checked","change",4,"ngFor","ngForOf"],[1,"mt-3","border-t","pt-2"],["type","button","mat-button","",1,"w-full","text-left","text-sm","text-azul-oscuro",3,"click"],["class","mt-2",4,"ngIf"],[1,"block","text-sm",3,"change","checked"],[1,"mt-2"],["formControlName","nuevaEspecialidad","placeholder","Nombre de la especialidad",1,"w-full","rounded","border","border-gray-300","px-3","py-2","text-sm","focus:border-azul-oscuro","focus:outline-none",3,"click"],["class","mt-1 text-xs text-red-600",4,"ngIf"],[1,"mt-1","text-xs","text-red-600"],[1,"mt-1","text-sm","text-red-600"],["for","imagenFondoAdmin",1,"block","text-sm","font-medium","text-gray-700"],["id","imagenFondoAdmin","type","file","accept","image/*",1,"register-input",3,"change"]],template:function(e,n){e&1&&(r(0,"div",0),u("click",function(){return n.cerrarPopup()})("keyup.escape",function(){return n.cerrarPopup()}),r(1,"div",1),u("click",function(m){return m.stopPropagation()})("keyup",function(m){return m.stopPropagation()}),r(2,"h2",2),l(3," Alta "),a(),p(4,Ue,13,0,"div",3)(5,lt,54,21,"form",4),a()()),e&2&&(o(4),d("ngIf",!n.tipoUsuario&&n.registroForm),o(),d("ngIf",n.tipoUsuario&&n.registroForm))},dependencies:[U,T,P,se,re,ee,ae,te,ie,de,ne,oe,be,xe,ge,ve,he,Ee,ye,Se,Ae,_e,ue,Y,X,Ie,we],styles:[".register-input[_ngcontent-%COMP%]{padding:12px 20px;margin:10px 0;border:2px solid #333;border-radius:6px;background-color:#222;color:#fff;font-size:16px;cursor:pointer;transition:all .3s ease}.register-input[_ngcontent-%COMP%]:hover{border-color:#92cc34;background-color:#2c2c2c}.register-input[_ngcontent-%COMP%]:focus{border-color:#19b44d;background-color:#2c2c2c;outline:none}.register-input[_ngcontent-%COMP%]::-webkit-file-upload-button{background-color:#fff;color:#fff;padding:8px 15px;border-radius:4px;border:none;cursor:pointer;font-size:14px;transition:background-color .3s ease}"]})};function st(i,t){if(i&1){let e=E();r(0,"app-altas-admin",9),u("cerrar",function(){g(e);let s=c();return v(s.cerrarPopupAltas())})("altaExitosa",function(){g(e);let s=c();return v(s.onAltaExitosa())}),a()}}function dt(i,t){if(i&1&&b(0,"img",18),i&2){let e=c().$implicit;d("src",e.urlImagenPerfil,F)}}function mt(i,t){if(i&1&&(r(0,"div",12),p(1,dt,1,1,"img",13),r(2,"div",14)(3,"p",15),l(4),a(),r(5,"p",16),l(6),a(),r(7,"p"),l(8),a(),r(9,"p"),l(10),a(),r(11,"p"),l(12," Email verificado: "),r(13,"span",17),l(14),a()()()()),i&2){let e=t.$implicit;o(),d("ngIf",e.urlImagenPerfil),o(3),V(" ",e.nombre," ",e.apellido," "),o(2),w(e.email),o(2),x("DNI: ",e.dni),o(2),x("Edad: ",e.edad),o(3),d("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),o(),x(" ",e.emailVerificado?"Verificado":"Sin Verificar"," ")}}function ct(i,t){if(i&1&&(r(0,"div",10),p(1,mt,15,8,"div",11),a()),i&2){let e=c();o(),d("ngForOf",e.pacientes)}}function pt(i,t){if(i&1&&b(0,"img",18),i&2){let e=c().$implicit;d("src",e.urlImagenPerfil,F)}}function ut(i,t){if(i&1){let e=E();r(0,"div",12),p(1,pt,1,1,"img",13),r(2,"div",14)(3,"p",15),l(4),a(),r(5,"p",16),l(6),a(),r(7,"p"),l(8),a(),r(9,"p"),l(10),a(),r(11,"p"),l(12," Email verificado: "),r(13,"span",17),l(14),a()(),r(15,"p"),l(16," Estado: "),r(17,"span",17),l(18),a()()(),r(19,"button",19),u("click",function(){let s=g(e).$implicit,m=c(2);return v(m.toggleValidadoAdmin(s))}),l(20),a()()}if(i&2){let e=t.$implicit;o(),d("ngIf",e.urlImagenPerfil),o(3),V(" ",e.nombre," ",e.apellido," "),o(2),w(e.email),o(2),x("DNI: ",e.dni),o(2),x("Edad: ",e.edad),o(3),d("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),o(),x(" ",e.emailVerificado?"Verificado":"Sin Verificar"," "),o(3),d("ngClass",e.validadoAdmin?"text-verde-oscuro":"text-red-600"),o(),x(" ",e.validadoAdmin?"Habilitado":"Inhabilitado"," "),o(2),x(" ",e.validadoAdmin?"Deshabilitar":"Habilitar"," ")}}function _t(i,t){if(i&1&&(r(0,"div",10),p(1,ut,21,11,"div",11),a()),i&2){let e=c();o(),d("ngForOf",e.especialistas)}}function ft(i,t){if(i&1&&b(0,"img",18),i&2){let e=c().$implicit;d("src",e.urlImagenPerfil,F)}}function gt(i,t){if(i&1&&(r(0,"div",12),p(1,ft,1,1,"img",13),r(2,"div",14)(3,"p",15),l(4),a(),r(5,"p",16),l(6),a(),r(7,"p"),l(8),a(),r(9,"p"),l(10),a(),r(11,"p"),l(12," Email verificado: "),r(13,"span",17),l(14),a()()()()),i&2){let e=t.$implicit;o(),d("ngIf",e.urlImagenPerfil),o(3),V(" ",e.nombre," ",e.apellido," "),o(2),w(e.email),o(2),x("DNI: ",e.dni),o(2),x("Edad: ",e.edad),o(3),d("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),o(),x(" ",e.emailVerificado?"Verificado":"Sin Verificar"," ")}}function vt(i,t){if(i&1&&(r(0,"div",10),p(1,gt,15,8,"div",11),a()),i&2){let e=c();o(),d("ngForOf",e.administradores)}}var ke=class i{constructor(t,e){this.usuariosService=t;this.loading=e}solapaActiva="pacientes";pacientes=[];especialistas=[];administradores=[];usuarioSeleccionado=null;destroy$=new W;mostrarPopupAltas=!1;ngOnInit(){this.recargarUsuarios(),this.loading.hide()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}recargarUsuarios(){return h(this,null,function*(){let t=yield this.usuariosService.obtenerTodosUsuarios();this.pacientes=t.filter(e=>e.rol==="paciente"),this.especialistas=t.filter(e=>e.rol==="especialista"),this.administradores=t.filter(e=>e.rol==="admin")})}seleccionarUsuario(t){this.usuarioSeleccionado=t}toggleValidadoAdmin(t){return h(this,null,function*(){if(t.rol!=="especialista")return;let e=!t.validadoAdmin;(yield this.usuariosService.actualizarEstadoEspecialista(t.id,e))&&(t.validadoAdmin=e,yield this.recargarUsuarios())})}abrirPopupAltas(){this.mostrarPopupAltas=!0}cerrarPopupAltas(){this.mostrarPopupAltas=!1}onAltaExitosa(){return h(this,null,function*(){yield this.recargarUsuarios(),this.cerrarPopupAltas()})}static \u0275fac=function(e){return new(e||i)(N(Fe),N(O))};static \u0275cmp=k({type:i,selectors:[["app-usuarios"]],decls:18,vars:22,consts:[[1,"h-full","w-full","p-1"],[1,"h-full","w-full","overflow-auto","rounded-2xl","border","border-white","bg-crema","p-6","pb-6","shadow-inner"],[1,"flex","flex-wrap","items-center","justify-between","pb-7"],[1,"flex","flex-wrap","gap-2"],[1,"px-4","py-2","font-semibold","text-gray-600","hover:text-azul-oscuro",3,"click"],[1,"mr-10"],[1,"btn","btn-primary","h-12","rounded-2xl","bg-azul-oscuro","px-6","py-2","text-base","text-white","transition-all","duration-50","hover:bg-azul-claro","hover:text-lg",3,"click"],[3,"cerrar","altaExitosa",4,"ngIf"],["class","grid justify-center gap-x-1 gap-y-3","style","grid-template-columns: repeat(auto-fill, minmax(300px, 1fr))",4,"ngIf"],[3,"cerrar","altaExitosa"],[1,"grid","justify-center","gap-x-1","gap-y-3",2,"grid-template-columns","repeat(auto-fill, minmax(300px, 1fr))"],["class","w-full rounded-lg border border-gray-300 bg-white p-4 shadow-sm",4,"ngFor","ngForOf"],[1,"w-full","rounded-lg","border","border-gray-300","bg-white","p-4","shadow-sm"],["alt","Avatar","class","mb-2 h-14 w-14 rounded-full object-cover","appTrackImage","",3,"src",4,"ngIf"],[1,"text-sm"],[1,"font-semibold","text-azul-oscuro"],[1,"text-gray-600"],[3,"ngClass"],["alt","Avatar","appTrackImage","",1,"mb-2","h-14","w-14","rounded-full","object-cover",3,"src"],[1,"mt-2","w-full","rounded","bg-azul-claro","px-3","py-1","text-sm","text-white","hover:bg-azul-oscuro",3,"click"]],template:function(e,n){e&1&&(r(0,"app-loading-wrapper")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"button",4),u("click",function(){return n.solapaActiva="pacientes"}),l(6," Pacientes "),a(),r(7,"button",4),u("click",function(){return n.solapaActiva="especialistas"}),l(8," Especialistas "),a(),r(9,"button",4),u("click",function(){return n.solapaActiva="administradores"}),l(10," Administradores "),a()(),r(11,"div",5)(12,"button",6),u("click",function(){return n.abrirPopupAltas()}),l(13," Dar Alta Usuario "),a()()(),p(14,st,1,0,"app-altas-admin",7)(15,ct,2,1,"div",8)(16,_t,2,1,"div",8)(17,vt,2,1,"div",8),a()()()),e&2&&(o(5),y("border-b-2",n.solapaActiva==="pacientes")("border-azul-oscuro",n.solapaActiva==="pacientes")("text-azul-oscuro",n.solapaActiva==="pacientes"),o(2),y("border-b-2",n.solapaActiva==="especialistas")("border-azul-oscuro",n.solapaActiva==="especialistas")("text-azul-oscuro",n.solapaActiva==="especialistas"),o(2),y("border-b-2",n.solapaActiva==="administradores")("border-azul-oscuro",n.solapaActiva==="administradores")("text-azul-oscuro",n.solapaActiva==="administradores"),o(5),d("ngIf",n.mostrarPopupAltas),o(),d("ngIf",n.solapaActiva==="pacientes"),o(),d("ngIf",n.solapaActiva==="especialistas"),o(),d("ngIf",n.solapaActiva==="administradores"))},dependencies:[U,Q,T,P,M,ce,pe],encapsulation:2})};export{ke as Usuarios};

import{g as L,l as M}from"./chunk-MTWZV5NU.js";import{Cb as v,Fb as b,Gb as I,Ma as c,T as m,Xa as l,Y as r,Za as d,ab as g,g as s,pb as o,qb as f,ra as p,rb as u,sb as h}from"./chunk-EMRS3JRH.js";var n=class t{imageMap=new Map;loadingCount=0;loading$=new s(!1);get isLoading$(){return this.loading$.asObservable()}registerImage(e){this.imageMap.has(e)||(this.imageMap.set(e,!1),this.loadingCount++,this.emitStatus())}markLoaded(e){this.imageMap.has(e)&&!this.imageMap.get(e)&&(this.imageMap.set(e,!0),this.loadingCount--,this.emitStatus())}emitStatus(){this.loading$.next(this.loadingCount>0)}reset(){this.imageMap.clear(),this.loadingCount=0,this.loading$.next(!1)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})};var y=class t{imageService=r(n);el=r(p);constructor(){this.imageService.registerImage(this.el.nativeElement)}onLoad(){this.imageService.markLoaded(this.el.nativeElement)}onError(){this.imageService.markLoaded(this.el.nativeElement)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=d({type:t,selectors:[["img","appTrackImage",""]],hostBindings:function(i,a){i&1&&v("load",function(){return a.onLoad()})("error",function(){return a.onError()})}})};var T=["*"];function C(t,e){t&1&&(f(0,"div",2),h(1,"div",3),u())}function H(t,e){t&1&&I(0,0,["*ngIf","!loading"])}var k=class t{imageService=r(n);sub;loading=!0;ngOnInit(){this.sub=this.imageService.isLoading$.subscribe(e=>{this.loading=e})}ngOnDestroy(){this.sub?.unsubscribe(),this.imageService.reset()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=l({type:t,selectors:[["app-loading-wrapper"]],ngContentSelectors:T,decls:2,vars:2,consts:[["class","fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",4,"ngIf"],[4,"ngIf"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/30","backdrop-blur-sm"],[1,"h-20","w-20","animate-spin","rounded-full","border-4","border-blue-600","border-t-transparent"]],template:function(i,a){i&1&&(b(),g(0,C,2,0,"div",0)(1,H,1,0,"ng-content",1)),i&2&&(o("ngIf",a.loading),c(),o("ngIf",!a.loading))},dependencies:[M,L],encapsulation:2})};export{y as a,k as b};

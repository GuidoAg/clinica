import{a as X,b as Y,c as Z,f as $,i as ee,j as te,k as ie}from"./chunk-U6JYIE4V.js";import{d as J,f as K,g as U,n as W}from"./chunk-AE2NBSWY.js";import{c as B}from"./chunk-J3FHJHEG.js";import{a as P}from"./chunk-HKXNSF3N.js";import"./chunk-LJ5XHLMQ.js";import"./chunk-ICKPCRNS.js";import{b as q,c as d,e as D,f as G,i as O,k as Q,l as j,r as z,t as H}from"./chunk-MWZLYR54.js";import{b as k}from"./chunk-Y4AIVO52.js";import{d as R,e as A}from"./chunk-MGZ6HB6D.js";import"./chunk-EPDCLEQZ.js";import{e as N,g as x,j as T}from"./chunk-DDJZ7MLA.js";import{Hb as u,Ib as V,Ka as l,Rb as y,Ua as E,Y as p,Za as v,ba as f,ca as c,mb as m,nb as o,ob as n,pb as h,qb as M,sb as _,xb as C,yb as S,zb as L}from"./chunk-GQUYXPDO.js";import{h as I}from"./chunk-FK42CRUA.js";var ne=["emailInput"],re=(i,a)=>({"mat-form-field-valid":i,"mat-form-field-invalid":a});function le(i,a){i&1&&(o(0,"mat-error"),u(1," Campo obligatorio "),n())}function ae(i,a){i&1&&(o(0,"mat-error"),u(1," Email inv\xE1lido "),n())}function me(i,a){i&1&&(o(0,"mat-error"),u(1," Campo obligatorio "),n())}function ue(i,a){i&1&&(o(0,"mat-error"),u(1," M\xEDnimo 7 caracteres "),n())}var oe=class i{fb=p(z);snackBar=p(W);router=p(k);auth=p(B);overlay=p(P);loginForm;hidePassword=!0;emailInputRef;ngOnInit(){this.overlay.show(),this.loginForm=this.fb.group({mail:["",[d.required,d.email]],password:["",[d.required,d.minLength(7)]]}),this.overlay.hide()}ngAfterViewInit(){queueMicrotask(()=>this.emailInputRef?.nativeElement.focus())}login(){return I(this,null,function*(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.overlay.show();let{mail:a,password:s}=this.loginForm.value,e=yield this.auth.login(a,s);if(!e.success){this.snackBar.open(e.errorCode??"Error de login","Cerrar",{duration:4e3,panelClass:["bg-red-600","text-white"]}),this.overlay.hide();return}this.router.navigate(["/home"])})}static \u0275fac=function(s){return new(s||i)};static \u0275cmp=E({type:i,selectors:[["app-login"]],viewQuery:function(s,e){if(s&1&&C(ne,5),s&2){let t;S(t=L())&&(e.emailInputRef=t.first)}},decls:24,vars:16,consts:[["emailInput",""],[1,"bg-gray-200","pt-30","pb-130"],[1,"pb-1","text-center","text-4xl","font-bold","text-azul-oscuro"],[1,"flex","justify-center","py-8"],[1,"flex","w-full","max-w-xl","flex-col","items-center","rounded-xl","bg-crema","p-8","shadow-lg",3,"ngSubmit","formGroup"],["appearance","fill",1,"w-80",3,"ngClass"],["matInput","","type","email","formControlName","mail"],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"flex","justify-center","pt-4"],["mat-raised-button","","color","primary","type","submit",1,"rounded-full","bg-verde-oscuro","px-8","py-2","text-white","shadow-lg",3,"disabled"]],template:function(s,e){if(s&1){let t=M();o(0,"div",1)(1,"h2",2),u(2,"Login"),n(),o(3,"div",3)(4,"form",4),_("ngSubmit",function(){return f(t),c(e.login())}),o(5,"mat-form-field",5)(6,"mat-label"),u(7,"Email"),n(),h(8,"input",6,0),v(10,le,2,0,"mat-error",7)(11,ae,2,0,"mat-error",7),n(),o(12,"mat-form-field",5)(13,"mat-label"),u(14,"Contrase\xF1a"),n(),h(15,"input",8),o(16,"button",9),_("click",function(){return f(t),c(e.hidePassword=!e.hidePassword)}),o(17,"mat-icon"),u(18),n()(),v(19,me,2,0,"mat-error",7)(20,ue,2,0,"mat-error",7),n(),o(21,"div",10)(22,"button",11),u(23," Login "),n()()()()()}if(s&2){let t,g,w,r,F,b;l(4),m("formGroup",e.loginForm),l(),m("ngClass",y(10,re,((t=e.loginForm.get("mail"))==null?null:t.valid)&&(((t=e.loginForm.get("mail"))==null?null:t.dirty)||((t=e.loginForm.get("mail"))==null?null:t.touched)),((t=e.loginForm.get("mail"))==null?null:t.invalid)&&(((t=e.loginForm.get("mail"))==null?null:t.dirty)||((t=e.loginForm.get("mail"))==null?null:t.touched)))),l(5),m("ngIf",(g=e.loginForm.get("mail"))==null?null:g.hasError("required")),l(),m("ngIf",(w=e.loginForm.get("mail"))==null?null:w.hasError("email")),l(),m("ngClass",y(13,re,((r=e.loginForm.get("password"))==null?null:r.valid)&&(((r=e.loginForm.get("password"))==null?null:r.dirty)||((r=e.loginForm.get("password"))==null?null:r.touched)),((r=e.loginForm.get("password"))==null?null:r.invalid)&&(((r=e.loginForm.get("password"))==null?null:r.dirty)||((r=e.loginForm.get("password"))==null?null:r.touched)))),l(3),m("type",e.hidePassword?"password":"text"),l(3),V(e.hidePassword?"visibility_off":"visibility"),l(),m("ngIf",(F=e.loginForm.get("password"))==null?null:F.hasError("required")),l(),m("ngIf",(b=e.loginForm.get("password"))==null?null:b.hasError("minlength")),l(2),m("disabled",e.loginForm.invalid)}},dependencies:[T,N,x,H,O,q,D,G,Q,j,ie,te,$,X,Y,Z,ee,U,K,J,A,R],encapsulation:2})};export{oe as Login};

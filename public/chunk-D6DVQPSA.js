import{a as Ae}from"./chunk-WI625BKO.js";import{a as ve,b as be,c as Ee,d as he}from"./chunk-VECELFGG.js";import{a as le,b as se}from"./chunk-F6R2A7LZ.js";import"./chunk-BO4ZDUNU.js";import{a as ce,b as ue,f as _e,i as fe,j as ge,k as xe}from"./chunk-UTZVYCSF.js";import{f as me,g as de,n as pe}from"./chunk-K57SLITR.js";import{a as k}from"./chunk-LAA3L6D3.js";import{a as y,b as ne}from"./chunk-E5ORBMNA.js";import"./chunk-ICAC2HSA.js";import"./chunk-AQT7K737.js";import"./chunk-GMNSTVT4.js";import{f as J}from"./chunk-VNRMIUI5.js";import"./chunk-QQX64FUM.js";import{b as K,c as p,e as Q,f as X,i as Y,j as ee,l as te,m as ie,t as re,u as ae,v as oe}from"./chunk-M22NWZ4Q.js";import{e as W,f as V,g as U,l as P}from"./chunk-V3F5M33P.js";import{Ab as f,Cb as _,Ja as I,Ka as o,Ob as C,Pa as A,Qb as n,Rb as F,Sb as g,Tb as T,Va as w,_a as c,ab as N,ba as v,ca as b,f as H,nb as m,ob as r,pb as a,qb as E,wb as S}from"./chunk-PO4THZAS.js";import{j as h}from"./chunk-TWZW5B45.js";function Fe(i,t){if(i&1){let e=S();r(0,"div",5)(1,"p",6),n(2,"Seleccionar tipo usuario para alta"),a(),r(3,"div",7)(4,"button",8),f("click",function(){v(e);let s=_();return b(s.seleccionarTipo("paciente"))}),r(5,"span",9),n(6,"Paciente"),a()(),r(7,"button",8),f("click",function(){v(e);let s=_();return b(s.seleccionarTipo("especialista"))}),r(8,"span",9),n(9,"Especialista"),a()(),r(10,"button",8),f("click",function(){v(e);let s=_();return b(s.seleccionarTipo("admin"))}),r(11,"span",9),n(12,"Admin"),a()()()()}}function Te(i,t){i&1&&(r(0,"mat-error"),n(1," Campo obligatorio "),a())}function Ve(i,t){i&1&&(r(0,"mat-error"),n(1," M\xEDnimo 2 caracteres "),a())}function Ue(i,t){i&1&&(r(0,"mat-error"),n(1," Solo letras "),a())}function Pe(i,t){i&1&&(r(0,"mat-error"),n(1," Campo obligatorio "),a())}function ke(i,t){i&1&&(r(0,"mat-error"),n(1," M\xEDnimo 2 caracteres "),a())}function Oe(i,t){i&1&&(r(0,"mat-error"),n(1," Solo letras "),a())}function Me(i,t){i&1&&(r(0,"mat-error"),n(1," Campo obligatorio "),a())}function Ne(i,t){i&1&&(r(0,"mat-error"),n(1," M\xEDnimo 18 "),a())}function Re(i,t){i&1&&(r(0,"mat-error"),n(1," M\xE1ximo 99 "),a())}function De(i,t){i&1&&(r(0,"mat-error"),n(1," Campo obligatorio "),a())}function ze(i,t){i&1&&(r(0,"mat-error"),n(1," Debe contener 8 d\xEDgitos "),a())}function qe(i,t){if(i&1&&(r(0,"mat-option",30),n(1),a()),i&2){let e=t.$implicit;m("value",e),o(),g(" ",e," ")}}function Le(i,t){i&1&&(r(0,"mat-error"),n(1," Campo obligatorio "),a())}function $e(i,t){if(i&1&&(r(0,"mat-form-field",11)(1,"mat-label"),n(2,"Obra Social"),a(),r(3,"mat-select",28),c(4,qe,2,2,"mat-option",29),a(),c(5,Le,2,0,"mat-error",13),a()),i&2){let e,l=_(2);o(4),m("ngForOf",l.obraSocialOptions),o(),m("ngIf",(e=l.registroForm.get("obraSocial"))==null?null:e.hasError("required"))}}function je(i,t){if(i&1&&(r(0,"mat-option",30),n(1),a()),i&2){let e=t.$implicit;m("value",e),o(),g(" ",e.nombre," ")}}function Be(i,t){i&1&&(r(0,"mat-error"),n(1," Campo obligatorio "),a())}function Ge(i,t){if(i&1&&(r(0,"mat-form-field",11)(1,"mat-label"),n(2,"Especialidad"),a(),r(3,"mat-select",31),c(4,je,2,2,"mat-option",29),a(),c(5,Be,2,0,"mat-error",13),a()),i&2){let e,l=_(2);o(4),m("ngForOf",l.especialidadOptions),o(),m("ngIf",(e=l.registroForm.get("especialidad"))==null?null:e.hasError("required"))}}function Ze(i,t){i&1&&(r(0,"mat-error"),n(1," Campo obligatorio "),a())}function He(i,t){i&1&&(r(0,"mat-error"),n(1," M\xEDnimo 2 caracteres "),a())}function We(i,t){i&1&&(r(0,"mat-error"),n(1," Solo letras "),a())}function Je(i,t){if(i&1&&(r(0,"mat-form-field",11)(1,"mat-label"),n(2,"Otra Especialidad"),a(),E(3,"input",32),c(4,Ze,2,0,"mat-error",13)(5,He,2,0,"mat-error",13)(6,We,2,0,"mat-error",13),a()),i&2){let e,l,s,d,x=_(2);o(3),m("disabled",!((e=x.registroForm.get("otraEspecialidad"))!=null&&e.enabled)),o(),m("ngIf",(l=x.registroForm.get("otraEspecialidad"))==null?null:l.hasError("required")),o(),m("ngIf",(s=x.registroForm.get("otraEspecialidad"))==null?null:s.hasError("minlength")),o(),m("ngIf",(d=x.registroForm.get("otraEspecialidad"))==null?null:d.hasError("pattern"))}}function Ke(i,t){i&1&&(r(0,"mat-error"),n(1," Campo obligatorio "),a())}function Qe(i,t){i&1&&(r(0,"mat-error"),n(1," Email inv\xE1lido "),a())}function Xe(i,t){i&1&&(r(0,"mat-error"),n(1," Campo obligatorio "),a())}function Ye(i,t){i&1&&(r(0,"mat-error"),n(1," M\xEDnimo 7 caracteres "),a())}function et(i,t){i&1&&(r(0,"mat-error"),n(1," Campo obligatorio "),a())}function tt(i,t){if(i&1){let e=S();r(0,"div",20)(1,"label",21),n(2,"Imagen de fondo"),a(),r(3,"input",22),f("change",function(s){v(e);let d=_(2);return b(d.onFileSelected(s,"fondo"))}),a()()}}function it(i,t){if(i&1){let e=S();r(0,"form",10),f("ngSubmit",function(){v(e);let s=_();return b(s.registrar())}),r(1,"mat-form-field",11)(2,"mat-label"),n(3,"Nombre"),a(),E(4,"input",12),c(5,Te,2,0,"mat-error",13)(6,Ve,2,0,"mat-error",13)(7,Ue,2,0,"mat-error",13),a(),r(8,"mat-form-field",11)(9,"mat-label"),n(10,"Apellido"),a(),E(11,"input",14),c(12,Pe,2,0,"mat-error",13)(13,ke,2,0,"mat-error",13)(14,Oe,2,0,"mat-error",13),a(),r(15,"mat-form-field",11)(16,"mat-label"),n(17,"Edad"),a(),E(18,"input",15),c(19,Me,2,0,"mat-error",13)(20,Ne,2,0,"mat-error",13)(21,Re,2,0,"mat-error",13),a(),r(22,"mat-form-field",11)(23,"mat-label"),n(24,"DNI"),a(),E(25,"input",16),c(26,De,2,0,"mat-error",13)(27,ze,2,0,"mat-error",13),a(),c(28,$e,6,2,"mat-form-field",17)(29,Ge,6,2,"mat-form-field",17)(30,Je,7,4,"mat-form-field",17),r(31,"mat-form-field",11)(32,"mat-label"),n(33,"Email"),a(),E(34,"input",18),c(35,Ke,2,0,"mat-error",13)(36,Qe,2,0,"mat-error",13),a(),r(37,"mat-form-field",11)(38,"mat-label"),n(39,"Contrase\xF1a"),a(),E(40,"input",19),c(41,Xe,2,0,"mat-error",13)(42,Ye,2,0,"mat-error",13),a(),r(43,"div",20)(44,"label",21),n(45,"Imagen de perfil"),a(),r(46,"input",22),f("change",function(s){v(e);let d=_();return b(d.onFileSelected(s,"perfil"))}),a(),c(47,et,2,0,"mat-error",13),a(),c(48,tt,4,0,"div",23),r(49,"div",24)(50,"button",25),n(51," Registrar "),a()(),r(52,"div",26)(53,"button",27),f("click",function(){v(e);let s=_();return b(s.tipoUsuario=null)}),n(54," Cambiar tipo de usuario "),a()()()}if(i&2){let e,l,s,d,x,M,R,D,z,q,L,$,j,B,G,Z,u=_();m("formGroup",u.registroForm),o(5),m("ngIf",(e=u.registroForm.get("nombre"))==null?null:e.hasError("required")),o(),m("ngIf",(l=u.registroForm.get("nombre"))==null?null:l.hasError("minlength")),o(),m("ngIf",(s=u.registroForm.get("nombre"))==null?null:s.hasError("pattern")),o(5),m("ngIf",(d=u.registroForm.get("apellido"))==null?null:d.hasError("required")),o(),m("ngIf",(x=u.registroForm.get("apellido"))==null?null:x.hasError("minlength")),o(),m("ngIf",(M=u.registroForm.get("apellido"))==null?null:M.hasError("pattern")),o(5),m("ngIf",(R=u.registroForm.get("edad"))==null?null:R.hasError("required")),o(),m("ngIf",(D=u.registroForm.get("edad"))==null?null:D.hasError("min")),o(),m("ngIf",(z=u.registroForm.get("edad"))==null?null:z.hasError("max")),o(5),m("ngIf",(q=u.registroForm.get("dni"))==null?null:q.hasError("required")),o(),m("ngIf",(L=u.registroForm.get("dni"))==null?null:L.hasError("pattern")),o(),m("ngIf",u.tipoUsuario==="paciente"),o(),m("ngIf",u.tipoUsuario==="especialista"),o(),m("ngIf",u.tipoUsuario==="especialista"),o(5),m("ngIf",($=u.registroForm.get("mail"))==null?null:$.hasError("required")),o(),m("ngIf",(j=u.registroForm.get("mail"))==null?null:j.hasError("email")),o(5),m("ngIf",(B=u.registroForm.get("password"))==null?null:B.hasError("required")),o(),m("ngIf",(G=u.registroForm.get("password"))==null?null:G.hasError("minlength")),o(5),m("ngIf",(Z=u.registroForm.get("imagenPerfil"))==null?null:Z.hasError("required")),o(),m("ngIf",u.tipoUsuario==="paciente"),o(2),m("disabled",u.registroForm.invalid)}}var O=class i{constructor(t,e,l,s){this.fb=t;this.auth=e;this.snackBar=l;this.loading=s}perfilId;cerrar=new N;altaExitosa=new N;registroForm;tipoUsuario=null;obraSocialOptions=he;especialidadOptions=[];subEspecialidad;ngOnInit(){this.initForm()}ngOnDestroy(){this.subEspecialidad?.unsubscribe()}cerrarPopup(){this.cerrar.emit()}initForm(){return h(this,null,function*(){try{this.loading.show(),this.especialidadOptions=yield this.auth.obtenerEspecialidades(),this.especialidadOptions.push({id:-1,nombre:"Otra"}),this.registroForm=this.fb.group({nombre:["",[p.required,p.minLength(2),p.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],apellido:["",[p.required,p.minLength(2),p.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],edad:[null,[p.required,p.min(18),p.max(99)]],dni:["",[p.required,p.pattern(/^\d{8}$/)]],obraSocial:[""],mail:["",[p.required,p.email]],password:["",[p.required,p.minLength(7)]],especialidad:[""],otraEspecialidad:[{value:"",disabled:!0},[p.minLength(2),p.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],imagenPerfil:[null,p.required],imagenFondo:[""]}),this.subEspecialidad=this.registroForm.get("especialidad").valueChanges.subscribe(t=>{let e=this.registroForm.get("otraEspecialidad");t?.id===-1?(e.enable(),e.setValidators([p.required,p.minLength(2),p.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)])):(e.disable(),e.clearValidators()),e.updateValueAndValidity()})}catch{}finally{this.loading.hide()}})}seleccionarTipo(t){if(this.tipoUsuario=t,!this.registroForm)return;let e=this.registroForm.get("obraSocial"),l=this.registroForm.get("especialidad"),s=this.registroForm.get("otraEspecialidad");t==="paciente"?(e?.setValidators([p.required]),l?.clearValidators(),s?.clearValidators(),s?.disable()):t==="especialista"?(e?.clearValidators(),l?.setValidators([p.required]),l?.value?.id===-1?(s?.enable(),s?.setValidators([p.required,p.minLength(2),p.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)])):(s?.disable(),s?.clearValidators())):t==="admin"&&(this.registroForm.get("obraSocial")?.setValue(""),this.registroForm.get("especialidad")?.setValue(""),this.registroForm.get("otraEspecialidad")?.setValue(""),this.registroForm.get("imagenFondo")?.setValue(""),e?.clearValidators(),l?.clearValidators(),s?.clearValidators(),s?.disable()),e?.updateValueAndValidity(),l?.updateValueAndValidity(),s?.updateValueAndValidity()}onFileSelected(t,e){let l=e==="perfil"?"imagenPerfil":"imagenFondo",s=t.target,d=this.registroForm.get(l);if(!s.files?.length){d.setValue(null),d.setErrors({required:!0});return}let x=s.files[0];if(!["image/jpeg","image/png","image/jpg"].includes(x.type)){d.setErrors({invalidType:!0});return}d.setValue(x),d.setErrors(null)}registrar(){return h(this,null,function*(){if(!(this.registroForm.invalid||!this.tipoUsuario)){this.loading.show();try{this.tipoUsuario==="paciente"?yield this.handleRegistroPaciente():this.tipoUsuario==="especialista"?yield this.handleRegistroEspecialista():this.tipoUsuario==="admin"&&(yield this.handleRegistroAdmin())}finally{this.loading.hide()}}})}handleRegistroAdmin(){return h(this,null,function*(){try{let t=this.registroForm.value,e=yield y(t.imagenPerfil),l={nombre:t.nombre,apellido:t.apellido,edad:t.edad,dni:t.dni,mail:t.mail,contrasena:t.password,imagenPerfil:e},s=yield this.auth.registerAdmin(l),d=s.errorCode?.toLowerCase();console.log(s.errorCode),d?.includes("error desconocido")?this.mostrarResultado(s.success,s.message):this.mostrarResultado(s.success,s.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar las im\xE1genes.")}})}handleRegistroPaciente(){return h(this,null,function*(){try{let t=this.registroForm.value,e=yield y(t.imagenPerfil),l=yield y(t.imagenFondo),s={nombre:t.nombre,apellido:t.apellido,edad:t.edad,dni:t.dni,obraSocial:t.obraSocial,mail:t.mail,contrasena:t.password,imagenPerfil:e,imagenFondo:l},d=yield this.auth.registerPaciente(s),x=d.errorCode?.toLowerCase();console.log(d.errorCode),x?.includes("error desconocido")?this.mostrarResultado(d.success,d.message):this.mostrarResultado(d.success,d.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar las im\xE1genes.")}})}handleRegistroEspecialista(){return h(this,null,function*(){try{let t=this.registroForm.value,e=yield y(t.imagenPerfil),l=t.especialidad.id===-1?t.otraEspecialidad:t.especialidad.nombre,s={nombre:t.nombre,apellido:t.apellido,edad:t.edad,dni:t.dni,mail:t.mail,contrasena:t.password,especialidad:l,imagenPerfil:e},d=yield this.auth.registerEspecialista(s);d.errorCode?.toLowerCase()?.includes("error desconocido")?this.mostrarResultado(d.success,d.message):this.mostrarResultado(d.success,d.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar la imagen.")}})}mostrarResultado(t,e){if(!t){this.snackBar.open(e||"Ocurri\xF3 un error.","Cerrar",{duration:4e3,panelClass:["bg-red-600","text-white"]});return}this.tipoUsuario=null,this.altaExitosa.emit()}static \u0275fac=function(e){return new(e||i)(A(re),A(ne),A(pe),A(k))};static \u0275cmp=w({type:i,selectors:[["app-altas-admin"]],inputs:{perfilId:"perfilId"},outputs:{cerrar:"cerrar",altaExitosa:"altaExitosa"},decls:6,vars:2,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50","backdrop-blur-sm",3,"click"],[1,"w-full","max-w-3xl","rounded-2xl","bg-white","px-6","py-1","shadow-xl",3,"click"],[1,"mt-2","mb-4","text-center","text-4xl","font-bold","text-azul-oscuro"],["class","space-y-6 p-10 text-center",4,"ngIf"],["class","mt-6 grid grid-cols-1 gap-6 md:grid-cols-2",3,"formGroup","ngSubmit",4,"ngIf"],[1,"space-y-6","p-10","text-center"],[1,"text-xl","text-gray-700"],[1,"flex","flex-col","justify-center","gap-6","sm:flex-row"],[1,"rounded-xl","bg-white","px-8","py-4","shadow","transition-transform","hover:scale-105",3,"click"],[1,"text-xl","font-semibold","text-azul-oscuro"],[1,"mt-6","grid","grid-cols-1","gap-6","md:grid-cols-2",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","nombre"],[4,"ngIf"],["matInput","","formControlName","apellido"],["matInput","","type","number","formControlName","edad"],["matInput","","formControlName","dni"],["appearance","fill",4,"ngIf"],["matInput","","type","email","formControlName","mail"],["matInput","","type","password","formControlName","password"],[1,"md:col-span-2"],[1,"block","text-sm","font-medium","text-gray-700"],["type","file","accept","image/*",1,"register-input",3,"change"],["class","md:col-span-2",4,"ngIf"],[1,"flex","justify-center","pt-2","md:col-span-2"],["mat-raised-button","","color","primary","type","submit",1,"rounded-full","bg-verde-oscuro","px-6","py-2","text-white","shadow",3,"disabled"],[1,"text-center","md:col-span-2"],["mat-button","","type","button",1,"text-sm","text-gray-600","underline",3,"click"],["formControlName","obraSocial"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","especialidad"],["matInput","","formControlName","otraEspecialidad",3,"disabled"]],template:function(e,l){e&1&&(r(0,"div",0),f("click",function(){return l.cerrarPopup()}),r(1,"div",1),f("click",function(d){return d.stopPropagation()}),r(2,"h2",2),n(3," Alta "),a(),c(4,Fe,13,0,"div",3)(5,it,55,22,"form",4),a()()),e&2&&(o(4),m("ngIf",!l.tipoUsuario&&l.registroForm),o(),m("ngIf",l.tipoUsuario&&l.registroForm))},dependencies:[P,V,U,ae,Y,K,ee,Q,X,oe,te,ie,fe,_e,ce,ue,xe,ge,Ee,be,ve,de,me,J],styles:[".register-input[_ngcontent-%COMP%]{padding:12px 20px;margin:10px 0;border:2px solid #333;border-radius:6px;background-color:#222;color:#fff;font-size:16px;cursor:pointer;transition:all .3s ease}.register-input[_ngcontent-%COMP%]:hover{border-color:#92cc34;background-color:#2c2c2c}.register-input[_ngcontent-%COMP%]:focus{border-color:#19b44d;background-color:#2c2c2c;outline:none}.register-input[_ngcontent-%COMP%]::-webkit-file-upload-button{background-color:#fff;color:#fff;padding:8px 15px;border-radius:4px;border:none;cursor:pointer;font-size:14px;transition:background-color .3s ease}"]})};function rt(i,t){if(i&1){let e=S();r(0,"app-altas-admin",9),f("cerrar",function(){v(e);let s=_();return b(s.cerrarPopupAltas())})("altaExitosa",function(){v(e);let s=_();return b(s.onAltaExitosa())}),a()}}function at(i,t){if(i&1&&E(0,"img",18),i&2){let e=_().$implicit;m("src",e.urlImagenPerfil,I)}}function ot(i,t){if(i&1&&(r(0,"div",12),c(1,at,1,1,"img",13),r(2,"div",14)(3,"p",15),n(4),a(),r(5,"p",16),n(6),a(),r(7,"p"),n(8),a(),r(9,"p"),n(10),a(),r(11,"p"),n(12," Email verificado: "),r(13,"span",17),n(14),a()()()()),i&2){let e=t.$implicit;o(),m("ngIf",e.urlImagenPerfil),o(3),T(" ",e.nombre," ",e.apellido," "),o(2),F(e.email),o(2),g("DNI: ",e.dni),o(2),g("Edad: ",e.edad),o(3),m("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),o(),g(" ",e.emailVerificado?"Verificado":"Sin Verificar"," ")}}function nt(i,t){if(i&1&&(r(0,"div",10),c(1,ot,15,8,"div",11),a()),i&2){let e=_();o(),m("ngForOf",e.pacientes)}}function lt(i,t){if(i&1&&E(0,"img",18),i&2){let e=_().$implicit;m("src",e.urlImagenPerfil,I)}}function st(i,t){if(i&1){let e=S();r(0,"div",12),c(1,lt,1,1,"img",13),r(2,"div",14)(3,"p",15),n(4),a(),r(5,"p",16),n(6),a(),r(7,"p"),n(8),a(),r(9,"p"),n(10),a(),r(11,"p"),n(12," Email verificado: "),r(13,"span",17),n(14),a()(),r(15,"p"),n(16," Estado: "),r(17,"span",17),n(18),a()()(),r(19,"button",19),f("click",function(){let s=v(e).$implicit,d=_(2);return b(d.toggleValidadoAdmin(s))}),n(20),a()()}if(i&2){let e=t.$implicit;o(),m("ngIf",e.urlImagenPerfil),o(3),T(" ",e.nombre," ",e.apellido," "),o(2),F(e.email),o(2),g("DNI: ",e.dni),o(2),g("Edad: ",e.edad),o(3),m("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),o(),g(" ",e.emailVerificado?"Verificado":"Sin Verificar"," "),o(3),m("ngClass",e.validadoAdmin?"text-verde-oscuro":"text-red-600"),o(),g(" ",e.validadoAdmin?"Habilitado":"Inhabilitado"," "),o(2),g(" ",e.validadoAdmin?"Deshabilitar":"Habilitar"," ")}}function mt(i,t){if(i&1&&(r(0,"div",10),c(1,st,21,11,"div",11),a()),i&2){let e=_();o(),m("ngForOf",e.especialistas)}}function dt(i,t){if(i&1&&E(0,"img",18),i&2){let e=_().$implicit;m("src",e.urlImagenPerfil,I)}}function pt(i,t){if(i&1&&(r(0,"div",12),c(1,dt,1,1,"img",13),r(2,"div",14)(3,"p",15),n(4),a(),r(5,"p",16),n(6),a(),r(7,"p"),n(8),a(),r(9,"p"),n(10),a(),r(11,"p"),n(12," Email verificado: "),r(13,"span",17),n(14),a()()()()),i&2){let e=t.$implicit;o(),m("ngIf",e.urlImagenPerfil),o(3),T(" ",e.nombre," ",e.apellido," "),o(2),F(e.email),o(2),g("DNI: ",e.dni),o(2),g("Edad: ",e.edad),o(3),m("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),o(),g(" ",e.emailVerificado?"Verificado":"Sin Verificar"," ")}}function ct(i,t){if(i&1&&(r(0,"div",10),c(1,pt,15,8,"div",11),a()),i&2){let e=_();o(),m("ngForOf",e.administradores)}}var Se=class i{constructor(t,e){this.usuariosService=t;this.loading=e}solapaActiva="pacientes";pacientes=[];especialistas=[];administradores=[];usuarioSeleccionado=null;destroy$=new H;mostrarPopupAltas=!1;ngOnInit(){this.recargarUsuarios(),this.loading.hide()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}recargarUsuarios(){return h(this,null,function*(){let t=yield this.usuariosService.obtenerTodosUsuarios();this.pacientes=t.filter(e=>e.rol==="paciente"),this.especialistas=t.filter(e=>e.rol==="especialista"),this.administradores=t.filter(e=>e.rol==="admin")})}seleccionarUsuario(t){this.usuarioSeleccionado=t}toggleValidadoAdmin(t){return h(this,null,function*(){if(t.rol!=="especialista")return;let e=!t.validadoAdmin;(yield this.usuariosService.actualizarEstadoEspecialista(t.id,e))&&(t.validadoAdmin=e,yield this.recargarUsuarios())})}abrirPopupAltas(){this.mostrarPopupAltas=!0}cerrarPopupAltas(){this.mostrarPopupAltas=!1}onAltaExitosa(){return h(this,null,function*(){yield this.recargarUsuarios(),this.cerrarPopupAltas()})}static \u0275fac=function(e){return new(e||i)(A(Ae),A(k))};static \u0275cmp=w({type:i,selectors:[["app-usuarios"]],decls:18,vars:22,consts:[[1,"h-full","w-full","p-1"],[1,"h-full","w-full","overflow-auto","rounded-2xl","border","border-white","bg-crema","p-6","pb-6","shadow-inner"],[1,"flex","flex-wrap","items-center","justify-between","pb-7"],[1,"flex","flex-wrap","gap-2"],[1,"px-4","py-2","font-semibold","text-gray-600","hover:text-azul-oscuro",3,"click"],[1,"mr-10"],[1,"btn","btn-primary","h-12","rounded-2xl","bg-azul-oscuro","px-6","py-2","text-base","text-white","transition-all","duration-50","hover:bg-azul-claro","hover:text-lg",3,"click"],[3,"cerrar","altaExitosa",4,"ngIf"],["class","grid justify-center gap-x-1 gap-y-3","style","grid-template-columns: repeat(auto-fill, minmax(300px, 1fr))",4,"ngIf"],[3,"cerrar","altaExitosa"],[1,"grid","justify-center","gap-x-1","gap-y-3",2,"grid-template-columns","repeat(auto-fill, minmax(300px, 1fr))"],["class","w-full rounded-lg border border-gray-300 bg-white p-4 shadow-sm",4,"ngFor","ngForOf"],[1,"w-full","rounded-lg","border","border-gray-300","bg-white","p-4","shadow-sm"],["alt","Avatar","class","mb-2 h-14 w-14 rounded-full object-cover","TrackImage","",3,"src",4,"ngIf"],[1,"text-sm"],[1,"font-semibold","text-azul-oscuro"],[1,"text-gray-600"],[3,"ngClass"],["alt","Avatar","TrackImage","",1,"mb-2","h-14","w-14","rounded-full","object-cover",3,"src"],[1,"mt-2","w-full","rounded","bg-azul-claro","px-3","py-1","text-sm","text-white","hover:bg-azul-oscuro",3,"click"]],template:function(e,l){e&1&&(r(0,"app-loading-wrapper")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"button",4),f("click",function(){return l.solapaActiva="pacientes"}),n(6," Pacientes "),a(),r(7,"button",4),f("click",function(){return l.solapaActiva="especialistas"}),n(8," Especialistas "),a(),r(9,"button",4),f("click",function(){return l.solapaActiva="administradores"}),n(10," Administradores "),a()(),r(11,"div",5)(12,"button",6),f("click",function(){return l.abrirPopupAltas()}),n(13," Dar Alta Usuario "),a()()(),c(14,rt,1,0,"app-altas-admin",7)(15,nt,2,1,"div",8)(16,mt,2,1,"div",8)(17,ct,2,1,"div",8),a()()()),e&2&&(o(5),C("border-b-2",l.solapaActiva==="pacientes")("border-azul-oscuro",l.solapaActiva==="pacientes")("text-azul-oscuro",l.solapaActiva==="pacientes"),o(2),C("border-b-2",l.solapaActiva==="especialistas")("border-azul-oscuro",l.solapaActiva==="especialistas")("text-azul-oscuro",l.solapaActiva==="especialistas"),o(2),C("border-b-2",l.solapaActiva==="administradores")("border-azul-oscuro",l.solapaActiva==="administradores")("text-azul-oscuro",l.solapaActiva==="administradores"),o(5),m("ngIf",l.mostrarPopupAltas),o(),m("ngIf",l.solapaActiva==="pacientes"),o(),m("ngIf",l.solapaActiva==="especialistas"),o(),m("ngIf",l.solapaActiva==="administradores"))},dependencies:[P,W,V,U,O,le,se],encapsulation:2})};export{Se as Usuarios};

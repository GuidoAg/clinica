import{a as re,b as ae,c as le,f as se,i as me,j as ue,k as de}from"./chunk-PMMIFY6J.js";import{d as ie,f as te,g as oe,n as ne}from"./chunk-2CRE5YUA.js";import{a as ee}from"./chunk-YOQAPNJW.js";import{b as Z}from"./chunk-5ZTSR4NX.js";import"./chunk-BI2JOZY7.js";import"./chunk-X5YLR3NI.js";import"./chunk-JNY4XHIA.js";import{b as j}from"./chunk-RZWFKRPX.js";import{e as q,f as z}from"./chunk-MWG2O76V.js";import"./chunk-YCGHKXNR.js";import{c as Q,e as h,g as $,h as H,k as J,n as K,o as W,v as X,x as Y}from"./chunk-5MFN5EJ7.js";import{e as G,j as O}from"./chunk-YGECKIT7.js";import{Bb as w,Db as v,Hb as A,Ib as P,Jb as T,Ka as M,Ma as a,Ob as U,Pb as N,Rb as m,Sb as B,Tb as R,Xa as S,Y as p,Yb as D,ac as C,ba as f,ca as _,lb as c,mb as g,nb as I,ob as V,pb as k,qb as d,rb as r,sb as l,tb as b,xb as y}from"./chunk-ZQYZ5UVW.js";import{i as E}from"./chunk-ODN5LVDJ.js";var ge=["emailInput"],pe=(t,o)=>({"mat-form-field-valid":t,"mat-form-field-invalid":o});function fe(t,o){if(t&1){let n=y();r(0,"button",14),w("click",function(){let i=f(n).$implicit,u=v(2);return _(u.autocompletar(i))}),b(1,"img",15),r(2,"span",16),m(3),l()()}if(t&2){let n=o.$implicit,e=o.$index,i=v(2);U("animation-delay",e*100+"ms"),N("animate-fade-slide-up-scale",i.autoLogVisible),a(),d("alt",D(n.nombre))("src",n.imagenUrl,M),a(2),R(" ",n.nombre," ")}}function _e(t,o){if(t&1&&(r(0,"div",3),V(1,fe,4,8,"button",13,I),l()),t&2){let n=v();a(),k(n.usuariosAutoLog)}}function we(t,o){t&1&&(r(0,"mat-error"),m(1," Campo obligatorio "),l())}function he(t,o){t&1&&(r(0,"mat-error"),m(1," Email inv\xE1lido "),l())}function be(t,o){t&1&&(r(0,"mat-error"),m(1," Campo obligatorio "),l())}function ve(t,o){t&1&&(r(0,"mat-error"),m(1," M\xEDnimo 7 caracteres "),l())}var ce=class t{fb=p(X);snackBar=p(ne);router=p(j);auth=p(Z);overlay=p(ee);loginForm;hidePassword=!0;autoLogVisible=!1;usuariosAutoLog=[{nombre:"Admin",imagenUrl:"assets/imagenes/Login/admin.png",mail:"insua.guido@gmail.com",password:"1234567"},{nombre:"Pepe",imagenUrl:"assets/imagenes/Login/especialista1.png",mail:"espe.deduct310@passmail.net",password:"1234567"},{nombre:"Especialista",imagenUrl:"assets/imagenes/Login/especialista2.png",mail:"paciente@demo.com",password:"paciente123"},{nombre:"Guido",imagenUrl:"assets/imagenes/Login/paciente1.png",mail:"pepitoluis.culture104@passmail.net",password:"1234567"},{nombre:"Paciente",imagenUrl:"assets/imagenes/Login/paciente2.png",mail:"user2@demo.com",password:"user123"},{nombre:"Paciente",imagenUrl:"assets/imagenes/Login/paciente3.png",mail:"user3@demo.com",password:"user123"}];emailInputRef;ngOnInit(){this.overlay.show(),this.loginForm=this.fb.group({mail:["",[h.required,h.email]],password:["",[h.required,h.minLength(7)]]}),this.overlay.hide()}ngAfterViewInit(){queueMicrotask(()=>this.emailInputRef?.nativeElement.focus())}login(){return E(this,null,function*(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.overlay.show();let{mail:o,password:n}=this.loginForm.value,e=yield this.auth.login(o,n);if(!e.success){this.snackBar.open(e.errorCode??"Error de login","Cerrar",{duration:4e3,panelClass:["bg-red-600","text-white"]}),this.overlay.hide();return}let i=yield this.auth.getCurrentUser();i&&(yield this.auth.registrarIngreso(i.id)),this.router.navigate(["/home"])})}toggleAutoLog(){this.autoLogVisible=!this.autoLogVisible}autocompletar(o){this.loginForm.patchValue({mail:o.mail,password:o.password})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=S({type:t,selectors:[["app-login"]],viewQuery:function(n,e){if(n&1&&A(ge,5),n&2){let i;P(i=T())&&(e.emailInputRef=i.first)}},decls:27,vars:17,consts:[["emailInput",""],[1,"bg-gray-200","pt-30","pb-130"],[1,"pb-1","text-center","text-4xl","font-bold","text-azul-oscuro"],[1,"absolute","ml-5","flex","w-32","flex-col","items-start","gap-4"],[1,"flex","justify-center","py-8"],[1,"flex","w-full","max-w-xl","flex-col","items-center","rounded-xl","bg-crema","p-8","shadow-lg",3,"ngSubmit","formGroup"],["appearance","fill",1,"w-80",3,"ngClass"],["matInput","","type","email","formControlName","mail"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"flex","justify-center","gap-4","pt-4"],["mat-raised-button","","color","primary","type","submit",1,"rounded-full","bg-verde-oscuro","px-8","py-2","text-white","shadow-lg",3,"disabled"],["mat-raised-button","","color","primary","type","button",1,"rounded-full","bg-verde-oscuro","px-8","py-2","text-white","shadow-lg",3,"click"],[1,"flex","h-23","w-23","flex-col","items-center","justify-center","rounded-lg","bg-crema","align-middle","text-azul-oscuro","shadow-md","transition-transform","hover:scale-110",2,"opacity","0",3,"animationDelay","animate-fade-slide-up-scale"],[1,"flex","h-23","w-23","flex-col","items-center","justify-center","rounded-lg","bg-crema","align-middle","text-azul-oscuro","shadow-md","transition-transform","hover:scale-110",2,"opacity","0",3,"click"],[1,"mb-1","justify-center","align-middle",3,"src","alt"],[1,"text-xs","font-bold","capitalize"]],template:function(n,e){if(n&1){let i=y();r(0,"div",1)(1,"h2",2),m(2,"Login"),l(),c(3,_e,3,0,"div",3),r(4,"div",4)(5,"form",5),w("ngSubmit",function(){return f(i),_(e.login())}),r(6,"mat-form-field",6)(7,"mat-label"),m(8,"Email"),l(),b(9,"input",7,0),c(11,we,2,0,"mat-error"),c(12,he,2,0,"mat-error"),l(),r(13,"mat-form-field",6)(14,"mat-label"),m(15,"Contrase\xF1a"),l(),b(16,"input",8),r(17,"button",9),w("click",function(){return f(i),_(e.hidePassword=!e.hidePassword)}),r(18,"mat-icon"),m(19),l()(),c(20,be,2,0,"mat-error"),c(21,ve,2,0,"mat-error"),l(),r(22,"div",10)(23,"button",11),m(24," Login "),l(),r(25,"button",12),w("click",function(){return f(i),_(e.toggleAutoLog())}),m(26," Auto Log "),l()()()()()}if(n&2){let i,u,F,s,x,L;a(3),g(e.autoLogVisible?3:-1),a(2),d("formGroup",e.loginForm),a(),d("ngClass",C(11,pe,((i=e.loginForm.get("mail"))==null?null:i.valid)&&(((i=e.loginForm.get("mail"))==null?null:i.dirty)||((i=e.loginForm.get("mail"))==null?null:i.touched)),((i=e.loginForm.get("mail"))==null?null:i.invalid)&&(((i=e.loginForm.get("mail"))==null?null:i.dirty)||((i=e.loginForm.get("mail"))==null?null:i.touched)))),a(5),g((u=e.loginForm.get("mail"))!=null&&u.hasError("required")?11:-1),a(),g((F=e.loginForm.get("mail"))!=null&&F.hasError("email")?12:-1),a(),d("ngClass",C(14,pe,((s=e.loginForm.get("password"))==null?null:s.valid)&&(((s=e.loginForm.get("password"))==null?null:s.dirty)||((s=e.loginForm.get("password"))==null?null:s.touched)),((s=e.loginForm.get("password"))==null?null:s.invalid)&&(((s=e.loginForm.get("password"))==null?null:s.dirty)||((s=e.loginForm.get("password"))==null?null:s.touched)))),a(3),d("type",e.hidePassword?"password":"text"),a(3),B(e.hidePassword?"visibility_off":"visibility"),a(),g((x=e.loginForm.get("password"))!=null&&x.hasError("required")?20:-1),a(),g((L=e.loginForm.get("password"))!=null&&L.hasError("minlength")?21:-1),a(2),d("disabled",e.loginForm.invalid)}},dependencies:[O,G,Y,J,Q,$,H,K,W,de,ue,se,re,ae,le,me,oe,te,ie,z,q],styles:["@keyframes _ngcontent-%COMP%_fade-slide-up-scale{0%{opacity:0;transform:translate(-30px,20px) scale(.9)}60%{opacity:1;transform:translate(10px,-4px) scale(1.05)}to{opacity:1;transform:translate(0) scale(1)}}.animate-fade-slide-up-scale[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-slide-up-scale .5s cubic-bezier(.22,1,.36,1) forwards}"]})};export{ce as Login};

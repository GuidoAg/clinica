import{a as Ve}from"./chunk-7VUNROMT.js";import{a as Se,b as ye,c as we,d as ke,e as Fe,f as Te}from"./chunk-WEKHKOF5.js";import{a as ue,b as _e}from"./chunk-GGKSBBVJ.js";import"./chunk-XMEV7A5C.js";import{a as ve,b as Ce,f as be,i as Ee,j as he,k as Ae}from"./chunk-PMMIFY6J.js";import{f as fe,g as ge,n as xe}from"./chunk-2CRE5YUA.js";import{a as O}from"./chunk-YOQAPNJW.js";import{a as I,b as pe}from"./chunk-5ZTSR4NX.js";import"./chunk-BI2JOZY7.js";import"./chunk-X5YLR3NI.js";import"./chunk-JNY4XHIA.js";import{e as ee,f as ie}from"./chunk-MWG2O76V.js";import"./chunk-YCGHKXNR.js";import{c as te,e as f,g as ae,h as ne,k as oe,l as re,n as le,o as se,v as de,w as ce,x as me}from"./chunk-5MFN5EJ7.js";import{e as X,j as Y}from"./chunk-YGECKIT7.js";import{Bb as u,Db as p,Ka as P,La as Q,Ma as r,Pb as F,Ra as D,Rb as l,Sb as T,Tb as v,Ub as M,Xa as U,Y as k,ba as g,ca as x,cb as N,f as J,lb as c,mb as m,nb as S,ob as y,pb as w,qb as C,ra as K,rb as a,sb as n,tb as b,xb as E}from"./chunk-ZQYZ5UVW.js";import{i as h}from"./chunk-ODN5LVDJ.js";function Me(t,i){if(t&1){let e=E();a(0,"div",3)(1,"p",5),l(2,"Seleccionar tipo usuario para alta"),n(),a(3,"div",6)(4,"button",7),u("click",function(){g(e);let s=p();return x(s.seleccionarTipo("paciente"))}),a(5,"span",8),l(6,"Paciente"),n()(),a(7,"button",7),u("click",function(){g(e);let s=p();return x(s.seleccionarTipo("especialista"))}),a(8,"span",8),l(9,"Especialista"),n()(),a(10,"button",7),u("click",function(){g(e);let s=p();return x(s.seleccionarTipo("admin"))}),a(11,"span",8),l(12,"Admin"),n()()()()}}function Oe(t,i){t&1&&(a(0,"mat-error"),l(1," Campo obligatorio "),n())}function ze(t,i){t&1&&(a(0,"mat-error"),l(1," M\xEDnimo 2 caracteres "),n())}function De(t,i){t&1&&(a(0,"mat-error"),l(1," Solo letras "),n())}function Ne(t,i){t&1&&(a(0,"mat-error"),l(1," Campo obligatorio "),n())}function Re(t,i){t&1&&(a(0,"mat-error"),l(1," M\xEDnimo 2 caracteres "),n())}function qe(t,i){t&1&&(a(0,"mat-error"),l(1," Solo letras "),n())}function Le(t,i){t&1&&(a(0,"mat-error"),l(1," Campo obligatorio "),n())}function $e(t,i){t&1&&(a(0,"mat-error"),l(1," M\xEDnimo 18 "),n())}function Be(t,i){t&1&&(a(0,"mat-error"),l(1," M\xE1ximo 99 "),n())}function je(t,i){t&1&&(a(0,"mat-error"),l(1," Campo obligatorio "),n())}function He(t,i){t&1&&(a(0,"mat-error"),l(1," Debe contener 8 d\xEDgitos "),n())}function Ge(t,i){if(t&1&&(a(0,"mat-option",26),l(1),n()),t&2){let e=i.$implicit;C("value",e),r(),v(" ",e," ")}}function Ze(t,i){t&1&&(a(0,"mat-error"),l(1," Campo obligatorio "),n())}function We(t,i){if(t&1&&(a(0,"mat-form-field",10)(1,"mat-label"),l(2,"Obra Social"),n(),a(3,"mat-select",25),y(4,Ge,2,2,"mat-option",26,S),n(),c(6,Ze,2,0,"mat-error"),n()),t&2){let e,o=p(2);r(4),w(o.obraSocialOptions),r(2),m((e=o.registroForm.get("obraSocial"))!=null&&e.hasError("required")?6:-1)}}function Je(t,i){if(t&1){let e=E();a(0,"mat-checkbox",39),u("change",function(){let s=g(e).$implicit,d=p(4);return x(d.toggleEspecialidad(s.id))}),l(1),n()}if(t&2){let e=i.$implicit,o=p(4);C("checked",o.esEspecialidadSeleccionada(e.id)),r(),v(" ",e.nombre," ")}}function Ke(t,i){t&1&&(a(0,"div",41),l(1,"M\xEDnimo 2 caracteres"),n())}function Qe(t,i){t&1&&(a(0,"div",41),l(1," Solo letras y espacios "),n())}function Xe(t,i){if(t&1){let e=E();a(0,"div",38)(1,"input",40),u("click",function(s){return g(e),x(s.stopPropagation())}),n(),c(2,Ke,2,0,"div",41),c(3,Qe,2,0,"div",41),n()}if(t&2){let e,o,s=p(4);r(2),m((e=s.registroForm.get("nuevaEspecialidad"))!=null&&e.hasError("minlength")?2:-1),r(),m((o=s.registroForm.get("nuevaEspecialidad"))!=null&&o.hasError("pattern")?3:-1)}}function Ye(t,i){if(t&1){let e=E();a(0,"div",32)(1,"div",34),y(2,Je,2,2,"mat-checkbox",35,S),n(),a(4,"div",36)(5,"button",37),u("click",function(s){return g(e),p(3).toggleMostrarNuevaEspecialidad(),x(s.stopPropagation())}),l(6),n(),c(7,Xe,4,2,"div",38),n()()}if(t&2){let e=p(3);r(2),w(e.especialidadOptions),r(4),v(" ",e.mostrarCampoOtraEspecialidad?"\u2715 Cancelar":"+ Agregar nueva especialidad"," "),r(),m(e.mostrarCampoOtraEspecialidad?7:-1)}}function ei(t,i){t&1&&(a(0,"div",33),l(1," Deb\xE9s seleccionar al menos una especialidad o agregar una nueva "),n())}function ii(t,i){if(t&1){let e=E();a(0,"div",15)(1,"div",27),l(2," Especialidades (seleccion\xE1 al menos una) "),n(),a(3,"div",28)(4,"div",29),u("click",function(s){g(e);let d=p(2);return x(d.toggleDesplegableEspecialidades(s))})("keyup.enter",function(s){g(e);let d=p(2);return x(d.toggleDesplegableEspecialidades(s))})("keyup.space",function(s){g(e);let d=p(2);return x(d.toggleDesplegableEspecialidades(s))}),a(5,"span",30),l(6),n(),a(7,"mat-icon",31),l(8),n()(),c(9,Ye,8,2,"div",32),n(),c(10,ei,2,0,"div",33),n()}if(t&2){let e,o=p(2);r(4),F("border-azul-oscuro",o.desplegableEspecialidadesAbierto),r(2),v(" ",o.obtenerEspecialidadesSeleccionadasTexto()," "),r(2),T(o.desplegableEspecialidadesAbierto?"expand_less":"expand_more"),r(),m(o.desplegableEspecialidadesAbierto?9:-1),r(),m((e=o.registroForm.get("especialidadesSeleccionadas"))!=null&&e.hasError("alMenosUna")&&((e=o.registroForm.get("especialidadesSeleccionadas"))!=null&&e.touched)?10:-1)}}function ti(t,i){t&1&&(a(0,"mat-error"),l(1," Campo obligatorio "),n())}function ai(t,i){t&1&&(a(0,"mat-error"),l(1," Email inv\xE1lido "),n())}function ni(t,i){t&1&&(a(0,"mat-error"),l(1," Campo obligatorio "),n())}function oi(t,i){t&1&&(a(0,"mat-error"),l(1," M\xEDnimo 7 caracteres "),n())}function ri(t,i){t&1&&(a(0,"mat-error"),l(1," Campo obligatorio "),n())}function li(t,i){if(t&1){let e=E();a(0,"div",18)(1,"label",42),l(2,"Imagen de fondo"),n(),a(3,"input",43),u("change",function(s){g(e);let d=p(2);return x(d.onFileSelected(s,"fondo"))}),n()()}}function si(t,i){if(t&1){let e=E();a(0,"form",9),u("ngSubmit",function(){g(e);let s=p();return x(s.registrar())}),a(1,"mat-form-field",10)(2,"mat-label"),l(3,"Nombre"),n(),b(4,"input",11),c(5,Oe,2,0,"mat-error"),c(6,ze,2,0,"mat-error"),c(7,De,2,0,"mat-error"),n(),a(8,"mat-form-field",10)(9,"mat-label"),l(10,"Apellido"),n(),b(11,"input",12),c(12,Ne,2,0,"mat-error"),c(13,Re,2,0,"mat-error"),c(14,qe,2,0,"mat-error"),n(),a(15,"mat-form-field",10)(16,"mat-label"),l(17,"Edad"),n(),b(18,"input",13),c(19,Le,2,0,"mat-error"),c(20,$e,2,0,"mat-error"),c(21,Be,2,0,"mat-error"),n(),a(22,"mat-form-field",10)(23,"mat-label"),l(24,"DNI"),n(),b(25,"input",14),c(26,je,2,0,"mat-error"),c(27,He,2,0,"mat-error"),n(),c(28,We,7,1,"mat-form-field",10),c(29,ii,11,6,"div",15),a(30,"mat-form-field",10)(31,"mat-label"),l(32,"Email"),n(),b(33,"input",16),c(34,ti,2,0,"mat-error"),c(35,ai,2,0,"mat-error"),n(),a(36,"mat-form-field",10)(37,"mat-label"),l(38,"Contrase\xF1a"),n(),b(39,"input",17),c(40,ni,2,0,"mat-error"),c(41,oi,2,0,"mat-error"),n(),a(42,"div",18)(43,"label",19),l(44,"Imagen de perfil"),n(),a(45,"input",20),u("change",function(s){g(e);let d=p();return x(d.onFileSelected(s,"perfil"))}),n(),c(46,ri,2,0,"mat-error"),n(),c(47,li,4,0,"div",18),a(48,"div",21)(49,"button",22),l(50," Registrar "),n()(),a(51,"div",23)(52,"button",24),u("click",function(){g(e);let s=p();return x(s.tipoUsuario=null)}),l(53," Cambiar tipo de usuario "),n()()()}if(t&2){let e,o,s,d,A,V,R,q,L,$,B,j,H,G,Z,W,_=p();C("formGroup",_.registroForm),r(5),m((e=_.registroForm.get("nombre"))!=null&&e.hasError("required")?5:-1),r(),m((o=_.registroForm.get("nombre"))!=null&&o.hasError("minlength")?6:-1),r(),m((s=_.registroForm.get("nombre"))!=null&&s.hasError("pattern")?7:-1),r(5),m((d=_.registroForm.get("apellido"))!=null&&d.hasError("required")?12:-1),r(),m((A=_.registroForm.get("apellido"))!=null&&A.hasError("minlength")?13:-1),r(),m((V=_.registroForm.get("apellido"))!=null&&V.hasError("pattern")?14:-1),r(5),m((R=_.registroForm.get("edad"))!=null&&R.hasError("required")?19:-1),r(),m((q=_.registroForm.get("edad"))!=null&&q.hasError("min")?20:-1),r(),m((L=_.registroForm.get("edad"))!=null&&L.hasError("max")?21:-1),r(5),m(($=_.registroForm.get("dni"))!=null&&$.hasError("required")?26:-1),r(),m((B=_.registroForm.get("dni"))!=null&&B.hasError("pattern")?27:-1),r(),m(_.tipoUsuario==="paciente"?28:-1),r(),m(_.tipoUsuario==="especialista"?29:-1),r(5),m((j=_.registroForm.get("mail"))!=null&&j.hasError("required")?34:-1),r(),m((H=_.registroForm.get("mail"))!=null&&H.hasError("email")?35:-1),r(5),m((G=_.registroForm.get("password"))!=null&&G.hasError("required")?40:-1),r(),m((Z=_.registroForm.get("password"))!=null&&Z.hasError("minlength")?41:-1),r(5),m((W=_.registroForm.get("imagenPerfil"))!=null&&W.hasError("required")?46:-1),r(),m(_.tipoUsuario==="paciente"?47:-1),r(2),C("disabled",_.registroForm.invalid)}}var z=class t{perfilId;cerrar=new N;altaExitosa=new N;registroForm;tipoUsuario=null;obraSocialOptions=Te;especialidadOptions=[];especialidadesSeleccionadas=new Set;mostrarCampoOtraEspecialidad=!1;desplegableEspecialidadesAbierto=!1;subEspecialidad;fb=k(de);auth=k(pe);snackBar=k(xe);loading=k(O);elementRef=k(K);ngOnInit(){this.initForm()}ngOnDestroy(){this.subEspecialidad?.unsubscribe()}cerrarPopup(){this.cerrar.emit()}initForm(){return h(this,null,function*(){try{this.loading.show(),this.especialidadOptions=yield this.auth.obtenerEspecialidades(),this.registroForm=this.fb.group({nombre:["",[f.required,f.minLength(2),f.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],apellido:["",[f.required,f.minLength(2),f.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],edad:[null,[f.required,f.min(18),f.max(99)]],dni:["",[f.required,f.pattern(/^\d{8}$/)]],obraSocial:[""],mail:["",[f.required,f.email]],password:["",[f.required,f.minLength(7)]],especialidadesSeleccionadas:[[]],nuevaEspecialidad:["",[f.minLength(2),f.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],imagenPerfil:[null,f.required],imagenFondo:[""]})}catch{console.error("Error al cargar especialidades")}finally{this.loading.hide()}})}seleccionarTipo(i){if(this.tipoUsuario=i,!this.registroForm)return;let e=this.registroForm.get("obraSocial"),o=this.registroForm.get("especialidadesSeleccionadas"),s=this.registroForm.get("nuevaEspecialidad");i==="paciente"?(e?.setValidators([f.required]),o?.clearValidators(),s?.clearValidators()):i==="especialista"?(e?.clearValidators(),o?.setValidators([this.alMenosUnaEspecialidadValidator()])):i==="admin"&&(this.registroForm.get("obraSocial")?.setValue(""),this.registroForm.get("especialidadesSeleccionadas")?.setValue([]),this.registroForm.get("nuevaEspecialidad")?.setValue(""),this.registroForm.get("imagenFondo")?.setValue(""),this.especialidadesSeleccionadas.clear(),this.mostrarCampoOtraEspecialidad=!1,e?.clearValidators(),o?.clearValidators(),s?.clearValidators()),e?.updateValueAndValidity(),o?.updateValueAndValidity(),s?.updateValueAndValidity()}alMenosUnaEspecialidadValidator(){return i=>{let e=i.value||[],o=this.registroForm?.get("nuevaEspecialidad")?.value;return e.length===0&&!o?{alMenosUna:!0}:null}}toggleEspecialidad(i){this.especialidadesSeleccionadas.has(i)?this.especialidadesSeleccionadas.delete(i):this.especialidadesSeleccionadas.add(i),this.actualizarEspecialidadesEnForm()}toggleMostrarNuevaEspecialidad(){this.mostrarCampoOtraEspecialidad=!this.mostrarCampoOtraEspecialidad,this.mostrarCampoOtraEspecialidad||this.registroForm.get("nuevaEspecialidad")?.setValue("")}toggleDesplegableEspecialidades(i){i&&i.stopPropagation(),this.desplegableEspecialidadesAbierto=!this.desplegableEspecialidadesAbierto}onClickOutside(i){if(!this.desplegableEspecialidadesAbierto)return;let e=i.target;this.elementRef.nativeElement.querySelector(".relative")?.contains(e)||(this.desplegableEspecialidadesAbierto=!1)}obtenerEspecialidadesSeleccionadasTexto(){return this.especialidadesSeleccionadas.size===0?"Ninguna seleccionada":Array.from(this.especialidadesSeleccionadas).map(e=>this.especialidadOptions.find(o=>o.id===e)?.nombre).filter(e=>e).join(", ")}esEspecialidadSeleccionada(i){return this.especialidadesSeleccionadas.has(i)}actualizarEspecialidadesEnForm(){let i=Array.from(this.especialidadesSeleccionadas);this.registroForm.get("especialidadesSeleccionadas")?.setValue(i),this.registroForm.get("especialidadesSeleccionadas")?.updateValueAndValidity()}onFileSelected(i,e){let o=e==="perfil"?"imagenPerfil":"imagenFondo",s=i.target,d=this.registroForm.get(o);if(!s.files?.length){d.setValue(null),d.setErrors({required:!0});return}let A=s.files[0];if(!["image/jpeg","image/png","image/jpg"].includes(A.type)){d.setErrors({invalidType:!0});return}d.setValue(A),d.setErrors(null)}registrar(){return h(this,null,function*(){if(!(this.registroForm.invalid||!this.tipoUsuario)){this.loading.show();try{this.tipoUsuario==="paciente"?yield this.handleRegistroPaciente():this.tipoUsuario==="especialista"?yield this.handleRegistroEspecialista():this.tipoUsuario==="admin"&&(yield this.handleRegistroAdmin())}finally{this.loading.hide()}}})}handleRegistroAdmin(){return h(this,null,function*(){try{let i=this.registroForm.value,e=yield I(i.imagenPerfil),o={nombre:i.nombre,apellido:i.apellido,edad:i.edad,dni:i.dni,mail:i.mail,contrasena:i.password,imagenPerfil:e},s=yield this.auth.registerAdmin(o),d=s.errorCode?.toLowerCase();console.log(s.errorCode),d?.includes("error desconocido")?this.mostrarResultado(s.success,s.message):this.mostrarResultado(s.success,s.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar las im\xE1genes.")}})}handleRegistroPaciente(){return h(this,null,function*(){try{let i=this.registroForm.value,e=yield I(i.imagenPerfil),o=yield I(i.imagenFondo),s={nombre:i.nombre,apellido:i.apellido,edad:i.edad,dni:i.dni,obraSocial:i.obraSocial,mail:i.mail,contrasena:i.password,imagenPerfil:e,imagenFondo:o},d=yield this.auth.registerPaciente(s),A=d.errorCode?.toLowerCase();console.log(d.errorCode),A?.includes("error desconocido")?this.mostrarResultado(d.success,d.message):this.mostrarResultado(d.success,d.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar las im\xE1genes.")}})}handleRegistroEspecialista(){return h(this,null,function*(){try{let i=this.registroForm.value,e=yield I(i.imagenPerfil),o=[];i.especialidadesSeleccionadas&&i.especialidadesSeleccionadas.length>0&&o.push(...i.especialidadesSeleccionadas.map(V=>String(V))),i.nuevaEspecialidad&&i.nuevaEspecialidad.trim()&&o.push(i.nuevaEspecialidad.trim());let s={nombre:i.nombre,apellido:i.apellido,edad:i.edad,dni:i.dni,mail:i.mail,contrasena:i.password,especialidades:o,imagenPerfil:e},d=yield this.auth.registerEspecialista(s);d.errorCode?.toLowerCase()?.includes("error desconocido")?this.mostrarResultado(d.success,d.message):this.mostrarResultado(d.success,d.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar la imagen.")}})}mostrarResultado(i,e){if(!i){this.snackBar.open(e||"Ocurri\xF3 un error.","Cerrar",{duration:4e3,panelClass:["bg-red-600","text-white"]});return}this.tipoUsuario=null,this.altaExitosa.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=U({type:t,selectors:[["app-altas-admin"]],hostBindings:function(e,o){e&1&&u("click",function(d){return o.onClickOutside(d)},Q)},inputs:{perfilId:"perfilId"},outputs:{cerrar:"cerrar",altaExitosa:"altaExitosa"},decls:6,vars:2,consts:[["tabindex","-1","role","dialog","aria-modal","true",1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50","backdrop-blur-sm",3,"click","keyup.escape"],["tabindex","0",1,"w-full","max-w-3xl","rounded-2xl","bg-white","px-6","py-1","shadow-xl",3,"click","keyup"],[1,"mt-2","mb-4","text-center","text-4xl","font-bold","text-azul-oscuro"],[1,"space-y-6","p-10","text-center"],[1,"mt-6","grid","grid-cols-1","gap-6","md:grid-cols-2",3,"formGroup"],[1,"text-xl","text-gray-700"],[1,"flex","flex-col","justify-center","gap-6","sm:flex-row"],[1,"rounded-xl","bg-white","px-8","py-4","shadow","transition-transform","hover:scale-105",3,"click"],[1,"text-xl","font-semibold","text-azul-oscuro"],[1,"mt-6","grid","grid-cols-1","gap-6","md:grid-cols-2",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","nombre"],["matInput","","formControlName","apellido"],["matInput","","type","number","formControlName","edad"],["matInput","","formControlName","dni"],[1,"col-span-2"],["matInput","","type","email","formControlName","mail"],["matInput","","type","password","formControlName","password"],[1,"md:col-span-2"],["for","imagenPerfilAdmin",1,"block","text-sm","font-medium","text-gray-700"],["id","imagenPerfilAdmin","type","file","accept","image/*",1,"register-input",3,"change"],[1,"flex","justify-center","pt-2","md:col-span-2"],["mat-raised-button","","color","primary","type","submit",1,"rounded-full","bg-verde-oscuro","px-6","py-2","text-white","shadow",3,"disabled"],[1,"text-center","md:col-span-2"],["mat-button","","type","button",1,"text-sm","text-gray-600","underline",3,"click"],["formControlName","obraSocial"],[3,"value"],[1,"mb-1","text-sm","font-medium","text-azul-oscuro"],[1,"relative"],["tabindex","0",1,"flex","min-h-[56px]","cursor-pointer","items-center","rounded-md","border","border-gray-300","bg-white","px-4","py-3","transition-colors","hover:border-azul-oscuro",3,"click","keyup.enter","keyup.space"],[1,"flex-1","text-sm","text-gray-700"],[1,"text-gray-500"],[1,"absolute","top-full","right-0","left-0","z-10","mt-1","max-h-60","overflow-y-auto","rounded-lg","border","border-gray-300","bg-white","p-3","shadow-lg"],[1,"mt-1","text-sm","text-red-600"],[1,"space-y-2"],[1,"block","text-sm",3,"checked"],[1,"mt-3","border-t","pt-2"],["type","button","mat-button","",1,"w-full","text-left","text-sm","text-azul-oscuro",3,"click"],[1,"mt-2"],[1,"block","text-sm",3,"change","checked"],["formControlName","nuevaEspecialidad","placeholder","Nombre de la especialidad",1,"w-full","rounded","border","border-gray-300","px-3","py-2","text-sm","focus:border-azul-oscuro","focus:outline-none",3,"click"],[1,"mt-1","text-xs","text-red-600"],["for","imagenFondoAdmin",1,"block","text-sm","font-medium","text-gray-700"],["id","imagenFondoAdmin","type","file","accept","image/*",1,"register-input",3,"change"]],template:function(e,o){e&1&&(a(0,"div",0),u("click",function(){return o.cerrarPopup()})("keyup.escape",function(){return o.cerrarPopup()}),a(1,"div",1),u("click",function(d){return d.stopPropagation()})("keyup",function(d){return d.stopPropagation()}),a(2,"h2",2),l(3," Alta "),n(),c(4,Me,13,0,"div",3),c(5,si,54,21,"form",4),n()()),e&2&&(r(4),m(!o.tipoUsuario&&o.registroForm?4:-1),r(),m(o.tipoUsuario&&o.registroForm?5:-1))},dependencies:[ce,oe,te,re,ae,ne,me,le,se,Ee,be,ve,Ce,Ae,he,we,ye,Se,ge,fe,ie,ee,Fe,ke],styles:[".register-input[_ngcontent-%COMP%]{padding:12px 20px;margin:10px 0;border:2px solid #333;border-radius:6px;background-color:#222;color:#fff;font-size:16px;cursor:pointer;transition:all .3s ease}.register-input[_ngcontent-%COMP%]:hover{border-color:#92cc34;background-color:#2c2c2c}.register-input[_ngcontent-%COMP%]:focus{border-color:#19b44d;background-color:#2c2c2c;outline:none}.register-input[_ngcontent-%COMP%]::-webkit-file-upload-button{background-color:#fff;color:#fff;padding:8px 15px;border-radius:4px;border:none;cursor:pointer;font-size:14px;transition:background-color .3s ease}"]})};function di(t,i){if(t&1){let e=E();a(0,"app-altas-admin",8),u("cerrar",function(){g(e);let s=p();return x(s.cerrarPopupAltas())})("altaExitosa",function(){g(e);let s=p();return x(s.onAltaExitosa())}),n()}}function ci(t,i){if(t&1&&b(0,"img",10),t&2){let e=p().$implicit;C("src",e.urlImagenPerfil,P)}}function mi(t,i){if(t&1&&(a(0,"div",9),c(1,ci,1,1,"img",10),a(2,"div",11)(3,"p",12),l(4),n(),a(5,"p",13),l(6),n(),a(7,"p"),l(8),n(),a(9,"p"),l(10),n(),a(11,"p"),l(12," Email verificado: "),a(13,"span",14),l(14),n()()()()),t&2){let e=i.$implicit;r(),m(e.urlImagenPerfil?1:-1),r(3),M(" ",e.nombre," ",e.apellido," "),r(2),T(e.email),r(2),v("DNI: ",e.dni),r(2),v("Edad: ",e.edad),r(3),C("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),r(),v(" ",e.emailVerificado?"Verificado":"Sin Verificar"," ")}}function pi(t,i){if(t&1&&(a(0,"div",7),y(1,mi,15,8,"div",9,S),n()),t&2){let e=p();r(),w(e.pacientes)}}function ui(t,i){if(t&1&&b(0,"img",10),t&2){let e=p().$implicit;C("src",e.urlImagenPerfil,P)}}function _i(t,i){if(t&1){let e=E();a(0,"div",9),c(1,ui,1,1,"img",10),a(2,"div",11)(3,"p",12),l(4),n(),a(5,"p",13),l(6),n(),a(7,"p"),l(8),n(),a(9,"p"),l(10),n(),a(11,"p"),l(12," Email verificado: "),a(13,"span",14),l(14),n()(),a(15,"p"),l(16," Estado: "),a(17,"span",14),l(18),n()()(),a(19,"button",15),u("click",function(){let s=g(e).$implicit,d=p(2);return x(d.toggleValidadoAdmin(s))}),l(20),n()()}if(t&2){let e=i.$implicit;r(),m(e.urlImagenPerfil?1:-1),r(3),M(" ",e.nombre," ",e.apellido," "),r(2),T(e.email),r(2),v("DNI: ",e.dni),r(2),v("Edad: ",e.edad),r(3),C("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),r(),v(" ",e.emailVerificado?"Verificado":"Sin Verificar"," "),r(3),C("ngClass",e.validadoAdmin?"text-verde-oscuro":"text-red-600"),r(),v(" ",e.validadoAdmin?"Habilitado":"Inhabilitado"," "),r(2),v(" ",e.validadoAdmin?"Deshabilitar":"Habilitar"," ")}}function fi(t,i){if(t&1&&(a(0,"div",7),y(1,_i,21,11,"div",9,S),n()),t&2){let e=p();r(),w(e.especialistas)}}function gi(t,i){if(t&1&&b(0,"img",10),t&2){let e=p().$implicit;C("src",e.urlImagenPerfil,P)}}function xi(t,i){if(t&1&&(a(0,"div",9),c(1,gi,1,1,"img",10),a(2,"div",11)(3,"p",12),l(4),n(),a(5,"p",13),l(6),n(),a(7,"p"),l(8),n(),a(9,"p"),l(10),n(),a(11,"p"),l(12," Email verificado: "),a(13,"span",14),l(14),n()()()()),t&2){let e=i.$implicit;r(),m(e.urlImagenPerfil?1:-1),r(3),M(" ",e.nombre," ",e.apellido," "),r(2),T(e.email),r(2),v("DNI: ",e.dni),r(2),v("Edad: ",e.edad),r(3),C("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),r(),v(" ",e.emailVerificado?"Verificado":"Sin Verificar"," ")}}function vi(t,i){if(t&1&&(a(0,"div",7),y(1,xi,15,8,"div",9,S),n()),t&2){let e=p();r(),w(e.administradores)}}var Ie=class t{constructor(i,e){this.usuariosService=i;this.loading=e}solapaActiva="pacientes";pacientes=[];especialistas=[];administradores=[];usuarioSeleccionado=null;destroy$=new J;mostrarPopupAltas=!1;ngOnInit(){this.recargarUsuarios(),this.loading.hide()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}recargarUsuarios(){return h(this,null,function*(){let i=yield this.usuariosService.obtenerTodosUsuarios();this.pacientes=i.filter(e=>e.rol==="paciente"),this.especialistas=i.filter(e=>e.rol==="especialista"),this.administradores=i.filter(e=>e.rol==="admin")})}seleccionarUsuario(i){this.usuarioSeleccionado=i}toggleValidadoAdmin(i){return h(this,null,function*(){if(i.rol!=="especialista")return;let e=!i.validadoAdmin;(yield this.usuariosService.actualizarEstadoEspecialista(i.id,e))&&(i.validadoAdmin=e,yield this.recargarUsuarios())})}abrirPopupAltas(){this.mostrarPopupAltas=!0}cerrarPopupAltas(){this.mostrarPopupAltas=!1}onAltaExitosa(){return h(this,null,function*(){yield this.recargarUsuarios(),this.cerrarPopupAltas()})}static \u0275fac=function(e){return new(e||t)(D(Ve),D(O))};static \u0275cmp=U({type:t,selectors:[["app-usuarios"]],decls:18,vars:22,consts:[[1,"h-full","w-full","p-1"],[1,"h-full","w-full","overflow-auto","rounded-2xl","border","border-white","bg-crema","p-6","pb-6","shadow-inner"],[1,"flex","flex-wrap","items-center","justify-between","pb-7"],[1,"flex","flex-wrap","gap-2"],[1,"px-4","py-2","font-semibold","text-gray-600","hover:text-azul-oscuro",3,"click"],[1,"mr-10"],[1,"btn","btn-primary","h-12","rounded-2xl","bg-azul-oscuro","px-6","py-2","text-base","text-white","transition-all","duration-50","hover:bg-azul-claro","hover:text-lg",3,"click"],[1,"grid","justify-center","gap-x-1","gap-y-3",2,"grid-template-columns","repeat(auto-fill, minmax(300px, 1fr))"],[3,"cerrar","altaExitosa"],[1,"w-full","rounded-lg","border","border-gray-300","bg-white","p-4","shadow-sm"],["alt","Avatar","appTrackImage","",1,"mb-2","h-14","w-14","rounded-full","object-cover",3,"src"],[1,"text-sm"],[1,"font-semibold","text-azul-oscuro"],[1,"text-gray-600"],[3,"ngClass"],[1,"mt-2","w-full","rounded","bg-azul-claro","px-3","py-1","text-sm","text-white","hover:bg-azul-oscuro",3,"click"]],template:function(e,o){e&1&&(a(0,"app-loading-wrapper")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"button",4),u("click",function(){return o.solapaActiva="pacientes"}),l(6," Pacientes "),n(),a(7,"button",4),u("click",function(){return o.solapaActiva="especialistas"}),l(8," Especialistas "),n(),a(9,"button",4),u("click",function(){return o.solapaActiva="administradores"}),l(10," Administradores "),n()(),a(11,"div",5)(12,"button",6),u("click",function(){return o.abrirPopupAltas()}),l(13," Dar Alta Usuario "),n()()(),c(14,di,1,0,"app-altas-admin"),c(15,pi,3,0,"div",7),c(16,fi,3,0,"div",7),c(17,vi,3,0,"div",7),n()()()),e&2&&(r(5),F("border-b-2",o.solapaActiva==="pacientes")("border-azul-oscuro",o.solapaActiva==="pacientes")("text-azul-oscuro",o.solapaActiva==="pacientes"),r(2),F("border-b-2",o.solapaActiva==="especialistas")("border-azul-oscuro",o.solapaActiva==="especialistas")("text-azul-oscuro",o.solapaActiva==="especialistas"),r(2),F("border-b-2",o.solapaActiva==="administradores")("border-azul-oscuro",o.solapaActiva==="administradores")("text-azul-oscuro",o.solapaActiva==="administradores"),r(5),m(o.mostrarPopupAltas?14:-1),r(),m(o.solapaActiva==="pacientes"?15:-1),r(),m(o.solapaActiva==="especialistas"?16:-1),r(),m(o.solapaActiva==="administradores"?17:-1))},dependencies:[Y,X,z,ue,_e],encapsulation:2})};export{Ie as Usuarios};

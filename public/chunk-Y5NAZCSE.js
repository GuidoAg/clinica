import{a as Ie}from"./chunk-MSHVJE3D.js";import{a as Se,b as ye,c as we,d as Fe,e as ke,f as Ve}from"./chunk-ORNE3K7H.js";import{a as Te}from"./chunk-EVSMGOY5.js";import{a as ue,b as _e}from"./chunk-2R7LN7ZU.js";import"./chunk-75QZAIKX.js";import{a as ve,b as Ce,f as be,i as Ee,j as he,k as Ae}from"./chunk-42WLO5Z2.js";import{f as fe,g as ge,n as xe}from"./chunk-ZTAJVVXQ.js";import{a as z}from"./chunk-QYWCDNK3.js";import{k as P,l as pe}from"./chunk-OX45JURR.js";import"./chunk-X5YLR3NI.js";import"./chunk-Q4YNZBQ2.js";import{f as ee,g as ie}from"./chunk-DHRKF7SU.js";import{c as te,e as x,g as ae,h as ne,k as re,l as oe,n as le,o as se,v as de,w as ce,x as me}from"./chunk-T6NMK5EM.js";import"./chunk-HICRNNMR.js";import{e as X,k as Y}from"./chunk-M3XRSK3P.js";import{Db as u,Fb as p,Ma as O,Na as Q,Oa as o,Rb as k,Ta as R,Tb as l,Ub as T,Vb as v,Wb as N,Z as V,Za as M,ca as f,da as g,eb as L,f as J,nb as c,ob as m,pb as y,qb as w,rb as F,sa as K,sb as C,tb as n,ub as r,vb as b,zb as E}from"./chunk-7RTQA4J5.js";import{i as h}from"./chunk-ODN5LVDJ.js";function Me(t,i){if(t&1){let e=E();n(0,"div",3)(1,"p",5),l(2,"Seleccionar tipo usuario para alta"),r(),n(3,"div",6)(4,"button",7),u("click",function(){f(e);let s=p();return g(s.seleccionarTipo("paciente"))}),n(5,"span",8),l(6,"Paciente"),r()(),n(7,"button",7),u("click",function(){f(e);let s=p();return g(s.seleccionarTipo("especialista"))}),n(8,"span",8),l(9,"Especialista"),r()(),n(10,"button",7),u("click",function(){f(e);let s=p();return g(s.seleccionarTipo("admin"))}),n(11,"span",8),l(12,"Admin"),r()()()()}}function Ne(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),r())}function ze(t,i){t&1&&(n(0,"mat-error"),l(1," M\xEDnimo 2 caracteres "),r())}function De(t,i){t&1&&(n(0,"mat-error"),l(1," Solo letras "),r())}function Re(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),r())}function Le(t,i){t&1&&(n(0,"mat-error"),l(1," M\xEDnimo 2 caracteres "),r())}function Be(t,i){t&1&&(n(0,"mat-error"),l(1," Solo letras "),r())}function qe(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),r())}function $e(t,i){t&1&&(n(0,"mat-error"),l(1," M\xEDnimo 18 "),r())}function je(t,i){t&1&&(n(0,"mat-error"),l(1," M\xE1ximo 99 "),r())}function He(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),r())}function Ge(t,i){t&1&&(n(0,"mat-error"),l(1," Debe contener 8 d\xEDgitos "),r())}function Ze(t,i){if(t&1&&(n(0,"mat-option",26),l(1),r()),t&2){let e=i.$implicit;C("value",e),o(),v(" ",e," ")}}function We(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),r())}function Je(t,i){if(t&1&&(n(0,"mat-form-field",10)(1,"mat-label"),l(2,"Obra Social"),r(),n(3,"mat-select",25),w(4,Ze,2,2,"mat-option",26,y),r(),c(6,We,2,0,"mat-error"),r()),t&2){let e,a=p(2);o(4),F(a.obraSocialOptions),o(2),m((e=a.registroForm.get("obraSocial"))!=null&&e.hasError("required")?6:-1)}}function Ke(t,i){if(t&1){let e=E();n(0,"mat-checkbox",40),u("change",function(){let s=f(e).$implicit,d=p(4);return g(d.toggleEspecialidad(s.id))}),l(1),r()}if(t&2){let e=i.$implicit,a=p(4);C("checked",a.esEspecialidadSeleccionada(e.id)),o(),v(" ",e.nombre," ")}}function Qe(t,i){t&1&&(n(0,"div",42),l(1,"M\xEDnimo 4 caracteres"),r())}function Xe(t,i){t&1&&(n(0,"div",42),l(1," Solo letras y espacios permitidos "),r())}function Ye(t,i){if(t&1){let e=E();n(0,"div",39)(1,"input",41),u("click",function(s){return f(e),g(s.stopPropagation())})("keyup.enter",function(s){return f(e),p(4).agregarNuevaEspecialidad(),g(s.stopPropagation())}),r(),c(2,Qe,2,0,"div",42),c(3,Xe,2,0,"div",42),n(4,"button",43),u("click",function(s){return f(e),p(4).agregarNuevaEspecialidad(),g(s.stopPropagation())}),l(5," \u2713 Confirmar y agregar "),r()()}if(t&2){let e,a,s,d=p(4);o(2),m((e=d.registroForm.get("nuevaEspecialidad"))!=null&&e.hasError("minlength")&&((e=d.registroForm.get("nuevaEspecialidad"))!=null&&e.touched)?2:-1),o(),m((a=d.registroForm.get("nuevaEspecialidad"))!=null&&a.hasError("pattern")&&((a=d.registroForm.get("nuevaEspecialidad"))!=null&&a.touched)?3:-1),o(),C("disabled",((s=d.registroForm.get("nuevaEspecialidad"))==null?null:s.invalid)||!(!((s=d.registroForm.get("nuevaEspecialidad"))==null||s.value==null)&&s.value.trim()))}}function ei(t,i){if(t&1){let e=E();n(0,"div",34)(1,"div",35),w(2,Ke,2,2,"mat-checkbox",36,y),r(),n(4,"div",37)(5,"button",38),u("click",function(s){return f(e),p(3).toggleMostrarNuevaEspecialidad(),g(s.stopPropagation())}),l(6),r(),c(7,Ye,6,3,"div",39),r()()}if(t&2){let e=p(3);k("max-h-60",!e.mostrarCampoOtraEspecialidad)("max-h-96",e.mostrarCampoOtraEspecialidad),o(2),F(e.especialidadOptions),o(4),v(" ",e.mostrarCampoOtraEspecialidad?"\u2715 Cancelar":"+ Agregar nueva especialidad"," "),o(),m(e.mostrarCampoOtraEspecialidad?7:-1)}}function ii(t,i){t&1&&(n(0,"div",33),l(1," Deb\xE9s seleccionar al menos una especialidad o agregar una nueva "),r())}function ti(t,i){if(t&1){let e=E();n(0,"div",15)(1,"div",27),l(2," Especialidades (seleccion\xE1 al menos una) "),r(),n(3,"div",28)(4,"div",29),u("click",function(s){f(e);let d=p(2);return g(d.toggleDesplegableEspecialidades(s))})("keyup.enter",function(s){f(e);let d=p(2);return g(d.toggleDesplegableEspecialidades(s))})("keyup.space",function(s){f(e);let d=p(2);return g(d.toggleDesplegableEspecialidades(s))}),n(5,"span",30),l(6),r(),n(7,"mat-icon",31),l(8),r()(),c(9,ei,8,6,"div",32),r(),c(10,ii,2,0,"div",33),r()}if(t&2){let e,a=p(2);o(4),k("border-azul-oscuro",a.desplegableEspecialidadesAbierto),o(2),v(" ",a.obtenerEspecialidadesSeleccionadasTexto()," "),o(2),T(a.desplegableEspecialidadesAbierto?"expand_less":"expand_more"),o(),m(a.desplegableEspecialidadesAbierto?9:-1),o(),m((e=a.registroForm.get("especialidadesSeleccionadas"))!=null&&e.hasError("alMenosUna")&&((e=a.registroForm.get("especialidadesSeleccionadas"))!=null&&e.touched)?10:-1)}}function ai(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),r())}function ni(t,i){t&1&&(n(0,"mat-error"),l(1," Email inv\xE1lido "),r())}function ri(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),r())}function oi(t,i){t&1&&(n(0,"mat-error"),l(1," M\xEDnimo 7 caracteres "),r())}function li(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),r())}function si(t,i){if(t&1){let e=E();n(0,"div",18)(1,"label",44),l(2,"Imagen de fondo"),r(),n(3,"input",45),u("change",function(s){f(e);let d=p(2);return g(d.onFileSelected(s,"fondo"))}),r()()}}function di(t,i){if(t&1){let e=E();n(0,"form",9),u("ngSubmit",function(){f(e);let s=p();return g(s.registrar())}),n(1,"mat-form-field",10)(2,"mat-label"),l(3,"Nombre"),r(),b(4,"input",11),c(5,Ne,2,0,"mat-error"),c(6,ze,2,0,"mat-error"),c(7,De,2,0,"mat-error"),r(),n(8,"mat-form-field",10)(9,"mat-label"),l(10,"Apellido"),r(),b(11,"input",12),c(12,Re,2,0,"mat-error"),c(13,Le,2,0,"mat-error"),c(14,Be,2,0,"mat-error"),r(),n(15,"mat-form-field",10)(16,"mat-label"),l(17,"Edad"),r(),b(18,"input",13),c(19,qe,2,0,"mat-error"),c(20,$e,2,0,"mat-error"),c(21,je,2,0,"mat-error"),r(),n(22,"mat-form-field",10)(23,"mat-label"),l(24,"DNI"),r(),b(25,"input",14),c(26,He,2,0,"mat-error"),c(27,Ge,2,0,"mat-error"),r(),c(28,Je,7,1,"mat-form-field",10),c(29,ti,11,6,"div",15),n(30,"mat-form-field",10)(31,"mat-label"),l(32,"Email"),r(),b(33,"input",16),c(34,ai,2,0,"mat-error"),c(35,ni,2,0,"mat-error"),r(),n(36,"mat-form-field",10)(37,"mat-label"),l(38,"Contrase\xF1a"),r(),b(39,"input",17),c(40,ri,2,0,"mat-error"),c(41,oi,2,0,"mat-error"),r(),n(42,"div",18)(43,"label",19),l(44,"Imagen de perfil"),r(),n(45,"input",20),u("change",function(s){f(e);let d=p();return g(d.onFileSelected(s,"perfil"))}),r(),c(46,li,2,0,"mat-error"),r(),c(47,si,4,0,"div",18),n(48,"div",21)(49,"button",22),l(50," Registrar "),r()(),n(51,"div",23)(52,"button",24),u("click",function(){f(e);let s=p();return g(s.tipoUsuario=null)}),l(53," Cambiar tipo de usuario "),r()()()}if(t&2){let e,a,s,d,A,S,I,U,B,q,$,j,H,G,Z,W,_=p();C("formGroup",_.registroForm),o(5),m((e=_.registroForm.get("nombre"))!=null&&e.hasError("required")?5:-1),o(),m((a=_.registroForm.get("nombre"))!=null&&a.hasError("minlength")?6:-1),o(),m((s=_.registroForm.get("nombre"))!=null&&s.hasError("pattern")?7:-1),o(5),m((d=_.registroForm.get("apellido"))!=null&&d.hasError("required")?12:-1),o(),m((A=_.registroForm.get("apellido"))!=null&&A.hasError("minlength")?13:-1),o(),m((S=_.registroForm.get("apellido"))!=null&&S.hasError("pattern")?14:-1),o(5),m((I=_.registroForm.get("edad"))!=null&&I.hasError("required")?19:-1),o(),m((U=_.registroForm.get("edad"))!=null&&U.hasError("min")?20:-1),o(),m((B=_.registroForm.get("edad"))!=null&&B.hasError("max")?21:-1),o(5),m((q=_.registroForm.get("dni"))!=null&&q.hasError("required")?26:-1),o(),m(($=_.registroForm.get("dni"))!=null&&$.hasError("pattern")?27:-1),o(),m(_.tipoUsuario==="paciente"?28:-1),o(),m(_.tipoUsuario==="especialista"?29:-1),o(5),m((j=_.registroForm.get("mail"))!=null&&j.hasError("required")?34:-1),o(),m((H=_.registroForm.get("mail"))!=null&&H.hasError("email")?35:-1),o(5),m((G=_.registroForm.get("password"))!=null&&G.hasError("required")?40:-1),o(),m((Z=_.registroForm.get("password"))!=null&&Z.hasError("minlength")?41:-1),o(5),m((W=_.registroForm.get("imagenPerfil"))!=null&&W.hasError("required")?46:-1),o(),m(_.tipoUsuario==="paciente"?47:-1),o(2),C("disabled",_.registroForm.invalid)}}var D=class t{perfilId;cerrar=new L;altaExitosa=new L;registroForm;tipoUsuario=null;obraSocialOptions=Ve;especialidadOptions=[];especialidadesSeleccionadas=new Set;mostrarCampoOtraEspecialidad=!1;desplegableEspecialidadesAbierto=!1;subEspecialidad;fb=V(de);auth=V(pe);snackBar=V(xe);loading=V(z);elementRef=V(K);ngOnInit(){this.initForm()}ngOnDestroy(){this.subEspecialidad?.unsubscribe()}cerrarPopup(){this.cerrar.emit()}initForm(){return h(this,null,function*(){try{this.loading.show(),this.especialidadOptions=yield this.auth.obtenerEspecialidades(),this.registroForm=this.fb.group({nombre:["",[x.required,x.minLength(2),x.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],apellido:["",[x.required,x.minLength(2),x.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],edad:[null,[x.required,x.min(18),x.max(99)]],dni:["",[x.required,x.pattern(/^\d{8}$/)]],obraSocial:[""],mail:["",[x.required,x.email]],password:["",[x.required,x.minLength(7)]],especialidadesSeleccionadas:[[]],nuevaEspecialidad:["",[x.minLength(4),x.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],imagenPerfil:[null,x.required],imagenFondo:[""]})}catch{console.error("Error al cargar especialidades")}finally{this.loading.hide()}})}seleccionarTipo(i){if(this.tipoUsuario=i,!this.registroForm)return;this.especialidadOptions=this.especialidadOptions.filter(d=>d.id>0),this.especialidadesSeleccionadas.clear();let e=this.registroForm.get("obraSocial"),a=this.registroForm.get("especialidadesSeleccionadas"),s=this.registroForm.get("nuevaEspecialidad");i==="paciente"?(e?.setValidators([x.required]),a?.clearValidators(),s?.clearValidators()):i==="especialista"?(e?.clearValidators(),a?.setValidators([this.alMenosUnaEspecialidadValidator()])):i==="admin"&&(this.registroForm.get("obraSocial")?.setValue(""),this.registroForm.get("especialidadesSeleccionadas")?.setValue([]),this.registroForm.get("nuevaEspecialidad")?.setValue(""),this.registroForm.get("imagenFondo")?.setValue(""),this.especialidadesSeleccionadas.clear(),this.mostrarCampoOtraEspecialidad=!1,e?.clearValidators(),a?.clearValidators(),s?.clearValidators()),e?.updateValueAndValidity(),a?.updateValueAndValidity(),s?.updateValueAndValidity()}alMenosUnaEspecialidadValidator(){return i=>{let e=i.value||[],a=this.registroForm?.get("nuevaEspecialidad")?.value;return e.length===0&&!a?{alMenosUna:!0}:null}}toggleEspecialidad(i){this.especialidadesSeleccionadas.has(i)?this.especialidadesSeleccionadas.delete(i):this.especialidadesSeleccionadas.add(i),this.actualizarEspecialidadesEnForm()}toggleMostrarNuevaEspecialidad(){this.mostrarCampoOtraEspecialidad=!this.mostrarCampoOtraEspecialidad,this.mostrarCampoOtraEspecialidad||this.registroForm.get("nuevaEspecialidad")?.setValue("")}normalizarNombre(i){return i=i.trim(),i&&i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()}agregarNuevaEspecialidad(){let i=this.registroForm.get("nuevaEspecialidad"),e=i?.value?.trim();if(!e||i?.invalid){this.snackBar.open("Por favor, ingrese un nombre v\xE1lido para la especialidad.","Cerrar",{duration:3e3});return}let a=this.normalizarNombre(e);if(this.especialidadOptions.some(S=>S.nombre.toLowerCase()===a.toLowerCase())){this.snackBar.open("Esta especialidad ya existe. Por favor, selecci\xF3nela de la lista.","Cerrar",{duration:3e3});return}let d=-(this.especialidadOptions.length+1),A={id:d,nombre:a};this.especialidadOptions.push(A),this.especialidadesSeleccionadas.add(d),this.actualizarEspecialidadesEnForm(),i&&i.setValue(""),this.mostrarCampoOtraEspecialidad=!1,this.snackBar.open(`Especialidad "${a}" agregada y seleccionada.`,"Cerrar",{duration:3e3,panelClass:["bg-green-600","text-white"]})}toggleDesplegableEspecialidades(i){i&&i.stopPropagation(),this.desplegableEspecialidadesAbierto=!this.desplegableEspecialidadesAbierto}onClickOutside(i){if(!this.desplegableEspecialidadesAbierto)return;let e=i.target;this.elementRef.nativeElement.querySelector(".relative")?.contains(e)||(this.desplegableEspecialidadesAbierto=!1)}obtenerEspecialidadesSeleccionadasTexto(){return this.especialidadesSeleccionadas.size===0?"Ninguna seleccionada":Array.from(this.especialidadesSeleccionadas).map(e=>this.especialidadOptions.find(a=>a.id===e)?.nombre).filter(e=>e).join(", ")}esEspecialidadSeleccionada(i){return this.especialidadesSeleccionadas.has(i)}actualizarEspecialidadesEnForm(){let i=Array.from(this.especialidadesSeleccionadas);this.registroForm.get("especialidadesSeleccionadas")?.setValue(i),this.registroForm.get("especialidadesSeleccionadas")?.updateValueAndValidity()}onFileSelected(i,e){let a=e==="perfil"?"imagenPerfil":"imagenFondo",s=i.target,d=this.registroForm.get(a);if(!s.files?.length){d.setValue(null),d.setErrors({required:!0});return}let A=s.files[0];if(!["image/jpeg","image/png","image/jpg"].includes(A.type)){d.setErrors({invalidType:!0});return}d.setValue(A),d.setErrors(null)}registrar(){return h(this,null,function*(){if(!(this.registroForm.invalid||!this.tipoUsuario)){this.loading.show();try{this.tipoUsuario==="paciente"?yield this.handleRegistroPaciente():this.tipoUsuario==="especialista"?yield this.handleRegistroEspecialista():this.tipoUsuario==="admin"&&(yield this.handleRegistroAdmin())}finally{this.loading.hide()}}})}handleRegistroAdmin(){return h(this,null,function*(){try{let i=this.registroForm.value,e=yield P(i.imagenPerfil),a={nombre:i.nombre,apellido:i.apellido,edad:i.edad,dni:i.dni,mail:i.mail,contrasena:i.password,imagenPerfil:e},s=yield this.auth.registerAdmin(a);s.errorCode?.toLowerCase()?.includes("error desconocido")?this.mostrarResultado(s.success,s.message):this.mostrarResultado(s.success,s.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar las im\xE1genes.")}})}handleRegistroPaciente(){return h(this,null,function*(){try{let i=this.registroForm.value,e=yield P(i.imagenPerfil),a=yield P(i.imagenFondo),s={nombre:i.nombre,apellido:i.apellido,edad:i.edad,dni:i.dni,obraSocial:i.obraSocial,mail:i.mail,contrasena:i.password,imagenPerfil:e,imagenFondo:a},d=yield this.auth.registerPaciente(s);d.errorCode?.toLowerCase()?.includes("error desconocido")?this.mostrarResultado(d.success,d.message):this.mostrarResultado(d.success,d.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar las im\xE1genes.")}})}handleRegistroEspecialista(){return h(this,null,function*(){try{let i=this.registroForm.value,e=yield P(i.imagenPerfil),a=[];i.especialidadesSeleccionadas&&i.especialidadesSeleccionadas.length>0&&i.especialidadesSeleccionadas.forEach(S=>{if(S>0)a.push(String(S));else{let I=this.especialidadOptions.find(U=>U.id===S);I&&a.push(I.nombre)}});let s={nombre:i.nombre,apellido:i.apellido,edad:i.edad,dni:i.dni,mail:i.mail,contrasena:i.password,especialidades:a,imagenPerfil:e},d=yield this.auth.registerEspecialista(s);d.errorCode?.toLowerCase()?.includes("error desconocido")?this.mostrarResultado(d.success,d.message):this.mostrarResultado(d.success,d.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar la imagen.")}})}mostrarResultado(i,e){if(!i){this.snackBar.open(e||"Ocurri\xF3 un error.","Cerrar",{duration:4e3,panelClass:["bg-red-600","text-white"]});return}this.tipoUsuario=null,this.altaExitosa.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=M({type:t,selectors:[["app-altas-admin"]],hostBindings:function(e,a){e&1&&u("click",function(d){return a.onClickOutside(d)},Q)},inputs:{perfilId:"perfilId"},outputs:{cerrar:"cerrar",altaExitosa:"altaExitosa"},decls:6,vars:2,consts:[["tabindex","-1","role","dialog","aria-modal","true",1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50","backdrop-blur-sm"],["appClickFueraPopup","","tabindex","0",1,"w-full","max-w-3xl","rounded-2xl","bg-white","px-6","py-1","shadow-xl",3,"clickFuera"],[1,"mt-2","mb-4","text-center","text-4xl","font-bold","text-azul-oscuro"],[1,"space-y-6","p-10","text-center"],[1,"mt-6","grid","grid-cols-1","gap-6","md:grid-cols-2",3,"formGroup"],[1,"text-xl","text-gray-700"],[1,"flex","flex-col","justify-center","gap-6","sm:flex-row"],[1,"rounded-xl","bg-white","px-8","py-4","shadow","transition-transform","hover:scale-105",3,"click"],[1,"text-xl","font-semibold","text-azul-oscuro"],[1,"mt-6","grid","grid-cols-1","gap-6","md:grid-cols-2",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","nombre"],["matInput","","formControlName","apellido"],["matInput","","type","number","formControlName","edad"],["matInput","","formControlName","dni"],[1,"col-span-2"],["matInput","","type","email","formControlName","mail"],["matInput","","type","password","formControlName","password"],[1,"md:col-span-2"],["for","imagenPerfilAdmin",1,"block","text-sm","font-medium","text-gray-700"],["id","imagenPerfilAdmin","type","file","accept","image/*",1,"register-input",3,"change"],[1,"flex","justify-center","pt-2","md:col-span-2"],["mat-raised-button","","color","primary","type","submit",1,"rounded-full","bg-verde-oscuro","px-6","py-2","text-white","shadow",3,"disabled"],[1,"text-center","md:col-span-2"],["mat-button","","type","button",1,"text-sm","text-gray-600","underline",3,"click"],["formControlName","obraSocial"],[3,"value"],[1,"mb-1","text-sm","font-medium","text-azul-oscuro"],[1,"relative"],["tabindex","0",1,"flex","min-h-[56px]","cursor-pointer","items-center","rounded-md","border","border-gray-300","bg-white","px-4","py-3","transition-colors","hover:border-azul-oscuro",3,"click","keyup.enter","keyup.space"],[1,"flex-1","text-sm","text-gray-700"],[1,"text-gray-500"],[1,"absolute","top-full","right-0","left-0","z-10","mt-1","overflow-y-auto","rounded-lg","border","border-gray-300","bg-white","p-3","shadow-lg","transition-all","duration-300",3,"max-h-60","max-h-96"],[1,"mt-1","text-sm","text-red-600"],[1,"absolute","top-full","right-0","left-0","z-10","mt-1","overflow-y-auto","rounded-lg","border","border-gray-300","bg-white","p-3","shadow-lg","transition-all","duration-300"],[1,"space-y-2"],[1,"block","text-sm",3,"checked"],[1,"mt-3","border-t","pt-2"],["type","button","mat-button","",1,"w-full","text-left","text-sm","text-azul-oscuro",3,"click"],[1,"mt-2","space-y-2"],[1,"block","text-sm",3,"change","checked"],["formControlName","nuevaEspecialidad","placeholder","Nombre de la especialidad",1,"w-full","rounded","border","border-gray-300","px-3","py-2","text-sm","focus:border-azul-oscuro","focus:outline-none",3,"click","keyup.enter"],[1,"text-xs","text-red-600"],["type","button","mat-raised-button","","color","primary",1,"w-full","text-sm",3,"click","disabled"],["for","imagenFondoAdmin",1,"block","text-sm","font-medium","text-gray-700"],["id","imagenFondoAdmin","type","file","accept","image/*",1,"register-input",3,"change"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"div",1),u("clickFuera",function(){return a.cerrarPopup()}),n(2,"h2",2),l(3," Alta "),r(),c(4,Me,13,0,"div",3),c(5,di,54,21,"form",4),r()()),e&2&&(o(4),m(!a.tipoUsuario&&a.registroForm?4:-1),o(),m(a.tipoUsuario&&a.registroForm?5:-1))},dependencies:[ce,re,te,oe,ae,ne,me,le,se,Ee,be,ve,Ce,Ae,he,we,ye,Se,ge,fe,ie,ee,ke,Fe,Te],styles:[".register-input[_ngcontent-%COMP%]{padding:12px 20px;margin:10px 0;border:2px solid #333;border-radius:6px;background-color:#222;color:#fff;font-size:16px;cursor:pointer;transition:all .3s ease}.register-input[_ngcontent-%COMP%]:hover{border-color:#92cc34;background-color:#2c2c2c}.register-input[_ngcontent-%COMP%]:focus{border-color:#19b44d;background-color:#2c2c2c;outline:none}.register-input[_ngcontent-%COMP%]::-webkit-file-upload-button{background-color:#fff;color:#fff;padding:8px 15px;border-radius:4px;border:none;cursor:pointer;font-size:14px;transition:background-color .3s ease}"]})};function ci(t,i){if(t&1){let e=E();n(0,"app-altas-admin",8),u("cerrar",function(){f(e);let s=p();return g(s.cerrarPopupAltas())})("altaExitosa",function(){f(e);let s=p();return g(s.onAltaExitosa())}),r()}}function mi(t,i){if(t&1&&b(0,"img",10),t&2){let e=p().$implicit;C("src",e.urlImagenPerfil,O)}}function pi(t,i){if(t&1&&(n(0,"div",9),c(1,mi,1,1,"img",10),n(2,"div",11)(3,"p",12),l(4),r(),n(5,"p",13),l(6),r(),n(7,"p"),l(8),r(),n(9,"p"),l(10),r(),n(11,"p"),l(12," Email verificado: "),n(13,"span",14),l(14),r()()()()),t&2){let e=i.$implicit;o(),m(e.urlImagenPerfil?1:-1),o(3),N(" ",e.nombre," ",e.apellido," "),o(2),T(e.email),o(2),v("DNI: ",e.dni),o(2),v("Edad: ",e.edad),o(3),C("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),o(),v(" ",e.emailVerificado?"Verificado":"Sin Verificar"," ")}}function ui(t,i){if(t&1&&(n(0,"div",7),w(1,pi,15,8,"div",9,y),r()),t&2){let e=p();o(),F(e.pacientes)}}function _i(t,i){if(t&1&&b(0,"img",10),t&2){let e=p().$implicit;C("src",e.urlImagenPerfil,O)}}function fi(t,i){if(t&1){let e=E();n(0,"div",9),c(1,_i,1,1,"img",10),n(2,"div",11)(3,"p",12),l(4),r(),n(5,"p",13),l(6),r(),n(7,"p"),l(8),r(),n(9,"p"),l(10),r(),n(11,"p"),l(12," Email verificado: "),n(13,"span",14),l(14),r()(),n(15,"p"),l(16," Estado: "),n(17,"span",14),l(18),r()()(),n(19,"button",15),u("click",function(){let s=f(e).$implicit,d=p(2);return g(d.toggleValidadoAdmin(s))}),l(20),r()()}if(t&2){let e=i.$implicit;o(),m(e.urlImagenPerfil?1:-1),o(3),N(" ",e.nombre," ",e.apellido," "),o(2),T(e.email),o(2),v("DNI: ",e.dni),o(2),v("Edad: ",e.edad),o(3),C("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),o(),v(" ",e.emailVerificado?"Verificado":"Sin Verificar"," "),o(3),C("ngClass",e.validadoAdmin?"text-verde-oscuro":"text-red-600"),o(),v(" ",e.validadoAdmin?"Habilitado":"Inhabilitado"," "),o(2),v(" ",e.validadoAdmin?"Deshabilitar":"Habilitar"," ")}}function gi(t,i){if(t&1&&(n(0,"div",7),w(1,fi,21,11,"div",9,y),r()),t&2){let e=p();o(),F(e.especialistas)}}function xi(t,i){if(t&1&&b(0,"img",10),t&2){let e=p().$implicit;C("src",e.urlImagenPerfil,O)}}function vi(t,i){if(t&1&&(n(0,"div",9),c(1,xi,1,1,"img",10),n(2,"div",11)(3,"p",12),l(4),r(),n(5,"p",13),l(6),r(),n(7,"p"),l(8),r(),n(9,"p"),l(10),r(),n(11,"p"),l(12," Email verificado: "),n(13,"span",14),l(14),r()()()()),t&2){let e=i.$implicit;o(),m(e.urlImagenPerfil?1:-1),o(3),N(" ",e.nombre," ",e.apellido," "),o(2),T(e.email),o(2),v("DNI: ",e.dni),o(2),v("Edad: ",e.edad),o(3),C("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),o(),v(" ",e.emailVerificado?"Verificado":"Sin Verificar"," ")}}function Ci(t,i){if(t&1&&(n(0,"div",7),w(1,vi,15,8,"div",9,y),r()),t&2){let e=p();o(),F(e.administradores)}}var Pe=class t{constructor(i,e){this.usuariosService=i;this.loading=e}solapaActiva="pacientes";pacientes=[];especialistas=[];administradores=[];usuarioSeleccionado=null;destroy$=new J;mostrarPopupAltas=!1;ngOnInit(){this.recargarUsuarios(),this.loading.hide()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}recargarUsuarios(){return h(this,null,function*(){let i=yield this.usuariosService.obtenerTodosUsuarios();this.pacientes=i.filter(e=>e.rol==="paciente"),this.especialistas=i.filter(e=>e.rol==="especialista"),this.administradores=i.filter(e=>e.rol==="admin")})}seleccionarUsuario(i){this.usuarioSeleccionado=i}toggleValidadoAdmin(i){return h(this,null,function*(){if(i.rol!=="especialista")return;let e=!i.validadoAdmin;(yield this.usuariosService.actualizarEstadoEspecialista(i.id,e))&&(i.validadoAdmin=e,yield this.recargarUsuarios())})}abrirPopupAltas(){this.mostrarPopupAltas=!0}cerrarPopupAltas(){this.mostrarPopupAltas=!1}onAltaExitosa(){return h(this,null,function*(){yield this.recargarUsuarios(),this.cerrarPopupAltas()})}static \u0275fac=function(e){return new(e||t)(R(Ie),R(z))};static \u0275cmp=M({type:t,selectors:[["app-usuarios"]],decls:18,vars:22,consts:[[1,"h-full","w-full","p-1"],[1,"h-full","w-full","overflow-auto","rounded-2xl","border","border-white","bg-crema","p-6","pb-6","shadow-inner"],[1,"flex","flex-wrap","items-center","justify-between","pb-7"],[1,"flex","flex-wrap","gap-2"],[1,"px-4","py-2","font-semibold","text-gray-600","hover:text-azul-oscuro",3,"click"],[1,"mr-10"],[1,"btn","btn-primary","h-12","rounded-2xl","bg-azul-oscuro","px-6","py-2","text-base","text-white","transition-all","duration-50","hover:bg-azul-claro","hover:text-lg",3,"click"],[1,"grid","justify-center","gap-x-1","gap-y-3",2,"grid-template-columns","repeat(auto-fill, minmax(300px, 1fr))"],[3,"cerrar","altaExitosa"],[1,"w-full","rounded-lg","border","border-gray-300","bg-white","p-4","shadow-sm"],["alt","Avatar","appTrackImage","",1,"mb-2","h-14","w-14","rounded-full","object-cover",3,"src"],[1,"text-sm"],[1,"font-semibold","text-azul-oscuro"],[1,"text-gray-600"],[3,"ngClass"],[1,"mt-2","w-full","rounded","bg-azul-claro","px-3","py-1","text-sm","text-white","hover:bg-azul-oscuro",3,"click"]],template:function(e,a){e&1&&(n(0,"app-loading-wrapper")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"button",4),u("click",function(){return a.solapaActiva="pacientes"}),l(6," Pacientes "),r(),n(7,"button",4),u("click",function(){return a.solapaActiva="especialistas"}),l(8," Especialistas "),r(),n(9,"button",4),u("click",function(){return a.solapaActiva="administradores"}),l(10," Administradores "),r()(),n(11,"div",5)(12,"button",6),u("click",function(){return a.abrirPopupAltas()}),l(13," Dar Alta Usuario "),r()()(),c(14,ci,1,0,"app-altas-admin"),c(15,ui,3,0,"div",7),c(16,gi,3,0,"div",7),c(17,Ci,3,0,"div",7),r()()()),e&2&&(o(5),k("border-b-2",a.solapaActiva==="pacientes")("border-azul-oscuro",a.solapaActiva==="pacientes")("text-azul-oscuro",a.solapaActiva==="pacientes"),o(2),k("border-b-2",a.solapaActiva==="especialistas")("border-azul-oscuro",a.solapaActiva==="especialistas")("text-azul-oscuro",a.solapaActiva==="especialistas"),o(2),k("border-b-2",a.solapaActiva==="administradores")("border-azul-oscuro",a.solapaActiva==="administradores")("text-azul-oscuro",a.solapaActiva==="administradores"),o(5),m(a.mostrarPopupAltas?14:-1),o(),m(a.solapaActiva==="pacientes"?15:-1),o(),m(a.solapaActiva==="especialistas"?16:-1),o(),m(a.solapaActiva==="administradores"?17:-1))},dependencies:[Y,X,D,ue,_e],encapsulation:2})};export{Pe as Usuarios};

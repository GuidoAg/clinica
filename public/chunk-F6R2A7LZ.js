import{g as M,l as S}from"./chunk-V3F5M33P.js";import{Ab as b,Db as I,Eb as L,Ka as p,Pa as l,T as m,Va as d,Xa as g,Y as r,_a as f,g as s,nb as o,ob as u,pb as v,qa as c,qb as h}from"./chunk-PO4THZAS.js";var n=class t{imageMap=new Map;loadingCount=0;loading$=new s(!1);get isLoading$(){return this.loading$.asObservable()}registerImage(e){this.imageMap.has(e)||(this.imageMap.set(e,!1),this.loadingCount++,this.emitStatus())}markLoaded(e){this.imageMap.has(e)&&!this.imageMap.get(e)&&(this.imageMap.set(e,!0),this.loadingCount--,this.emitStatus())}emitStatus(){this.loading$.next(this.loadingCount>0)}reset(){this.imageMap.clear(),this.loadingCount=0,this.loading$.next(!1)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})};var E=class t{constructor(e){this.el=e;this.imageService.registerImage(this.el.nativeElement)}imageService=r(n);onLoad(){this.imageService.markLoaded(this.el.nativeElement)}onError(){this.imageService.markLoaded(this.el.nativeElement)}static \u0275fac=function(i){return new(i||t)(l(c))};static \u0275dir=g({type:t,selectors:[["img","TrackImage",""]],hostBindings:function(i,a){i&1&&b("load",function(){return a.onLoad()})("error",function(){return a.onError()})}})};var j=["*"];function C(t,e){t&1&&(u(0,"div",2),h(1,"div",3),v())}function H(t,e){t&1&&L(0,0,["*ngIf","!loading"])}var k=class t{imageService=r(n);sub;loading=!0;ngOnInit(){this.sub=this.imageService.isLoading$.subscribe(e=>{this.loading=e})}ngOnDestroy(){this.sub?.unsubscribe(),this.imageService.reset()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=d({type:t,selectors:[["app-loading-wrapper"]],ngContentSelectors:j,decls:2,vars:2,consts:[["class","fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",4,"ngIf"],[4,"ngIf"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/30","backdrop-blur-sm"],[1,"h-20","w-20","animate-spin","rounded-full","border-4","border-blue-600","border-t-transparent"]],template:function(i,a){i&1&&(I(),f(0,C,2,0,"div",0)(1,H,1,0,"ng-content",1)),i&2&&(o("ngIf",a.loading),p(),o("ngIf",!a.loading))},dependencies:[S,M],encapsulation:2})};export{E as a,k as b};

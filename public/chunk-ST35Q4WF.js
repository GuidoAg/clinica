import{a as Ie}from"./chunk-R7XW6IVE.js";import{a as Se,b as ye,c as we,d as Fe,e as Ve,f as Te}from"./chunk-ORNE3K7H.js";import{a as ke}from"./chunk-EVSMGOY5.js";import{a as ue,b as _e}from"./chunk-2R7LN7ZU.js";import"./chunk-75QZAIKX.js";import{a as ve,b as Ce,f as be,i as Ee,j as he,k as Ae}from"./chunk-42WLO5Z2.js";import{f as fe,g as ge,n as xe}from"./chunk-ZTAJVVXQ.js";import{a as O}from"./chunk-QYWCDNK3.js";import{b as I,c as pe}from"./chunk-NSHH6JJ5.js";import"./chunk-X5YLR3NI.js";import"./chunk-Q4YNZBQ2.js";import{f as ee,g as ie}from"./chunk-DHRKF7SU.js";import{c as te,e as f,g as ae,h as ne,k as oe,l as re,n as le,o as se,v as de,w as ce,x as me}from"./chunk-T6NMK5EM.js";import"./chunk-HICRNNMR.js";import{e as X,k as Y}from"./chunk-M3XRSK3P.js";import{Db as _,Fb as p,Ma as P,Na as Q,Oa as r,Rb as V,Ta as z,Tb as l,Ub as T,Vb as v,Wb as M,Z as F,Za as U,ca as g,da as x,eb as D,f as J,nb as c,ob as m,pb as S,qb as y,rb as w,sa as K,sb as C,tb as n,ub as a,vb as b,zb as E}from"./chunk-7RTQA4J5.js";import{i as h}from"./chunk-ODN5LVDJ.js";function Oe(t,i){if(t&1){let e=E();n(0,"div",3)(1,"p",5),l(2,"Seleccionar tipo usuario para alta"),a(),n(3,"div",6)(4,"button",7),_("click",function(){g(e);let s=p();return x(s.seleccionarTipo("paciente"))}),n(5,"span",8),l(6,"Paciente"),a()(),n(7,"button",7),_("click",function(){g(e);let s=p();return x(s.seleccionarTipo("especialista"))}),n(8,"span",8),l(9,"Especialista"),a()(),n(10,"button",7),_("click",function(){g(e);let s=p();return x(s.seleccionarTipo("admin"))}),n(11,"span",8),l(12,"Admin"),a()()()()}}function Ne(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),a())}function ze(t,i){t&1&&(n(0,"mat-error"),l(1," M\xEDnimo 2 caracteres "),a())}function De(t,i){t&1&&(n(0,"mat-error"),l(1," Solo letras "),a())}function Re(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),a())}function qe(t,i){t&1&&(n(0,"mat-error"),l(1," M\xEDnimo 2 caracteres "),a())}function Le(t,i){t&1&&(n(0,"mat-error"),l(1," Solo letras "),a())}function $e(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),a())}function Be(t,i){t&1&&(n(0,"mat-error"),l(1," M\xEDnimo 18 "),a())}function je(t,i){t&1&&(n(0,"mat-error"),l(1," M\xE1ximo 99 "),a())}function He(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),a())}function Ge(t,i){t&1&&(n(0,"mat-error"),l(1," Debe contener 8 d\xEDgitos "),a())}function Ze(t,i){if(t&1&&(n(0,"mat-option",26),l(1),a()),t&2){let e=i.$implicit;C("value",e),r(),v(" ",e," ")}}function We(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),a())}function Je(t,i){if(t&1&&(n(0,"mat-form-field",10)(1,"mat-label"),l(2,"Obra Social"),a(),n(3,"mat-select",25),y(4,Ze,2,2,"mat-option",26,S),a(),c(6,We,2,0,"mat-error"),a()),t&2){let e,o=p(2);r(4),w(o.obraSocialOptions),r(2),m((e=o.registroForm.get("obraSocial"))!=null&&e.hasError("required")?6:-1)}}function Ke(t,i){if(t&1){let e=E();n(0,"mat-checkbox",39),_("change",function(){let s=g(e).$implicit,d=p(4);return x(d.toggleEspecialidad(s.id))}),l(1),a()}if(t&2){let e=i.$implicit,o=p(4);C("checked",o.esEspecialidadSeleccionada(e.id)),r(),v(" ",e.nombre," ")}}function Qe(t,i){t&1&&(n(0,"div",41),l(1,"M\xEDnimo 2 caracteres"),a())}function Xe(t,i){t&1&&(n(0,"div",41),l(1," Solo letras y espacios "),a())}function Ye(t,i){if(t&1){let e=E();n(0,"div",38)(1,"input",40),_("click",function(s){return g(e),x(s.stopPropagation())}),a(),c(2,Qe,2,0,"div",41),c(3,Xe,2,0,"div",41),a()}if(t&2){let e,o,s=p(4);r(2),m((e=s.registroForm.get("nuevaEspecialidad"))!=null&&e.hasError("minlength")?2:-1),r(),m((o=s.registroForm.get("nuevaEspecialidad"))!=null&&o.hasError("pattern")?3:-1)}}function ei(t,i){if(t&1){let e=E();n(0,"div",32)(1,"div",34),y(2,Ke,2,2,"mat-checkbox",35,S),a(),n(4,"div",36)(5,"button",37),_("click",function(s){return g(e),p(3).toggleMostrarNuevaEspecialidad(),x(s.stopPropagation())}),l(6),a(),c(7,Ye,4,2,"div",38),a()()}if(t&2){let e=p(3);r(2),w(e.especialidadOptions),r(4),v(" ",e.mostrarCampoOtraEspecialidad?"\u2715 Cancelar":"+ Agregar nueva especialidad"," "),r(),m(e.mostrarCampoOtraEspecialidad?7:-1)}}function ii(t,i){t&1&&(n(0,"div",33),l(1," Deb\xE9s seleccionar al menos una especialidad o agregar una nueva "),a())}function ti(t,i){if(t&1){let e=E();n(0,"div",15)(1,"div",27),l(2," Especialidades (seleccion\xE1 al menos una) "),a(),n(3,"div",28)(4,"div",29),_("click",function(s){g(e);let d=p(2);return x(d.toggleDesplegableEspecialidades(s))})("keyup.enter",function(s){g(e);let d=p(2);return x(d.toggleDesplegableEspecialidades(s))})("keyup.space",function(s){g(e);let d=p(2);return x(d.toggleDesplegableEspecialidades(s))}),n(5,"span",30),l(6),a(),n(7,"mat-icon",31),l(8),a()(),c(9,ei,8,2,"div",32),a(),c(10,ii,2,0,"div",33),a()}if(t&2){let e,o=p(2);r(4),V("border-azul-oscuro",o.desplegableEspecialidadesAbierto),r(2),v(" ",o.obtenerEspecialidadesSeleccionadasTexto()," "),r(2),T(o.desplegableEspecialidadesAbierto?"expand_less":"expand_more"),r(),m(o.desplegableEspecialidadesAbierto?9:-1),r(),m((e=o.registroForm.get("especialidadesSeleccionadas"))!=null&&e.hasError("alMenosUna")&&((e=o.registroForm.get("especialidadesSeleccionadas"))!=null&&e.touched)?10:-1)}}function ai(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),a())}function ni(t,i){t&1&&(n(0,"mat-error"),l(1," Email inv\xE1lido "),a())}function oi(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),a())}function ri(t,i){t&1&&(n(0,"mat-error"),l(1," M\xEDnimo 7 caracteres "),a())}function li(t,i){t&1&&(n(0,"mat-error"),l(1," Campo obligatorio "),a())}function si(t,i){if(t&1){let e=E();n(0,"div",18)(1,"label",42),l(2,"Imagen de fondo"),a(),n(3,"input",43),_("change",function(s){g(e);let d=p(2);return x(d.onFileSelected(s,"fondo"))}),a()()}}function di(t,i){if(t&1){let e=E();n(0,"form",9),_("ngSubmit",function(){g(e);let s=p();return x(s.registrar())}),n(1,"mat-form-field",10)(2,"mat-label"),l(3,"Nombre"),a(),b(4,"input",11),c(5,Ne,2,0,"mat-error"),c(6,ze,2,0,"mat-error"),c(7,De,2,0,"mat-error"),a(),n(8,"mat-form-field",10)(9,"mat-label"),l(10,"Apellido"),a(),b(11,"input",12),c(12,Re,2,0,"mat-error"),c(13,qe,2,0,"mat-error"),c(14,Le,2,0,"mat-error"),a(),n(15,"mat-form-field",10)(16,"mat-label"),l(17,"Edad"),a(),b(18,"input",13),c(19,$e,2,0,"mat-error"),c(20,Be,2,0,"mat-error"),c(21,je,2,0,"mat-error"),a(),n(22,"mat-form-field",10)(23,"mat-label"),l(24,"DNI"),a(),b(25,"input",14),c(26,He,2,0,"mat-error"),c(27,Ge,2,0,"mat-error"),a(),c(28,Je,7,1,"mat-form-field",10),c(29,ti,11,6,"div",15),n(30,"mat-form-field",10)(31,"mat-label"),l(32,"Email"),a(),b(33,"input",16),c(34,ai,2,0,"mat-error"),c(35,ni,2,0,"mat-error"),a(),n(36,"mat-form-field",10)(37,"mat-label"),l(38,"Contrase\xF1a"),a(),b(39,"input",17),c(40,oi,2,0,"mat-error"),c(41,ri,2,0,"mat-error"),a(),n(42,"div",18)(43,"label",19),l(44,"Imagen de perfil"),a(),n(45,"input",20),_("change",function(s){g(e);let d=p();return x(d.onFileSelected(s,"perfil"))}),a(),c(46,li,2,0,"mat-error"),a(),c(47,si,4,0,"div",18),n(48,"div",21)(49,"button",22),l(50," Registrar "),a()(),n(51,"div",23)(52,"button",24),_("click",function(){g(e);let s=p();return x(s.tipoUsuario=null)}),l(53," Cambiar tipo de usuario "),a()()()}if(t&2){let e,o,s,d,A,k,R,q,L,$,B,j,H,G,Z,W,u=p();C("formGroup",u.registroForm),r(5),m((e=u.registroForm.get("nombre"))!=null&&e.hasError("required")?5:-1),r(),m((o=u.registroForm.get("nombre"))!=null&&o.hasError("minlength")?6:-1),r(),m((s=u.registroForm.get("nombre"))!=null&&s.hasError("pattern")?7:-1),r(5),m((d=u.registroForm.get("apellido"))!=null&&d.hasError("required")?12:-1),r(),m((A=u.registroForm.get("apellido"))!=null&&A.hasError("minlength")?13:-1),r(),m((k=u.registroForm.get("apellido"))!=null&&k.hasError("pattern")?14:-1),r(5),m((R=u.registroForm.get("edad"))!=null&&R.hasError("required")?19:-1),r(),m((q=u.registroForm.get("edad"))!=null&&q.hasError("min")?20:-1),r(),m((L=u.registroForm.get("edad"))!=null&&L.hasError("max")?21:-1),r(5),m(($=u.registroForm.get("dni"))!=null&&$.hasError("required")?26:-1),r(),m((B=u.registroForm.get("dni"))!=null&&B.hasError("pattern")?27:-1),r(),m(u.tipoUsuario==="paciente"?28:-1),r(),m(u.tipoUsuario==="especialista"?29:-1),r(5),m((j=u.registroForm.get("mail"))!=null&&j.hasError("required")?34:-1),r(),m((H=u.registroForm.get("mail"))!=null&&H.hasError("email")?35:-1),r(5),m((G=u.registroForm.get("password"))!=null&&G.hasError("required")?40:-1),r(),m((Z=u.registroForm.get("password"))!=null&&Z.hasError("minlength")?41:-1),r(5),m((W=u.registroForm.get("imagenPerfil"))!=null&&W.hasError("required")?46:-1),r(),m(u.tipoUsuario==="paciente"?47:-1),r(2),C("disabled",u.registroForm.invalid)}}var N=class t{perfilId;cerrar=new D;altaExitosa=new D;registroForm;tipoUsuario=null;obraSocialOptions=Te;especialidadOptions=[];especialidadesSeleccionadas=new Set;mostrarCampoOtraEspecialidad=!1;desplegableEspecialidadesAbierto=!1;subEspecialidad;fb=F(de);auth=F(pe);snackBar=F(xe);loading=F(O);elementRef=F(K);ngOnInit(){this.initForm()}ngOnDestroy(){this.subEspecialidad?.unsubscribe()}cerrarPopup(){this.cerrar.emit()}initForm(){return h(this,null,function*(){try{this.loading.show(),this.especialidadOptions=yield this.auth.obtenerEspecialidades(),this.registroForm=this.fb.group({nombre:["",[f.required,f.minLength(2),f.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],apellido:["",[f.required,f.minLength(2),f.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],edad:[null,[f.required,f.min(18),f.max(99)]],dni:["",[f.required,f.pattern(/^\d{8}$/)]],obraSocial:[""],mail:["",[f.required,f.email]],password:["",[f.required,f.minLength(7)]],especialidadesSeleccionadas:[[]],nuevaEspecialidad:["",[f.minLength(2),f.pattern(/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/)]],imagenPerfil:[null,f.required],imagenFondo:[""]})}catch{console.error("Error al cargar especialidades")}finally{this.loading.hide()}})}seleccionarTipo(i){if(this.tipoUsuario=i,!this.registroForm)return;let e=this.registroForm.get("obraSocial"),o=this.registroForm.get("especialidadesSeleccionadas"),s=this.registroForm.get("nuevaEspecialidad");i==="paciente"?(e?.setValidators([f.required]),o?.clearValidators(),s?.clearValidators()):i==="especialista"?(e?.clearValidators(),o?.setValidators([this.alMenosUnaEspecialidadValidator()])):i==="admin"&&(this.registroForm.get("obraSocial")?.setValue(""),this.registroForm.get("especialidadesSeleccionadas")?.setValue([]),this.registroForm.get("nuevaEspecialidad")?.setValue(""),this.registroForm.get("imagenFondo")?.setValue(""),this.especialidadesSeleccionadas.clear(),this.mostrarCampoOtraEspecialidad=!1,e?.clearValidators(),o?.clearValidators(),s?.clearValidators()),e?.updateValueAndValidity(),o?.updateValueAndValidity(),s?.updateValueAndValidity()}alMenosUnaEspecialidadValidator(){return i=>{let e=i.value||[],o=this.registroForm?.get("nuevaEspecialidad")?.value;return e.length===0&&!o?{alMenosUna:!0}:null}}toggleEspecialidad(i){this.especialidadesSeleccionadas.has(i)?this.especialidadesSeleccionadas.delete(i):this.especialidadesSeleccionadas.add(i),this.actualizarEspecialidadesEnForm()}toggleMostrarNuevaEspecialidad(){this.mostrarCampoOtraEspecialidad=!this.mostrarCampoOtraEspecialidad,this.mostrarCampoOtraEspecialidad||this.registroForm.get("nuevaEspecialidad")?.setValue("")}toggleDesplegableEspecialidades(i){i&&i.stopPropagation(),this.desplegableEspecialidadesAbierto=!this.desplegableEspecialidadesAbierto}onClickOutside(i){if(!this.desplegableEspecialidadesAbierto)return;let e=i.target;this.elementRef.nativeElement.querySelector(".relative")?.contains(e)||(this.desplegableEspecialidadesAbierto=!1)}obtenerEspecialidadesSeleccionadasTexto(){return this.especialidadesSeleccionadas.size===0?"Ninguna seleccionada":Array.from(this.especialidadesSeleccionadas).map(e=>this.especialidadOptions.find(o=>o.id===e)?.nombre).filter(e=>e).join(", ")}esEspecialidadSeleccionada(i){return this.especialidadesSeleccionadas.has(i)}actualizarEspecialidadesEnForm(){let i=Array.from(this.especialidadesSeleccionadas);this.registroForm.get("especialidadesSeleccionadas")?.setValue(i),this.registroForm.get("especialidadesSeleccionadas")?.updateValueAndValidity()}onFileSelected(i,e){let o=e==="perfil"?"imagenPerfil":"imagenFondo",s=i.target,d=this.registroForm.get(o);if(!s.files?.length){d.setValue(null),d.setErrors({required:!0});return}let A=s.files[0];if(!["image/jpeg","image/png","image/jpg"].includes(A.type)){d.setErrors({invalidType:!0});return}d.setValue(A),d.setErrors(null)}registrar(){return h(this,null,function*(){if(!(this.registroForm.invalid||!this.tipoUsuario)){this.loading.show();try{this.tipoUsuario==="paciente"?yield this.handleRegistroPaciente():this.tipoUsuario==="especialista"?yield this.handleRegistroEspecialista():this.tipoUsuario==="admin"&&(yield this.handleRegistroAdmin())}finally{this.loading.hide()}}})}handleRegistroAdmin(){return h(this,null,function*(){try{let i=this.registroForm.value,e=yield I(i.imagenPerfil),o={nombre:i.nombre,apellido:i.apellido,edad:i.edad,dni:i.dni,mail:i.mail,contrasena:i.password,imagenPerfil:e},s=yield this.auth.registerAdmin(o);s.errorCode?.toLowerCase()?.includes("error desconocido")?this.mostrarResultado(s.success,s.message):this.mostrarResultado(s.success,s.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar las im\xE1genes.")}})}handleRegistroPaciente(){return h(this,null,function*(){try{let i=this.registroForm.value,e=yield I(i.imagenPerfil),o=yield I(i.imagenFondo),s={nombre:i.nombre,apellido:i.apellido,edad:i.edad,dni:i.dni,obraSocial:i.obraSocial,mail:i.mail,contrasena:i.password,imagenPerfil:e,imagenFondo:o},d=yield this.auth.registerPaciente(s);d.errorCode?.toLowerCase()?.includes("error desconocido")?this.mostrarResultado(d.success,d.message):this.mostrarResultado(d.success,d.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar las im\xE1genes.")}})}handleRegistroEspecialista(){return h(this,null,function*(){try{let i=this.registroForm.value,e=yield I(i.imagenPerfil),o=[];i.especialidadesSeleccionadas&&i.especialidadesSeleccionadas.length>0&&o.push(...i.especialidadesSeleccionadas.map(k=>String(k))),i.nuevaEspecialidad&&i.nuevaEspecialidad.trim()&&o.push(i.nuevaEspecialidad.trim());let s={nombre:i.nombre,apellido:i.apellido,edad:i.edad,dni:i.dni,mail:i.mail,contrasena:i.password,especialidades:o,imagenPerfil:e},d=yield this.auth.registerEspecialista(s);d.errorCode?.toLowerCase()?.includes("error desconocido")?this.mostrarResultado(d.success,d.message):this.mostrarResultado(d.success,d.errorCode)}catch{this.mostrarResultado(!1,"Error al procesar la imagen.")}})}mostrarResultado(i,e){if(!i){this.snackBar.open(e||"Ocurri\xF3 un error.","Cerrar",{duration:4e3,panelClass:["bg-red-600","text-white"]});return}this.tipoUsuario=null,this.altaExitosa.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=U({type:t,selectors:[["app-altas-admin"]],hostBindings:function(e,o){e&1&&_("click",function(d){return o.onClickOutside(d)},Q)},inputs:{perfilId:"perfilId"},outputs:{cerrar:"cerrar",altaExitosa:"altaExitosa"},decls:6,vars:2,consts:[["tabindex","-1","role","dialog","aria-modal","true",1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50","backdrop-blur-sm"],["appClickFueraPopup","","tabindex","0",1,"w-full","max-w-3xl","rounded-2xl","bg-white","px-6","py-1","shadow-xl",3,"clickFuera"],[1,"mt-2","mb-4","text-center","text-4xl","font-bold","text-azul-oscuro"],[1,"space-y-6","p-10","text-center"],[1,"mt-6","grid","grid-cols-1","gap-6","md:grid-cols-2",3,"formGroup"],[1,"text-xl","text-gray-700"],[1,"flex","flex-col","justify-center","gap-6","sm:flex-row"],[1,"rounded-xl","bg-white","px-8","py-4","shadow","transition-transform","hover:scale-105",3,"click"],[1,"text-xl","font-semibold","text-azul-oscuro"],[1,"mt-6","grid","grid-cols-1","gap-6","md:grid-cols-2",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","nombre"],["matInput","","formControlName","apellido"],["matInput","","type","number","formControlName","edad"],["matInput","","formControlName","dni"],[1,"col-span-2"],["matInput","","type","email","formControlName","mail"],["matInput","","type","password","formControlName","password"],[1,"md:col-span-2"],["for","imagenPerfilAdmin",1,"block","text-sm","font-medium","text-gray-700"],["id","imagenPerfilAdmin","type","file","accept","image/*",1,"register-input",3,"change"],[1,"flex","justify-center","pt-2","md:col-span-2"],["mat-raised-button","","color","primary","type","submit",1,"rounded-full","bg-verde-oscuro","px-6","py-2","text-white","shadow",3,"disabled"],[1,"text-center","md:col-span-2"],["mat-button","","type","button",1,"text-sm","text-gray-600","underline",3,"click"],["formControlName","obraSocial"],[3,"value"],[1,"mb-1","text-sm","font-medium","text-azul-oscuro"],[1,"relative"],["tabindex","0",1,"flex","min-h-[56px]","cursor-pointer","items-center","rounded-md","border","border-gray-300","bg-white","px-4","py-3","transition-colors","hover:border-azul-oscuro",3,"click","keyup.enter","keyup.space"],[1,"flex-1","text-sm","text-gray-700"],[1,"text-gray-500"],[1,"absolute","top-full","right-0","left-0","z-10","mt-1","max-h-60","overflow-y-auto","rounded-lg","border","border-gray-300","bg-white","p-3","shadow-lg"],[1,"mt-1","text-sm","text-red-600"],[1,"space-y-2"],[1,"block","text-sm",3,"checked"],[1,"mt-3","border-t","pt-2"],["type","button","mat-button","",1,"w-full","text-left","text-sm","text-azul-oscuro",3,"click"],[1,"mt-2"],[1,"block","text-sm",3,"change","checked"],["formControlName","nuevaEspecialidad","placeholder","Nombre de la especialidad",1,"w-full","rounded","border","border-gray-300","px-3","py-2","text-sm","focus:border-azul-oscuro","focus:outline-none",3,"click"],[1,"mt-1","text-xs","text-red-600"],["for","imagenFondoAdmin",1,"block","text-sm","font-medium","text-gray-700"],["id","imagenFondoAdmin","type","file","accept","image/*",1,"register-input",3,"change"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1),_("clickFuera",function(){return o.cerrarPopup()}),n(2,"h2",2),l(3," Alta "),a(),c(4,Oe,13,0,"div",3),c(5,di,54,21,"form",4),a()()),e&2&&(r(4),m(!o.tipoUsuario&&o.registroForm?4:-1),r(),m(o.tipoUsuario&&o.registroForm?5:-1))},dependencies:[ce,oe,te,re,ae,ne,me,le,se,Ee,be,ve,Ce,Ae,he,we,ye,Se,ge,fe,ie,ee,Ve,Fe,ke],styles:[".register-input[_ngcontent-%COMP%]{padding:12px 20px;margin:10px 0;border:2px solid #333;border-radius:6px;background-color:#222;color:#fff;font-size:16px;cursor:pointer;transition:all .3s ease}.register-input[_ngcontent-%COMP%]:hover{border-color:#92cc34;background-color:#2c2c2c}.register-input[_ngcontent-%COMP%]:focus{border-color:#19b44d;background-color:#2c2c2c;outline:none}.register-input[_ngcontent-%COMP%]::-webkit-file-upload-button{background-color:#fff;color:#fff;padding:8px 15px;border-radius:4px;border:none;cursor:pointer;font-size:14px;transition:background-color .3s ease}"]})};function ci(t,i){if(t&1){let e=E();n(0,"app-altas-admin",8),_("cerrar",function(){g(e);let s=p();return x(s.cerrarPopupAltas())})("altaExitosa",function(){g(e);let s=p();return x(s.onAltaExitosa())}),a()}}function mi(t,i){if(t&1&&b(0,"img",10),t&2){let e=p().$implicit;C("src",e.urlImagenPerfil,P)}}function pi(t,i){if(t&1&&(n(0,"div",9),c(1,mi,1,1,"img",10),n(2,"div",11)(3,"p",12),l(4),a(),n(5,"p",13),l(6),a(),n(7,"p"),l(8),a(),n(9,"p"),l(10),a(),n(11,"p"),l(12," Email verificado: "),n(13,"span",14),l(14),a()()()()),t&2){let e=i.$implicit;r(),m(e.urlImagenPerfil?1:-1),r(3),M(" ",e.nombre," ",e.apellido," "),r(2),T(e.email),r(2),v("DNI: ",e.dni),r(2),v("Edad: ",e.edad),r(3),C("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),r(),v(" ",e.emailVerificado?"Verificado":"Sin Verificar"," ")}}function ui(t,i){if(t&1&&(n(0,"div",7),y(1,pi,15,8,"div",9,S),a()),t&2){let e=p();r(),w(e.pacientes)}}function _i(t,i){if(t&1&&b(0,"img",10),t&2){let e=p().$implicit;C("src",e.urlImagenPerfil,P)}}function fi(t,i){if(t&1){let e=E();n(0,"div",9),c(1,_i,1,1,"img",10),n(2,"div",11)(3,"p",12),l(4),a(),n(5,"p",13),l(6),a(),n(7,"p"),l(8),a(),n(9,"p"),l(10),a(),n(11,"p"),l(12," Email verificado: "),n(13,"span",14),l(14),a()(),n(15,"p"),l(16," Estado: "),n(17,"span",14),l(18),a()()(),n(19,"button",15),_("click",function(){let s=g(e).$implicit,d=p(2);return x(d.toggleValidadoAdmin(s))}),l(20),a()()}if(t&2){let e=i.$implicit;r(),m(e.urlImagenPerfil?1:-1),r(3),M(" ",e.nombre," ",e.apellido," "),r(2),T(e.email),r(2),v("DNI: ",e.dni),r(2),v("Edad: ",e.edad),r(3),C("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),r(),v(" ",e.emailVerificado?"Verificado":"Sin Verificar"," "),r(3),C("ngClass",e.validadoAdmin?"text-verde-oscuro":"text-red-600"),r(),v(" ",e.validadoAdmin?"Habilitado":"Inhabilitado"," "),r(2),v(" ",e.validadoAdmin?"Deshabilitar":"Habilitar"," ")}}function gi(t,i){if(t&1&&(n(0,"div",7),y(1,fi,21,11,"div",9,S),a()),t&2){let e=p();r(),w(e.especialistas)}}function xi(t,i){if(t&1&&b(0,"img",10),t&2){let e=p().$implicit;C("src",e.urlImagenPerfil,P)}}function vi(t,i){if(t&1&&(n(0,"div",9),c(1,xi,1,1,"img",10),n(2,"div",11)(3,"p",12),l(4),a(),n(5,"p",13),l(6),a(),n(7,"p"),l(8),a(),n(9,"p"),l(10),a(),n(11,"p"),l(12," Email verificado: "),n(13,"span",14),l(14),a()()()()),t&2){let e=i.$implicit;r(),m(e.urlImagenPerfil?1:-1),r(3),M(" ",e.nombre," ",e.apellido," "),r(2),T(e.email),r(2),v("DNI: ",e.dni),r(2),v("Edad: ",e.edad),r(3),C("ngClass",e.emailVerificado?"text-verde-oscuro":"text-red-600"),r(),v(" ",e.emailVerificado?"Verificado":"Sin Verificar"," ")}}function Ci(t,i){if(t&1&&(n(0,"div",7),y(1,vi,15,8,"div",9,S),a()),t&2){let e=p();r(),w(e.administradores)}}var Pe=class t{constructor(i,e){this.usuariosService=i;this.loading=e}solapaActiva="pacientes";pacientes=[];especialistas=[];administradores=[];usuarioSeleccionado=null;destroy$=new J;mostrarPopupAltas=!1;ngOnInit(){this.recargarUsuarios(),this.loading.hide()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}recargarUsuarios(){return h(this,null,function*(){let i=yield this.usuariosService.obtenerTodosUsuarios();this.pacientes=i.filter(e=>e.rol==="paciente"),this.especialistas=i.filter(e=>e.rol==="especialista"),this.administradores=i.filter(e=>e.rol==="admin")})}seleccionarUsuario(i){this.usuarioSeleccionado=i}toggleValidadoAdmin(i){return h(this,null,function*(){if(i.rol!=="especialista")return;let e=!i.validadoAdmin;(yield this.usuariosService.actualizarEstadoEspecialista(i.id,e))&&(i.validadoAdmin=e,yield this.recargarUsuarios())})}abrirPopupAltas(){this.mostrarPopupAltas=!0}cerrarPopupAltas(){this.mostrarPopupAltas=!1}onAltaExitosa(){return h(this,null,function*(){yield this.recargarUsuarios(),this.cerrarPopupAltas()})}static \u0275fac=function(e){return new(e||t)(z(Ie),z(O))};static \u0275cmp=U({type:t,selectors:[["app-usuarios"]],decls:18,vars:22,consts:[[1,"h-full","w-full","p-1"],[1,"h-full","w-full","overflow-auto","rounded-2xl","border","border-white","bg-crema","p-6","pb-6","shadow-inner"],[1,"flex","flex-wrap","items-center","justify-between","pb-7"],[1,"flex","flex-wrap","gap-2"],[1,"px-4","py-2","font-semibold","text-gray-600","hover:text-azul-oscuro",3,"click"],[1,"mr-10"],[1,"btn","btn-primary","h-12","rounded-2xl","bg-azul-oscuro","px-6","py-2","text-base","text-white","transition-all","duration-50","hover:bg-azul-claro","hover:text-lg",3,"click"],[1,"grid","justify-center","gap-x-1","gap-y-3",2,"grid-template-columns","repeat(auto-fill, minmax(300px, 1fr))"],[3,"cerrar","altaExitosa"],[1,"w-full","rounded-lg","border","border-gray-300","bg-white","p-4","shadow-sm"],["alt","Avatar","appTrackImage","",1,"mb-2","h-14","w-14","rounded-full","object-cover",3,"src"],[1,"text-sm"],[1,"font-semibold","text-azul-oscuro"],[1,"text-gray-600"],[3,"ngClass"],[1,"mt-2","w-full","rounded","bg-azul-claro","px-3","py-1","text-sm","text-white","hover:bg-azul-oscuro",3,"click"]],template:function(e,o){e&1&&(n(0,"app-loading-wrapper")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"button",4),_("click",function(){return o.solapaActiva="pacientes"}),l(6," Pacientes "),a(),n(7,"button",4),_("click",function(){return o.solapaActiva="especialistas"}),l(8," Especialistas "),a(),n(9,"button",4),_("click",function(){return o.solapaActiva="administradores"}),l(10," Administradores "),a()(),n(11,"div",5)(12,"button",6),_("click",function(){return o.abrirPopupAltas()}),l(13," Dar Alta Usuario "),a()()(),c(14,ci,1,0,"app-altas-admin"),c(15,ui,3,0,"div",7),c(16,gi,3,0,"div",7),c(17,Ci,3,0,"div",7),a()()()),e&2&&(r(5),V("border-b-2",o.solapaActiva==="pacientes")("border-azul-oscuro",o.solapaActiva==="pacientes")("text-azul-oscuro",o.solapaActiva==="pacientes"),r(2),V("border-b-2",o.solapaActiva==="especialistas")("border-azul-oscuro",o.solapaActiva==="especialistas")("text-azul-oscuro",o.solapaActiva==="especialistas"),r(2),V("border-b-2",o.solapaActiva==="administradores")("border-azul-oscuro",o.solapaActiva==="administradores")("text-azul-oscuro",o.solapaActiva==="administradores"),r(5),m(o.mostrarPopupAltas?14:-1),r(),m(o.solapaActiva==="pacientes"?15:-1),r(),m(o.solapaActiva==="especialistas"?16:-1),r(),m(o.solapaActiva==="administradores"?17:-1))},dependencies:[Y,X,N,ue,_e],encapsulation:2})};export{Pe as Usuarios};

import{a as oe,b as re,c as ne,f as ae,i as le,j as se,k as me}from"./chunk-HAQFI63Z.js";import{d as Z,f as ee,g as te,n as ie}from"./chunk-YZVU7P4D.js";import{a as Y}from"./chunk-XAJTSRQW.js";import{b as X}from"./chunk-4DVJJQNQ.js";import"./chunk-BSLYAFLW.js";import"./chunk-X5YLR3NI.js";import"./chunk-SGAKRYQ3.js";import{b as D}from"./chunk-QQD6G2CA.js";import{e as G,f as j}from"./chunk-A42ZMED3.js";import"./chunk-VLNB4REZ.js";import{c as q,e as w,g as z,h as Q,k as $,n as H,o as J,v as K,x as W}from"./chunk-E2BOE3LX.js";import{e as N,f as O,g as R,l as B}from"./chunk-MTWZV5NU.js";import{Cb as _,Eb as v,Ib as M,Jb as S,Ka as C,Kb as V,Ma as a,Pb as k,Qb as A,Sb as u,Tb as P,Ub as T,Xa as E,Y as d,Zb as U,ab as f,ba as g,bc as y,ca as c,pb as s,qb as n,rb as l,sb as b,yb as h}from"./chunk-EMRS3JRH.js";import{i as I}from"./chunk-ODN5LVDJ.js";var de=["emailInput"],ue=(i,o)=>({"mat-form-field-valid":i,"mat-form-field-invalid":o});function ge(i,o){if(i&1){let r=h();n(0,"button",16),_("click",function(){let t=g(r).$implicit,p=v(2);return c(p.autocompletar(t))}),b(1,"img",17),n(2,"span",18),u(3),l()()}if(i&2){let r=o.$implicit,e=o.index,t=v(2);k("animation-delay",e*100+"ms"),A("animate-fade-slide-up-scale",t.autoLogVisible),a(),s("alt",U(r.nombre))("src",r.imagenUrl,C),a(2),T(" ",r.nombre," ")}}function ce(i,o){if(i&1&&(n(0,"div",14),f(1,ge,4,8,"button",15),l()),i&2){let r=v();a(),s("ngForOf",r.usuariosAutoLog)}}function fe(i,o){i&1&&(n(0,"mat-error"),u(1," Campo obligatorio "),l())}function _e(i,o){i&1&&(n(0,"mat-error"),u(1," Email inv\xE1lido "),l())}function we(i,o){i&1&&(n(0,"mat-error"),u(1," Campo obligatorio "),l())}function be(i,o){i&1&&(n(0,"mat-error"),u(1," M\xEDnimo 7 caracteres "),l())}var pe=class i{fb=d(K);snackBar=d(ie);router=d(D);auth=d(X);overlay=d(Y);loginForm;hidePassword=!0;autoLogVisible=!1;usuariosAutoLog=[{nombre:"Admin",imagenUrl:"assets/imagenes/Login/admin.png",mail:"insua.guido@gmail.com",password:"1234567"},{nombre:"Pepe",imagenUrl:"assets/imagenes/Login/especialista1.png",mail:"espe.deduct310@passmail.net",password:"1234567"},{nombre:"Especialista",imagenUrl:"assets/imagenes/Login/especialista2.png",mail:"paciente@demo.com",password:"paciente123"},{nombre:"Guido",imagenUrl:"assets/imagenes/Login/paciente1.png",mail:"pepitoluis.culture104@passmail.net",password:"1234567"},{nombre:"Paciente",imagenUrl:"assets/imagenes/Login/paciente2.png",mail:"user2@demo.com",password:"user123"},{nombre:"Paciente",imagenUrl:"assets/imagenes/Login/paciente3.png",mail:"user3@demo.com",password:"user123"}];emailInputRef;ngOnInit(){this.overlay.show(),this.loginForm=this.fb.group({mail:["",[w.required,w.email]],password:["",[w.required,w.minLength(7)]]}),this.overlay.hide()}ngAfterViewInit(){queueMicrotask(()=>this.emailInputRef?.nativeElement.focus())}login(){return I(this,null,function*(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.overlay.show();let{mail:o,password:r}=this.loginForm.value,e=yield this.auth.login(o,r);if(!e.success){this.snackBar.open(e.errorCode??"Error de login","Cerrar",{duration:4e3,panelClass:["bg-red-600","text-white"]}),this.overlay.hide();return}let t=yield this.auth.getCurrentUser();t&&(yield this.auth.registrarIngreso(t.id)),this.router.navigate(["/home"])})}toggleAutoLog(){this.autoLogVisible=!this.autoLogVisible}autocompletar(o){this.loginForm.patchValue({mail:o.mail,password:o.password})}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=E({type:i,selectors:[["app-login"]],viewQuery:function(r,e){if(r&1&&M(de,5),r&2){let t;S(t=V())&&(e.emailInputRef=t.first)}},decls:27,vars:17,consts:[["emailInput",""],[1,"bg-gray-200","pt-30","pb-130"],[1,"pb-1","text-center","text-4xl","font-bold","text-azul-oscuro"],["class","absolute ml-5 flex w-32 flex-col items-start gap-4",4,"ngIf"],[1,"flex","justify-center","py-8"],[1,"flex","w-full","max-w-xl","flex-col","items-center","rounded-xl","bg-crema","p-8","shadow-lg",3,"ngSubmit","formGroup"],["appearance","fill",1,"w-80",3,"ngClass"],["matInput","","type","email","formControlName","mail"],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"flex","justify-center","gap-4","pt-4"],["mat-raised-button","","color","primary","type","submit",1,"rounded-full","bg-verde-oscuro","px-8","py-2","text-white","shadow-lg",3,"disabled"],["mat-raised-button","","color","primary","type","button",1,"rounded-full","bg-verde-oscuro","px-8","py-2","text-white","shadow-lg",3,"click"],[1,"absolute","ml-5","flex","w-32","flex-col","items-start","gap-4"],["class","flex h-23 w-23 flex-col items-center justify-center rounded-lg bg-crema align-middle text-azul-oscuro shadow-md transition-transform hover:scale-110","style","opacity: 0",3,"animationDelay","animate-fade-slide-up-scale","click",4,"ngFor","ngForOf"],[1,"flex","h-23","w-23","flex-col","items-center","justify-center","rounded-lg","bg-crema","align-middle","text-azul-oscuro","shadow-md","transition-transform","hover:scale-110",2,"opacity","0",3,"click"],[1,"mb-1","justify-center","align-middle",3,"src","alt"],[1,"text-xs","font-bold","capitalize"]],template:function(r,e){if(r&1){let t=h();n(0,"div",1)(1,"h2",2),u(2,"Login"),l(),f(3,ce,2,1,"div",3),n(4,"div",4)(5,"form",5),_("ngSubmit",function(){return g(t),c(e.login())}),n(6,"mat-form-field",6)(7,"mat-label"),u(8,"Email"),l(),b(9,"input",7,0),f(11,fe,2,0,"mat-error",8)(12,_e,2,0,"mat-error",8),l(),n(13,"mat-form-field",6)(14,"mat-label"),u(15,"Contrase\xF1a"),l(),b(16,"input",9),n(17,"button",10),_("click",function(){return g(t),c(e.hidePassword=!e.hidePassword)}),n(18,"mat-icon"),u(19),l()(),f(20,we,2,0,"mat-error",8)(21,be,2,0,"mat-error",8),l(),n(22,"div",11)(23,"button",12),u(24," Login "),l(),n(25,"button",13),_("click",function(){return g(t),c(e.toggleAutoLog())}),u(26," Auto Log "),l()()()()()}if(r&2){let t,p,F,m,x,L;a(3),s("ngIf",e.autoLogVisible),a(2),s("formGroup",e.loginForm),a(),s("ngClass",y(11,ue,((t=e.loginForm.get("mail"))==null?null:t.valid)&&(((t=e.loginForm.get("mail"))==null?null:t.dirty)||((t=e.loginForm.get("mail"))==null?null:t.touched)),((t=e.loginForm.get("mail"))==null?null:t.invalid)&&(((t=e.loginForm.get("mail"))==null?null:t.dirty)||((t=e.loginForm.get("mail"))==null?null:t.touched)))),a(5),s("ngIf",(p=e.loginForm.get("mail"))==null?null:p.hasError("required")),a(),s("ngIf",(F=e.loginForm.get("mail"))==null?null:F.hasError("email")),a(),s("ngClass",y(14,ue,((m=e.loginForm.get("password"))==null?null:m.valid)&&(((m=e.loginForm.get("password"))==null?null:m.dirty)||((m=e.loginForm.get("password"))==null?null:m.touched)),((m=e.loginForm.get("password"))==null?null:m.invalid)&&(((m=e.loginForm.get("password"))==null?null:m.dirty)||((m=e.loginForm.get("password"))==null?null:m.touched)))),a(3),s("type",e.hidePassword?"password":"text"),a(3),P(e.hidePassword?"visibility_off":"visibility"),a(),s("ngIf",(x=e.loginForm.get("password"))==null?null:x.hasError("required")),a(),s("ngIf",(L=e.loginForm.get("password"))==null?null:L.hasError("minlength")),a(2),s("disabled",e.loginForm.invalid)}},dependencies:[B,N,O,R,W,$,q,z,Q,H,J,me,se,ae,oe,re,ne,le,te,ee,Z,j,G],styles:["@keyframes _ngcontent-%COMP%_fade-slide-up-scale{0%{opacity:0;transform:translate(-30px,20px) scale(.9)}60%{opacity:1;transform:translate(10px,-4px) scale(1.05)}to{opacity:1;transform:translate(0) scale(1)}}.animate-fade-slide-up-scale[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-slide-up-scale .5s cubic-bezier(.22,1,.36,1) forwards}"]})};export{pe as Login};

import{Bb as v,Eb as b,Fb as L,Ma as d,T as c,Xa as p,Y as o,Za as g,g as m,lb as r,mb as s,ra as l,ub as f,vb as u,wb as h}from"./chunk-ZQYZ5UVW.js";var n=class i{imageMap=new Map;loadingCount=0;loading$=new m(!1);get isLoading$(){return this.loading$.asObservable()}registerImage(e){this.imageMap.has(e)||(this.imageMap.set(e,!1),this.loadingCount++,this.emitStatus())}markLoaded(e){this.imageMap.has(e)&&!this.imageMap.get(e)&&(this.imageMap.set(e,!0),this.loadingCount--,this.emitStatus())}emitStatus(){this.loading$.next(this.loadingCount>0)}reset(){this.imageMap.clear(),this.loadingCount=0,this.loading$.next(!1)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})};var S=class i{imageService=o(n);el=o(l);constructor(){this.imageService.registerImage(this.el.nativeElement)}onLoad(){this.imageService.markLoaded(this.el.nativeElement)}onError(){this.imageService.markLoaded(this.el.nativeElement)}static \u0275fac=function(t){return new(t||i)};static \u0275dir=g({type:i,selectors:[["img","appTrackImage",""]],hostBindings:function(t,a){t&1&&v("load",function(){return a.onLoad()})("error",function(){return a.onError()})}})};var C=["*"];function y(i,e){i&1&&(f(0,"div",0),h(1,"div",1),u())}function T(i,e){i&1&&L(0)}var E=class i{imageService=o(n);sub;loading=!0;ngOnInit(){this.sub=this.imageService.isLoading$.subscribe(e=>{this.loading=e})}ngOnDestroy(){this.sub?.unsubscribe(),this.imageService.reset()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=p({type:i,selectors:[["app-loading-wrapper"]],ngContentSelectors:C,decls:2,vars:2,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/30","backdrop-blur-sm"],[1,"h-20","w-20","animate-spin","rounded-full","border-4","border-blue-600","border-t-transparent"]],template:function(t,a){t&1&&(b(),r(0,y,2,0,"div",0),r(1,T,1,0)),t&2&&(s(a.loading?0:-1),d(),s(a.loading?-1:1))},encapsulation:2})};export{S as a,E as b};

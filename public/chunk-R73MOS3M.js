import{a as ce,b as de}from"./chunk-JXGM5RTB.js";import{a as me}from"./chunk-VLDSBO4T.js";import{a as se}from"./chunk-RTOFS77S.js";import{b as q}from"./chunk-ISZQ6G3H.js";import"./chunk-GGQ7LRWG.js";import{c as N,d as k,f as b,h as P,j as X,k as ee}from"./chunk-KSD35WM7.js";import{n as le}from"./chunk-M2F6BYP4.js";import{b as oe}from"./chunk-VPTHVLTQ.js";import{b as ae,c as ne,k as re}from"./chunk-YDT6XDAL.js";import"./chunk-LMZWYZYD.js";import"./chunk-UIGXKFJS.js";import{c as z,g as L,j,w as te,x as $,y as ie}from"./chunk-3XECLLOM.js";import"./chunk-FFHKXHWV.js";import{h as G,i as J,j as O}from"./chunk-DDKTLT4U.js";import{Ab as f,Eb as d,Gb as c,Oa as l,P as K,Rb as M,Sb as F,Ta as h,Ub as r,Vb as w,Wb as m,Yb as I,Za as D,Zb as R,_b as B,ca as u,cc as Y,da as p,eb as U,f as Q,gc as V,hc as Z,ic as S,na as C,nb as _,ob as x,qb as E,rb as y,sb as T,tb as v,ub as a,vb as n,wb as W}from"./chunk-PTIYVII4.js";import{j as A}from"./chunk-K4ALXBGI.js";var Ce=()=>[1,2,3,4,5];function ge(i,t){i&1&&(a(0,"div",5)(1,"div",6),r(2,"Cargando opciones..."),n()())}function be(i,t){if(i&1){let e=f();a(0,"button",12),d("click",function(){u(e);let s=c(3);return p(s.mostrarFormularioCancelar=!0)}),r(1," Cancelar turno "),n()}}function he(i,t){if(i&1){let e=f();a(0,"button",13),d("click",function(){u(e);let s=c(3);return p(s.verComentarioPaciente())}),r(1," Ver comentario paciente "),n()}}function ve(i,t){if(i&1){let e=f();a(0,"button",14),d("click",function(){u(e);let s=c(3);return p(s.verComentarioEspecialista())}),r(1," Ver comentario especialista "),n()}}function Ee(i,t){if(i&1){let e=f();a(0,"button",15),d("click",function(){u(e);let s=c(3);return p(s.verResenia())}),r(1," Ver rese\xF1a especialista "),n()}}function ye(i,t){if(i&1){let e=f();a(0,"button",16),d("click",function(){u(e);let s=c(3);return p(s.verEncuesta())}),r(1," Ver encuesta paciente "),n()}}function Te(i,t){if(i&1&&(_(0,be,2,0,"button",7),_(1,he,2,0,"button",8),_(2,ve,2,0,"button",9),_(3,Ee,2,0,"button",10),_(4,ye,2,0,"button",11)),i&2){let e=c(2);x(e.puedeCancelar?0:-1),l(),x(e.puedeVerComentarioPaciente?1:-1),l(),x(e.puedeVerComentarioEspecialista?2:-1),l(),x(e.puedeVerResenia?3:-1),l(),x(e.puedeVerEncuesta?4:-1)}}function Ve(i,t){if(i&1&&(a(0,"div",2),_(1,ge,3,0,"div",5)(2,Te,5,5),n()),i&2){let e=c();l(),x(e.verificandoEncuesta()?1:2)}}function Ae(i,t){if(i&1){let e=f();a(0,"div",2)(1,"textarea",17),B("ngModelChange",function(s){u(e);let g=c();return R(g.comentarioCancelar,s)||(g.comentarioCancelar=s),p(s)}),n(),a(2,"div",18)(3,"button",19),d("click",function(){u(e);let s=c();return p(s.cancelarAccionCancelar())}),r(4," Cancelar "),n(),a(5,"button",20),d("click",function(){u(e);let s=c();return p(s.confirmarCancelarTurno())}),r(6," Confirmar cancelaci\xF3n "),n()()()}if(i&2){let e=c();l(),I("ngModel",e.comentarioCancelar),l(4),v("disabled",!e.comentarioCancelar.trim()||e.cargando())}}function we(i,t){if(i&1){let e=f();a(0,"div",3)(1,"h3",21),r(2," Rese\xF1a del Especialista "),n(),a(3,"p",22),r(4),n(),a(5,"button",23),d("click",function(){u(e);let s=c();return p(s.volverDesdeVistaResenia())}),r(6," Volver "),n()()}if(i&2){let e=c();l(4),m(" ",e.cita.resenia||"No se ha dejado una rese\xF1a para este turno."," ")}}function Se(i,t){if(i&1){let e=f();a(0,"div",3)(1,"h3",21),r(2," Comentario del Paciente "),n(),a(3,"p",22),r(4),n(),a(5,"button",23),d("click",function(){u(e);let s=c();return p(s.volverDesdeVistaComentarioPaciente())}),r(6," Volver "),n()()}if(i&2){let e=c();l(4),w(e.cita.comentarioPaciente)}}function Fe(i,t){if(i&1){let e=f();a(0,"div",3)(1,"h3",21),r(2," Comentario del Especialista "),n(),a(3,"p",22),r(4),n(),a(5,"button",23),d("click",function(){u(e);let s=c();return p(s.volverDesdeVistaComentarioEspecialista())}),r(6," Volver "),n()()}if(i&2){let e=c();l(4),w(e.cita.comentarioEspecialista)}}function ke(i,t){if(i&1&&(a(0,"span",39),r(1," \u2605 "),n()),i&2){let e=t.$implicit,o=c(2);F("text-yellow-400",e<=(o.encuestaExistente.estrellas||0))("text-gray-300",e>(o.encuestaExistente.estrellas||0))}}function Pe(i,t){if(i&1&&(a(0,"span",34),r(1),n()),i&2){let e=t.$implicit;l(),m(" ",e," ")}}function De(i,t){if(i&1){let e=f();a(0,"div",4)(1,"h3",24),r(2," Encuesta de Satisfacci\xF3n del Paciente "),n(),a(3,"div",25)(4,"div",26)(5,"p",27),r(6," 1. \xBFC\xF3mo fue tu experiencia en la cita? "),n(),a(7,"p",28),r(8),n()(),a(9,"div",26)(10,"p",27),r(11," 2. \xBFQu\xE9 calificaci\xF3n le dar\xEDas a la atenci\xF3n recibida? "),n(),a(12,"div",29),y(13,ke,2,4,"span",30,E),a(15,"span",31),r(16),n()()(),a(17,"div",26)(18,"p",27),r(19," 3. \xBFC\xF3mo calificar\xEDas tu satisfacci\xF3n general? "),n(),a(20,"p",32),r(21),n()(),a(22,"div",26)(23,"p",27),r(24," 4. \xBFQu\xE9 aspectos destacar\xEDas de la atenci\xF3n? "),n(),a(25,"div",33),y(26,Pe,2,1,"span",34,E),n()(),a(28,"div",26)(29,"p",27),r(30," 5. \xBFQu\xE9 probabilidad hay de que recomiendes este servicio? "),n(),a(31,"div",35)(32,"div",36),W(33,"div",37),n(),a(34,"span",38),r(35),n()()()(),a(36,"button",23),d("click",function(){u(e);let s=c();return p(s.volverDesdeVistaEncuesta())}),r(37," Volver "),n()()}if(i&2){let e=c();l(8),m(" ",e.encuestaExistente.textBox||"Sin respuesta"," "),l(5),T(Y(6,Ce)),l(3),m(" ",e.encuestaExistente.estrellas," de 5 "),l(5),m(" ",e.obtenerEtiquetaRadio(e.encuestaExistente.radioButton)," "),l(5),T(e.obtenerEtiquetasCheckbox(e.encuestaExistente.checkBox)),l(7),M("width",e.encuestaExistente.rango||0,"%"),l(2),m(" ",e.encuestaExistente.rango,"/100 ")}}var H=class i{constructor(t,e,o){this.turnos=t;this.fb=e;this.snackBar=o}cita;cerrar=new U;accionRealizada=new U;cargando=C(!1);verificandoEncuesta=C(!0);mostrarFormularioCancelar=!1;mostrarFormularioResenia=!1;mostrarVistaComentarioPaciente=!1;mostrarVistaComentarioEspecialista=!1;mostrarVistaEncuesta=!1;encuestaExistente=null;opcionesRadioMap={excelente:"Excelente","muy-bueno":"Muy bueno",bueno:"Bueno",regular:"Regular",malo:"Malo"};opcionesCheckboxMap={puntualidad:"Puntualidad",profesionalismo:"Profesionalismo",claridad:"Claridad en las explicaciones",empatia:"Empat\xEDa",instalaciones:"Instalaciones limpias","tiempo-espera":"Poco tiempo de espera",seguimiento:"Buen seguimiento",recomendaria:"Lo recomendar\xEDa"};comentarioCancelar="";ngOnInit(){return A(this,null,function*(){yield this.verificarEncuestaExistente()})}verificarEncuestaExistente(){return A(this,null,function*(){this.verificandoEncuesta.set(!0);try{let{data:t,error:e}=yield ae.from(ne.ENCUESTAS_PACIENTES).select("*").eq("idCita",this.cita.citaId).single();if(e&&e.code!=="PGRST116"){console.error("Error al verificar encuesta:",e);return}this.encuestaExistente=t}catch(t){console.error("Error inesperado al verificar encuesta:",t)}finally{this.verificandoEncuesta.set(!1)}})}get puedeCancelar(){return this.cita.estado!=="completado"&&this.cita.estado!=="cancelado"&&this.cita.estado!=="aceptado"&&this.cita.estado!=="rechazado"&&!this.mostrarFormularioCancelar&&!this.mostrarFormularioResenia&&!this.mostrarVistaComentarioPaciente&&!this.mostrarVistaComentarioEspecialista&&!this.mostrarVistaEncuesta}get puedeVerResenia(){return this.cita.estado==="completado"&&!!this.cita.resenia&&this.cita.resenia.trim().length>0&&!this.mostrarFormularioCancelar&&!this.mostrarFormularioResenia&&!this.mostrarVistaComentarioPaciente&&!this.mostrarVistaComentarioEspecialista&&!this.mostrarVistaEncuesta}get puedeVerComentarioPaciente(){return(this.cita.estado==="cancelado"||this.cita.estado==="completado")&&!!this.cita.comentarioPaciente&&this.cita.comentarioPaciente.trim().length>0&&!this.mostrarFormularioCancelar&&!this.mostrarFormularioResenia&&!this.mostrarVistaComentarioPaciente&&!this.mostrarVistaComentarioEspecialista&&!this.mostrarVistaEncuesta}get puedeVerComentarioEspecialista(){return(this.cita.estado==="cancelado"||this.cita.estado==="rechazado")&&!!this.cita.comentarioEspecialista&&this.cita.comentarioEspecialista.trim().length>0&&!this.mostrarFormularioCancelar&&!this.mostrarFormularioResenia&&!this.mostrarVistaComentarioPaciente&&!this.mostrarVistaComentarioEspecialista&&!this.mostrarVistaEncuesta}get puedeVerEncuesta(){return this.cita.estado==="completado"&&!!this.encuestaExistente&&!this.mostrarFormularioCancelar&&!this.mostrarFormularioResenia&&!this.mostrarVistaComentarioPaciente&&!this.mostrarVistaComentarioEspecialista&&!this.mostrarVistaEncuesta}cancelarAccionCancelar(){this.mostrarFormularioCancelar=!1,this.comentarioCancelar=""}confirmarCancelarTurno(){this.comentarioCancelar.trim()&&(this.cargando.set(!0),this.turnos.cancelarCitaEspecialista(this.cita,this.comentarioCancelar.trim()).then(t=>{this.cargando.set(!1),t.success?(this.snackBar.open("Turno cancelado exitosamente.","Cerrar",{duration:3e3}),this.accionRealizada.emit("cancelado"),this.cerrar.emit()):this.snackBar.open(t.message??"Ocurri\xF3 un error","Cerrar",{duration:4e3})}).finally(()=>{this.mostrarFormularioCancelar=!1,this.comentarioCancelar=""}))}verResenia(){this.mostrarFormularioResenia=!0}volverDesdeVistaResenia(){this.mostrarFormularioResenia=!1}verComentarioPaciente(){this.mostrarVistaComentarioPaciente=!0}volverDesdeVistaComentarioPaciente(){this.mostrarVistaComentarioPaciente=!1}verComentarioEspecialista(){this.mostrarVistaComentarioEspecialista=!0}volverDesdeVistaComentarioEspecialista(){this.mostrarVistaComentarioEspecialista=!1}verEncuesta(){this.mostrarVistaEncuesta=!0}volverDesdeVistaEncuesta(){this.mostrarVistaEncuesta=!1}obtenerEtiquetaRadio(t){return t?this.opcionesRadioMap[t]||t:"Sin respuesta"}obtenerEtiquetasCheckbox(t){return t?t.split(",").map(e=>e.trim()).filter(e=>e).map(e=>this.opcionesCheckboxMap[e]||e):[]}cerrarModal(){this.cerrar.emit()}static \u0275fac=function(e){return new(e||i)(h(q),h(te),h(le))};static \u0275cmp=D({type:i,selectors:[["app-acciones-admin"]],inputs:{cita:"cita"},outputs:{cerrar:"cerrar",accionRealizada:"accionRealizada"},decls:8,vars:6,consts:[["tabindex","0","role","button","aria-label","Cerrar modal",1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50","backdrop-blur-sm"],["appClickFueraPopup","","tabindex","0","role","dialog","aria-modal","true",1,"fixed","top-1/2","left-1/2","z-50","w-full","max-w-md","-translate-x-1/2","-translate-y-1/2","transform","items-center","justify-center","rounded-2xl","bg-white","p-11","shadow-lg",3,"clickFuera"],[1,"flex","flex-col","gap-3"],[1,"flex","flex-col","items-center","gap-4","text-center"],[1,"flex","max-h-[70vh]","flex-col","gap-4","overflow-y-auto"],[1,"flex","items-center","justify-center","py-4"],[1,"text-sm","text-gray-500"],[1,"rounded-lg","bg-gray-500","px-4","py-2","font-semibold","text-white","transition-transform","hover:scale-105","hover:bg-gray-800"],[1,"rounded-lg","bg-cyan-600","px-4","py-2","font-semibold","text-white","transition-transform","hover:scale-105","hover:bg-cyan-700"],[1,"rounded-lg","bg-amber-600","px-4","py-2","font-semibold","text-white","transition-transform","hover:scale-105","hover:bg-amber-700"],[1,"rounded-lg","bg-pink-400","px-4","py-2","font-semibold","text-white","transition-transform","hover:scale-105","hover:bg-pink-700"],[1,"rounded-lg","bg-teal-600","px-4","py-2","font-semibold","text-white","transition-transform","hover:scale-105","hover:bg-teal-700"],[1,"rounded-lg","bg-gray-500","px-4","py-2","font-semibold","text-white","transition-transform","hover:scale-105","hover:bg-gray-800",3,"click"],[1,"rounded-lg","bg-cyan-600","px-4","py-2","font-semibold","text-white","transition-transform","hover:scale-105","hover:bg-cyan-700",3,"click"],[1,"rounded-lg","bg-amber-600","px-4","py-2","font-semibold","text-white","transition-transform","hover:scale-105","hover:bg-amber-700",3,"click"],[1,"rounded-lg","bg-pink-400","px-4","py-2","font-semibold","text-white","transition-transform","hover:scale-105","hover:bg-pink-700",3,"click"],[1,"rounded-lg","bg-teal-600","px-4","py-2","font-semibold","text-white","transition-transform","hover:scale-105","hover:bg-teal-700",3,"click"],["placeholder","Ingrese el motivo de cancelaci\xF3n","rows","3",1,"w-full","resize-none","rounded","border","border-gray-300","px-3","py-2","text-sm","focus:ring-2","focus:ring-red-500","focus:outline-none",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-3"],["type","button",1,"rounded","border","border-gray-400","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],["type","button",1,"rounded","bg-red-600","px-4","py-2","text-sm","font-semibold","text-white","hover:bg-red-800","disabled:opacity-50",3,"click","disabled"],[1,"text-xl","font-bold","text-[color:var(--color-azul-oscuro)]"],[1,"px-2","text-gray-700","italic"],[1,"mt-4","rounded","bg-gray-300","px-4","py-2","text-sm","font-semibold","text-gray-800","hover:bg-gray-400",3,"click"],[1,"text-center","text-xl","font-bold","text-[color:var(--color-azul-oscuro)]"],[1,"space-y-4"],[1,"rounded-lg","bg-gray-50","p-4"],[1,"mb-2","text-sm","font-semibold","text-[color:var(--color-azul-oscuro)]"],[1,"text-sm","text-gray-700","italic"],[1,"flex","items-center","gap-1"],[1,"text-2xl",3,"text-yellow-400","text-gray-300"],[1,"ml-2","text-sm","text-gray-600"],[1,"text-sm","text-gray-700"],[1,"flex","flex-wrap","gap-2"],[1,"rounded-full","bg-[color:var(--color-azul-oscuro)]","px-3","py-1","text-xs","text-white"],[1,"flex","items-center","gap-3"],[1,"h-2","flex-1","rounded-full","bg-gray-200"],[1,"h-2","rounded-full","bg-[color:var(--color-azul-oscuro)]"],[1,"text-lg","font-bold","text-[color:var(--color-azul-oscuro)]"],[1,"text-2xl"]],template:function(e,o){e&1&&(W(0,"div",0),a(1,"div",1),d("clickFuera",function(){return o.cerrarModal()}),_(2,Ve,3,1,"div",2),_(3,Ae,7,2,"div",2),_(4,we,7,1,"div",3),_(5,Se,7,1,"div",3),_(6,Fe,7,1,"div",3),_(7,De,38,7,"div",4),n()),e&2&&(l(2),x(!o.mostrarFormularioCancelar&&!o.mostrarFormularioResenia&&!o.mostrarVistaComentarioPaciente&&!o.mostrarVistaComentarioEspecialista&&!o.mostrarVistaEncuesta?2:-1),l(),x(o.mostrarFormularioCancelar?3:-1),l(),x(o.mostrarFormularioResenia?4:-1),l(),x(o.mostrarVistaComentarioPaciente?5:-1),l(),x(o.mostrarVistaComentarioEspecialista?6:-1),l(),x(o.mostrarVistaEncuesta&&o.encuestaExistente?7:-1))},dependencies:[O,$,z,L,j,ie,se],encapsulation:2})};function Me(i,t){if(i&1){let e=f();a(0,"app-acciones-admin",12),d("cerrar",function(){u(e);let s=c();return p(s.cerrarPopupAcciones())})("accionRealizada",function(){u(e);let s=c();return p(s.accionDesdeModal())}),n()}if(i&2){let e=c();v("cita",e.citaSeleccionada())}}function Ie(i,t){if(i&1&&(a(0,"th",11),r(1),n()),i&2){let e=t.$implicit;l(),w(e.label)}}function Re(i,t){if(i&1&&(a(0,"div")(1,"strong"),r(2),n(),r(3),n()),i&2){let e=t.$implicit;l(2),m("",e.clave,":"),l(),m(" ",e.valor)}}function Be(i,t){if(i&1&&(a(0,"tr")(1,"td",20)(2,"div",21),y(3,Re,4,2,"div",null,E),n()()()),i&2){let e=c().$implicit;v("@expandCollapse",void 0),l(3),T(e.datosDinamicos)}}function Oe(i,t){if(i&1){let e=f();a(0,"tr",13),d("click",function(){let s=u(e).$implicit,g=c(2);return p(g.toggleFilaExpandida(s.citaId))}),a(1,"td",14),r(2),n(),a(3,"td",14),r(4),V(5,"date"),n(),a(6,"td",15),r(7),V(8,"titlecase"),n(),a(9,"td",14),r(10),V(11,"unidadMedida"),n(),a(12,"td",14),r(13),V(14,"unidadMedida"),n(),a(15,"td",14),r(16),V(17,"unidadMedida"),n(),a(18,"td",14),r(19),V(20,"unidadMedida"),n(),a(21,"td",14),r(22),n(),a(23,"td",14),r(24),n(),a(25,"td",14),r(26),n(),a(27,"td",16)(28,"button",17),r(29),n()(),a(30,"td",18)(31,"button",19),d("click",function(){let s=u(e).$implicit,g=c(2);return p(g.abrirPopupAcciones(s))}),r(32," Acciones "),n()()(),_(33,Be,5,1,"tr")}if(i&2){let e=t.$implicit,o=c(2);M("background-color",o.filaExpandida()===e.citaId?"rgba(46, 64, 45, 0.2)":null),v("@fadeInRow",void 0),l(2),w(e.citaId),l(2),m(" ",S(5,16,e.fechaHora,"short")," "),l(2),v("appColorEstado",e.estado),l(),m(" ",Z(8,19,e.estado)," "),l(3),m(" ",S(11,21,e.alturaCm,"altura")," "),l(3),m(" ",S(14,24,e.pesoKg,"peso")," "),l(3),m(" ",S(17,27,e.temperaturaC,"temperatura")," "),l(3),m(" ",S(20,30,e.presionArterial,"presion")," "),l(3),m(" ",e.pacienteNombreCompleto," "),l(2),m(" ",e.especialistaNombreCompleto," "),l(2),m(" ",e.especialidadNombre," "),l(3),m(" ",o.filaExpandida()===e.citaId?"Ocultar":"Mostrar"," "),l(4),x(o.filaExpandida()===e.citaId?33:-1)}}function Ne(i,t){if(i&1&&(a(0,"tbody"),y(1,Oe,34,33,null,null,E),n()),i&2){let e=c();v("@listStagger",void 0),l(),T(e.citasFiltradas)}}function ze(i,t){i&1&&(a(0,"tbody")(1,"tr")(2,"td",22),r(3," Cargando datos... "),n()()())}var ue=class i{constructor(t,e,o){this.turnosService=t;this.authSupabase=e;this.loading=o;this.usuario$=this.authSupabase.user$}usuario$;usuarioActual=null;destroy$=new Q;citas=C([]);filaExpandida=C(null);cargando=C(!0);citaSeleccionada=C(null);ordenamiento=C("fecha");mostrarFilas=C(!1);mostrarPopupAcciones=!1;columnas=[{key:"citaId",label:"ID"},{key:"fechaHora",label:"Fecha/Hora"},{key:"estado",label:"Estado"},{key:"alturaCm",label:"Altura"},{key:"pesoKg",label:"Peso"},{key:"temperaturaC",label:"Temperatura"},{key:"presionArterial",label:"Presi\xF3n arterial"},{key:"pacienteNombreCompleto",label:"Paciente"},{key:"especialistaNombreCompleto",label:"Especialista"},{key:"especialidadNombre",label:"Especialidad"}];columnasConDatosDinamicos=[...this.columnas,{key:"datosDinamicos",label:"Datos din\xE1micos"}];_filtroValor=C("");_filtroTimeout=null;get filtroValorModel(){return this._filtroValor()}set filtroValorModel(t){this._filtroValor.set(t),this._filtroTimeout&&clearTimeout(this._filtroTimeout)}ngOnInit(){return A(this,null,function*(){this.usuario$.pipe(K(this.destroy$)).subscribe(t=>{if(!t){this.usuarioActual=null;return}t.id=typeof t.id=="string"?Number(t.id):t.id,this.usuarioActual=t,this.cargarCitas()})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarCitas(){return A(this,null,function*(){this.cargando.set(!0),this.mostrarFilas.set(!1);try{if(this.usuarioActual?.id!=null){let t=yield this.turnosService.obtenerCitasConRegistro();this.citas.set(t)}}catch(t){console.error("Error al obtener citas",t)}finally{this.cargando.set(!1),setTimeout(()=>{this.mostrarFilas.set(!0)},10),this.loading.hide()}})}toggleFilaExpandida(t){this.filaExpandida.set(this.filaExpandida()===t?null:t)}get citasFiltradas(){let t=de(this.citas(),this._filtroValor()),e=this.ordenamiento();return e==="fecha"?t=[...t].sort((o,s)=>new Date(s.fechaHora).getTime()-new Date(o.fechaHora).getTime()):e==="estado"&&(t=[...t].sort((o,s)=>o.estado.localeCompare(s.estado))),t}limpiarFiltro(){this._filtroValor.set(""),this.mostrarFilas.set(!1),setTimeout(()=>{this.mostrarFilas.set(!0)},10)}abrirPopupAcciones(t){this.citaSeleccionada.set(t),this.mostrarPopupAcciones=!0}cerrarPopupAcciones(){this.mostrarPopupAcciones=!1,this.citaSeleccionada.set(null)}accionDesdeModal(){this.cerrarPopupAcciones(),this.cargarCitas()}ordenarPorFecha(){this.ordenamiento.set("fecha"),this.mostrarFilas.set(!1),setTimeout(()=>{this.mostrarFilas.set(!0)},10)}ordenarPorEstado(){this.ordenamiento.set("estado"),this.mostrarFilas.set(!1),setTimeout(()=>{this.mostrarFilas.set(!0)},10)}static \u0275fac=function(e){return new(e||i)(h(q),h(oe),h(re))};static \u0275cmp=D({type:i,selectors:[["app-tabla-turnos"]],decls:21,vars:11,consts:[[1,"h-full","w-full","p-1"],[1,"h-full","w-full","overflow-auto","rounded-2xl","border","border-white","bg-[color:var(--color-crema)]","p-6","shadow-inner"],[1,"mb-4","flex","flex-wrap","items-center","gap-3"],["for","filtro",1,"text-sm","font-semibold","text-[color:var(--color-azul-oscuro)]"],["id","filtro","type","text","placeholder","Ingres\xE1 filtro",1,"w-64","rounded","border","border-gray-300","px-3","py-1","text-sm","focus:ring-2","focus:ring-[color:var(--color-azul-oscuro)]","focus:outline-none",3,"ngModelChange","ngModel"],["type","button",1,"mr-6","rounded","bg-[color:var(--color-azul-oscuro)]","px-3","py-1","text-sm","font-semibold","text-white","shadow","transition-transform","hover:scale-105","hover:bg-[color:var(--color-azul-claro)]",3,"click"],["type","button",1,"rounded","px-3","py-1","text-sm","font-semibold","text-white","shadow","transition-transform","hover:scale-105",3,"click"],[1,"ml-auto"],[3,"cita"],[1,"min-w-full","border-collapse","border","border-gray-300","text-sm"],[1,"bg-[color:var(--color-azul-claro)]","text-[color:var(--color-azul-oscuro)]"],[1,"border","border-gray-300","px-3","py-2"],[3,"cerrar","accionRealizada","cita"],[1,"cursor-pointer","border","border-gray-300","transition-colors","duration-150","hover:bg-[color:var(--color-verde-claro)]",3,"click"],[1,"border","border-gray-300","px-3","py-1"],[1,"rounded","border","border-gray-300","px-3","py-1","text-center","font-semibold",3,"appColorEstado"],[1,"border","border-gray-300","px-3","py-1","text-center"],["type","button",1,"text-[color:var(--color-azul-oscuro)]","underline","hover:text-[color:var(--color-azul-claro)]"],[1,"border","border-gray-300","bg-green-200","px-3","py-1","text-center","hover:bg-green-500"],["type","button",1,"font-bold","text-[color:var(--color-azul-oscuro)]","hover:text-[color:var(--color-white)]",3,"click"],["colspan","11",1,"border","border-gray-300","bg-[color:var(--color-crema)]","px-3","py-2","text-[color:var(--color-azul-oscuro)]"],[1,"grid","grid-cols-2","gap-4"],["colspan","11",1,"border","border-gray-300","px-3","py-6","text-center","font-semibold","text-[color:var(--color-azul-oscuro)]"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),r(4," Filtrar: "),n(),a(5,"input",4),B("ngModelChange",function(g){return R(o.filtroValorModel,g)||(o.filtroValorModel=g),g}),n(),a(6,"button",5),d("click",function(){return o.limpiarFiltro()}),r(7," Limpiar Filtros "),n(),a(8,"button",6),d("click",function(){return o.ordenarPorFecha()}),r(9," \u{1F4C5} Ordenar por Fecha "),n(),a(10,"button",6),d("click",function(){return o.ordenarPorEstado()}),r(11," \u{1F3F7}\uFE0F Ordenar por Estado "),n(),a(12,"div",7),_(13,Me,1,1,"app-acciones-admin",8),n()(),a(14,"table",9)(15,"thead")(16,"tr",10),y(17,Ie,2,1,"th",11,E),n()(),_(19,Ne,3,1,"tbody")(20,ze,4,0,"tbody"),n()()()),e&2&&(l(5),I("ngModel",o.filtroValorModel),l(3),F("bg-green-600",o.ordenamiento()==="fecha")("bg-green-800",o.ordenamiento()!=="fecha"),l(2),F("bg-purple-600",o.ordenamiento()==="estado")("bg-purple-800",o.ordenamiento()!=="estado"),l(3),x(o.mostrarPopupAcciones&&o.citaSeleccionada()?13:-1),l(4),T(o.columnasConDatosDinamicos),l(2),x(!o.cargando()&&o.mostrarFilas()?19:20))},dependencies:[O,$,z,L,j,H,ce,G,J,me],encapsulation:2,data:{animation:[N("fadeInRow",[P(":enter",[b({opacity:0,transform:"translateY(-10px)"}),k("300ms ease-out",b({opacity:1,transform:"translateY(0)"}))])]),N("listStagger",[P(":enter",[X(":enter",[b({opacity:0,transform:"translate(-20px, -10px)"}),ee(50,[k("300ms ease-out",b({opacity:1,transform:"translate(0, 0)"}))])],{optional:!0})])]),N("expandCollapse",[P(":enter",[b({height:"0",opacity:0,overflow:"hidden"}),k("350ms ease-out",b({height:"*",opacity:1}))]),P(":leave",[b({height:"*",opacity:1}),k("250ms ease-in",b({height:"0",opacity:0}))])])]}})};export{ue as TablaTurnos};

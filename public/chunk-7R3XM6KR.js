import{b as I}from"./chunk-WTRNKYQB.js";import{b as k,m as j,n as q,o as A,r as O,v as V,w as P}from"./chunk-I5TDTQNB.js";import"./chunk-HIF3ODWI.js";import{a as L,b as d,d as M,e as x,g as N,i as T,j as B,k as D,m as G}from"./chunk-M7MCGVNB.js";import"./chunk-IGF5EETH.js";import{e as C,g as E,i as S}from"./chunk-HAFCJNMA.js";import{Db as u,Ia as a,Kb as c,Sa as y,Wa as f,X as p,ib as m,jb as l,kb as o,lb as g,ob as w}from"./chunk-VORV4JLZ.js";import"./chunk-LJ5XHLMQ.js";import{h as b}from"./chunk-FK42CRUA.js";var R=(r,n)=>({"mat-form-field-valid":r,"mat-form-field-invalid":n});function H(r,n){r&1&&(l(0,"mat-error"),u(1,"Campo obligatorio"),o())}function J(r,n){r&1&&(l(0,"mat-error"),u(1,"Email inv\xE1lido"),o())}function K(r,n){r&1&&(l(0,"mat-error"),u(1,"Campo obligatorio"),o())}function Q(r,n){r&1&&(l(0,"mat-error"),u(1,"M\xEDnimo 7 caracteres"),o())}var z=class r{fb=p(D);auth=p(k);router=p(I);snackBar=p(j);loginForm;loading=!1;ngOnInit(){this.loginForm=this.fb.group({mail:["",[d.required,d.email]],password:["",[d.required,d.minLength(7)]]})}logear(){return b(this,null,function*(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.loading=!0;let{mail:n,password:s}=this.loginForm.value,e=yield this.auth.login(n,s);if(this.loading=!1,!e.exito){let t="Ocurri\xF3 un error.";e.error!=null&&(t=e.error),this.snackBar.open(t,"Cerrar",{duration:4e3,panelClass:["bg-red-600","text-white"]});return}this.snackBar.open("\xA1Bienvenido de nuevo!","Cerrar",{duration:3e3,panelClass:["bg-green-600","text-white"]}),yield this.router.navigate(["/dashboard"])})}static \u0275fac=function(s){return new(s||r)};static \u0275cmp=y({type:r,selectors:[["app-login"]],decls:21,vars:14,consts:[[1,"bg-gray-200","pt-30","pb-130"],[1,"pb-1","text-center","text-4xl","font-bold","text-azul-oscuro"],[1,"flex","justify-center","py-8"],[1,"flex","w-full","max-w-xl","flex-col","items-center","rounded-xl","bg-crema","p-8","shadow-lg",3,"ngSubmit","formGroup"],["appearance","fill",1,"w-80",3,"ngClass"],["matInput","","type","email","formControlName","mail"],[4,"ngIf"],["matInput","","type","password","formControlName","password"],[1,"flex","justify-center","pt-4"],["mat-raised-button","","color","primary","type","submit",1,"rounded-full","bg-verde-oscuro","px-8","py-2","text-white","shadow-lg",3,"disabled"]],template:function(s,e){if(s&1&&(l(0,"div",0)(1,"h2",1),u(2,"Login"),o(),l(3,"div",2)(4,"form",3),w("ngSubmit",function(){return e.logear()}),l(5,"mat-form-field",4)(6,"mat-label"),u(7,"Email"),o(),g(8,"input",5),f(9,H,2,0,"mat-error",6)(10,J,2,0,"mat-error",6),o(),g(11,"br"),l(12,"mat-form-field",4)(13,"mat-label"),u(14,"Contrase\xF1a"),o(),g(15,"input",7),f(16,K,2,0,"mat-error",6)(17,Q,2,0,"mat-error",6),o(),l(18,"div",8)(19,"button",9),u(20," Login "),o()()()()()),s&2){let t,v,F,i,_,h;a(4),m("formGroup",e.loginForm),a(),m("ngClass",c(8,R,((t=e.loginForm.get("mail"))==null?null:t.valid)&&(((t=e.loginForm.get("mail"))==null?null:t.dirty)||((t=e.loginForm.get("mail"))==null?null:t.touched)),((t=e.loginForm.get("mail"))==null?null:t.invalid)&&(((t=e.loginForm.get("mail"))==null?null:t.dirty)||((t=e.loginForm.get("mail"))==null?null:t.touched)))),a(4),m("ngIf",(v=e.loginForm.get("mail"))==null?null:v.hasError("required")),a(),m("ngIf",(F=e.loginForm.get("mail"))==null?null:F.hasError("email")),a(2),m("ngClass",c(11,R,((i=e.loginForm.get("password"))==null?null:i.valid)&&(((i=e.loginForm.get("password"))==null?null:i.dirty)||((i=e.loginForm.get("password"))==null?null:i.touched)),((i=e.loginForm.get("password"))==null?null:i.invalid)&&(((i=e.loginForm.get("password"))==null?null:i.dirty)||((i=e.loginForm.get("password"))==null?null:i.touched)))),a(4),m("ngIf",(_=e.loginForm.get("password"))==null?null:_.hasError("required")),a(),m("ngIf",(h=e.loginForm.get("password"))==null?null:h.hasError("minlength")),a(2),m("disabled",e.loginForm.invalid)}},dependencies:[S,C,E,G,N,L,M,x,T,B,P,V,O,q,A],encapsulation:2})};export{z as Login};

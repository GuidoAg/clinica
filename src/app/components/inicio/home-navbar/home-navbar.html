<div class="fixed inset-0 flex flex-col overflow-hidden bg-gray-300">
  <nav class="z-50 flex items-center justify-between bg-crema px-6 py-3 shadow">
    <div class="flex items-center gap-4">
      <button
        mat-icon-button
        (click)="toggleSidebar()"
        class="text-azul-oscuro transition-transform hover:scale-110"
      >
        <mat-icon>menu</mat-icon>
      </button>

      <div
        class="flex cursor-pointer items-center space-x-4"
        (click)="clickLogo()"
        (keyup.enter)="clickLogo()"
        tabindex="0"
        role="button"
        aria-label="Ir a inicio"
      >
        <img src="assets/imagenes/logo.svg" alt="Logo" class="h-14" />
        <div class="text-xl leading-tight font-bold text-azul-oscuro">
          <p>
            Centro MÃ©dico<br />
            INSUA
          </p>
        </div>
      </div>
    </div>

    <div class="flex items-end space-x-4">
      <div class="relative flex items-end">
        <button
          class="flex items-center gap-0.5 rounded-full bg-white px-3 py-1 text-xs font-medium text-gray-700 shadow-sm transition-all hover:bg-gray-50 hover:shadow"
          (click)="toggleLanguageMenu()"
        >
          {{ currentLangDisplay }}
          <mat-icon class="!text-base"
            >{{ showLanguageMenu ? 'expand_less' : 'expand_more' }}</mat-icon
          >
        </button>

        @if (showLanguageMenu) {
        <div
          class="ring-opacity-5 absolute top-full right-0 mt-1 w-32 rounded-lg bg-white shadow-lg ring-1 ring-black"
        >
          <button
            (click)="changeLanguage('es')"
            [class.bg-verde-claro]="currentLang === 'es'"
            class="w-full rounded-t-lg px-4 py-2 text-left text-sm transition-colors hover:bg-gray-100"
          >
            ðŸ‡¦ðŸ‡· EspaÃ±ol
          </button>
          <button
            (click)="changeLanguage('en')"
            [class.bg-verde-claro]="currentLang === 'en'"
            class="w-full px-4 py-2 text-left text-sm transition-colors hover:bg-gray-100"
          >
            ðŸ‡¬ðŸ‡§ English
          </button>
          <button
            (click)="changeLanguage('pt')"
            [class.bg-verde-claro]="currentLang === 'pt'"
            class="w-full rounded-b-lg px-4 py-2 text-left text-sm transition-colors hover:bg-gray-100"
          >
            ðŸ‡§ðŸ‡· PortuguÃªs
          </button>
        </div>
        }
      </div>

      <button
        class="rounded-full bg-verde-oscuro px-6 py-1.5 text-sm font-semibold text-white transition-transform hover:scale-110"
        (click)="clickCerrarSesion()"
      >
        {{ 'homeNavbar.cerrarSesion' | transloco }}
      </button>
    </div>
  </nav>

  <div class="flex h-full overflow-hidden">
    <aside
      class="w-64 bg-azul-oscuro p-6 text-crema transition-all duration-300"
      [class.-ml-64]="!sidebarOpen"
    >
      <nav class="flex flex-col space-y-6 font-bold">
        <button
          class="text-left hover:text-lg hover:text-white"
          (click)="navigate('')"
        >
          {{ 'homeNavbar.home' | transloco }}
        </button>
        @if (usuarioActual?.rol === 'paciente') {
        <button
          class="text-left hover:text-lg hover:text-white"
          (click)="navigate('mis-turnos-paciente')"
        >
          {{ 'homeNavbar.misTurnos' | transloco }}
        </button>
        } @if (usuarioActual?.rol === 'especialista') {
        <button
          class="text-left hover:text-lg hover:text-white"
          (click)="navigate('mis-turnos-especialista')"
        >
          {{ 'homeNavbar.misTurnos' | transloco }}
        </button>
        } @if (usuarioActual?.rol === 'admin') {
        <button
          class="text-left hover:text-lg hover:text-white"
          (click)="navigate('tabla-turnos')"
        >
          {{ 'homeNavbar.turnos' | transloco }}
        </button>
        } @if (usuarioActual?.rol === 'especialista') {
        <button
          class="text-left hover:text-lg hover:text-white"
          (click)="navigate('pacientes')"
        >
          {{ 'homeNavbar.pacientes' | transloco }}
        </button>
        } @if (usuarioActual?.rol === 'paciente') {
        <button
          class="text-left hover:text-lg hover:text-white"
          (click)="clickSolicitarTurno()"
        >
          {{ 'homeNavbar.solicitarTurno' | transloco }}
        </button>
        } @if (usuarioActual?.rol === 'admin') {
        <button
          class="text-left hover:text-lg hover:text-white"
          (click)="clickSolicitarTurnoAdmin()"
        >
          {{ 'homeNavbar.solicitarTurno' | transloco }}
        </button>
        }
        <button
          class="text-left hover:text-lg hover:text-white"
          (click)="clickPerfil()"
        >
          {{ 'homeNavbar.miPerfil' | transloco }}
        </button>
        @if (usuarioActual?.rol === 'admin') {
        <button
          class="text-left hover:text-lg hover:text-white"
          (click)="clickUsuario()"
        >
          {{ 'homeNavbar.usuarios' | transloco }}
        </button>
        <button
          class="text-left hover:text-lg hover:text-white"
          (click)="navigate('encuestas')"
        >
          {{ 'homeNavbar.encuestas' | transloco }}
        </button>
        }
      </nav>
    </aside>

    <main class="flex-grow overflow-auto p-6 transition-all duration-300">
      <router-outlet class="h-full w-full"></router-outlet>
    </main>
  </div>
</div>
